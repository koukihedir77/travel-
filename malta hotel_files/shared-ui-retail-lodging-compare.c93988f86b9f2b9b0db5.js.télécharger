/*@license For license information please refer to shared-ui-retail-lodging-compare.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4931],{58696:function(e,n,t){t.d(n,{kb:function(){return hn}});var r=t(38972),a=t(96170),o=t(83962),i=t(23109),l=t(74170),c=t(49006),u=t(32173),m=t(23783),d=t(25738),s=t(51204),g=t(47751),p=t(26246),f=t(49970),v=t(30520),E=t(55025),y=t(27405),b=t(93648),C=t(36182),h=t(1740),S=t(75598),L=t(34328),w=t(67245),A=t(48296),I=t(43746),x=t(92061),R=t(64157),k=t.n(R),P=t(38109);function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function T(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){T(e,n,t[n])}))}return e}function F(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function z(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function B(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(c){l=!0,a=c}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||G(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function j(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,n){if(e){if("string"==typeof e)return O(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O(e,n):void 0}}function M(){var e=_(["\n  fragment LodgingCompareActionSheetItemTemplateFragment on LodgingCompareActionSheetItemTemplate {\n    button {\n      ...LodgingEGDSButtonFragment\n    }\n    accessibilityLabel {\n      ...LodgingEGDSBasicLocalizedTextFragment\n    }\n  }\n"]);return M=function(){return e},e}function N(){var e=_(["\n  fragment LodgingCompareActionSheetToolbarFragment on LodgingCompareActionSheetToolbar {\n    collapseAnalytics {\n      ...ClientSideAnalyticsFragment\n    }\n    expandAnalytics {\n      ...ClientSideAnalyticsFragment\n    }\n    expandAccessibilityLabel\n    collapseAccessibilityLabel\n  }\n"]);return N=function(){return e},e}function H(){var e=_(["\n  fragment LodgingCompareActionSheetFragment on LodgingCompareActionSheet {\n    sheet {\n      ...LodgingEGDSSheetFragment\n    }\n    cancelAction {\n      ...LodgingEGDSButtonFragment\n    }\n    compareActionPrompt\n    compareActionStatus {\n      ...LodgingEGDSCardinalLocalizedTextFragment\n    }\n    compareAction {\n      ...LodgingEGDSButtonFragment\n    }\n    itemTemplate {\n      ...LodgingCompareActionSheetItemTemplateFragment\n    }\n    toolbar {\n      ...LodgingCompareActionSheetToolbarFragment\n    }\n  }\n"]);return H=function(){return e},e}function q(){var e=_(["\n  fragment LodgingCompareBadgeFragment on EGDSStandardBadge {\n    text\n  }\n"]);return q=function(){return e},e}function $(){var e=_(["\n  fragment LodgingCompareAttributeFragment on LodgingCompareAttribute {\n    graphic {\n      ...UIGraphicFragment\n    }\n    text {\n      ...EGDSStylizedTextFragment\n    }\n  }\n\n  fragment LodgingCompareTextItemsFragment on LodgingCompareTextItems {\n    items {\n      ...LodgingCompareAttributeFragment\n    }\n  }\n"]);return $=function(){return e},e}function W(){var e=_(["\n  fragment LodgingCompareCellContentFragment on LodgingCompareCellContent {\n    __typename\n    ...LodgingEGDSRatingFragment\n    ...LodgingCardGuestRatingFragment\n    ... on LodgingCardPriceSection {\n      priceSummary {\n        ...PropertyPriceFragment\n      }\n      badge {\n        ...LodgingCompareBadgeFragment\n      }\n    }\n    ...LodgingCompareTextItemsFragment\n    ...EGDSBadgeFragment\n  }\n\n  ","\n"]);return W=function(){return e},e}function Q(){var e=_(["\n  fragment LodgingCompareCellFragment on LodgingCompareCell {\n    content {\n      ...LodgingCompareCellContentFragment\n    }\n  }\n"]);return Q=function(){return e},e}function U(){var e=_(["\n  fragment LodgingCompareRemoveActionFragment on LodgingCompareRemoveAction {\n    propertyId\n    action {\n      ...LodgingEGDSButtonFragment\n    }\n  }\n"]);return U=function(){return e},e}function V(){var e=_(["\n  fragment LodgingCompareRowFragment on LodgingCompareRow {\n    cells {\n      ...LodgingCompareCellFragment\n    }\n    theme\n  }\n"]);return V=function(){return e},e}function K(){var e=_(["\n  fragment LodgingCompareSectionFragment on LodgingCompareSection {\n    mediaRow {\n      ...LodgingCardMediaSectionFragment\n    }\n    compareRows {\n      ...LodgingCompareRowFragment\n    }\n    viewRow {\n      ...LodgingEGDSButtonFragment\n    }\n    removeRow {\n      ...LodgingCompareRemoveActionFragment\n    }\n  }\n"]);return K=function(){return e},e}function X(){var e=_(["\n  fragment LodgingErrorResponseFragment on LodgingErrorResponse {\n    header\n    body\n    button {\n      ...LodgingEGDSButtonFragment\n    }\n    errorRecoveryButtons {\n      ...LodgingEGDSButtonFragment\n    }\n  }\n"]);return X=function(){return e},e}function J(){var e=_(["\n  query CompareSectionQuery(\n    $context: ContextInput!\n    $criteria: PropertySearchCriteriaInput\n    $propertyIds: [String!]\n    $shoppingContext: ShoppingContextInput\n    $tripItems: TripItemsToCompareInput\n  ) {\n    propertyCompare(context: $context) {\n      compareSection(criteria: $criteria, propertyIds: $propertyIds, shoppingContext: $shoppingContext, tripItems: $tripItems) {\n        content {\n          ...LodgingCompareSectionFragment\n        }\n        error {\n          ...LodgingErrorResponseFragment\n        }\n        impressionAnalytics {\n          ...ClientSideAnalyticsFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return J=function(){return e},e}function Y(){var e=_(["\n  fragment LodgingCompareDialogFragment on EGDSFullScreenDialog {\n    closeAnalytics {\n      ...ClientSideAnalyticsFragment\n    }\n    toolbar {\n      closeText\n      title\n    }\n  }\n"]);return Y=function(){return e},e}function Z(){var e=_(["\n  query PropertyCompareQuery($context: ContextInput!) {\n    propertyCompare(context: $context) {\n      actionSheet {\n        ...LodgingCompareActionSheetFragment\n      }\n      dialog {\n        ...LodgingCompareDialogFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Z=function(){return e},e}var ee=function(e){var n=e.data,t=e.closeCallback,a=e.openCallback,o=z(e,["data","closeCallback","openCallback"]),i=(0,l.Byz)(n.closeAnalytics),c=(0,r.useCallback)((function(){i(),null==t||t()}),[i,t]),u=o.isVisible,m=(0,r.useMemo)((function(){return{isVisible:u,openCallback:a,closeCallback:c}}),[u,a,c]);return r.createElement(v.yo,F(D({},o),{transition:m}))};l.rCG.displayName="LodgingEGDSSheet";var ne=(0,a.Ps)(M()),te=function(e){var n=e.data,t=e.property,a=n.button,o=n.accessibilityLabel,i=t.propertyId,u=t.isAd,m=t.heading,g=t.imageUrl,f=(0,r.useMemo)((function(){var e,n;return T({},null!==(n=null===(e=o.models[0])||void 0===e?void 0:e.source)&&void 0!==n?n:"",null!=m?m:"")}),[o,m]),E=B((0,l.eTT)(o,f),1)[0],b=(0,r.useMemo)((function(){return(null==a?void 0:a.icon)&&(null==a?void 0:a.analytics)?F(D({},a),{icon:F(D({},a.icon),{description:null!=E?E:a.icon.description}),analytics:F(D({},a.analytics),{referrerId:u?"".concat(a.analytics.referrerId,".ad"):a.analytics.referrerId})}):a}),[a,E]),h=B((0,y.NE)(),2)[1].removeCompareProperty,S=(0,r.useCallback)((function(){i&&h(i)}),[i]);return r.createElement(s.E,{rows:["18x"]},r.createElement(v.rb,{backgroundTheme:"secondary",imageUrl:g},r.createElement(C.d,{type:"absolute",position:{left:"zero",top:"zero",right:"zero",bottom:"zero"},cloneElement:!0},r.createElement(d.i,{justifyContent:"center",alignItems:"center"},b&&r.createElement(p.b,{padding:{inline:"two"}},r.createElement(l.IBG,{data:b,size:c.E.SMALL,onClick:S}))))))};te.fragment=ne,te.displayName="LodgingCompareActionSheetItemTemplate";var re=(0,a.Ps)(N()),ae=function(e){var n=e.data,t=e.title,a=void 0===t?"":t,o=e.accessibilityTitle,i=void 0===o?"":o,c=e.expanded,u=e.onToggleExpanded,m=e.announce,d=e.hideNavigation,s=n.expandAnalytics,g=n.expandAccessibilityLabel,p=n.collapseAnalytics,f=n.collapseAccessibilityLabel,y=(0,l.Byz)(s),b=(0,l.Byz)(p),h=(0,r.useCallback)((function(){var e=!c;u(e),e?y():b()}),[c]),S=(0,r.useMemo)((function(){return{onClick:h,navType:c?"expand_down":"expand_up",navIconLabel:c?f:g}}),[c]),L=(0,E.useExperiment)("Property_Compare_Web_Usability").exposure.bucket>0;return r.createElement(r.Fragment,null,r.createElement(v.o8,{navigationContent:d?void 0:S,toolbarTitle:a,inverse:L},!d&&r.createElement(C.d,{onClick:h,type:"absolute",position:{top:"zero",left:"twelve",right:"zero",bottom:"zero"},cloneElement:!0},r.createElement("div",null))),r.createElement("span",{className:"is-visually-hidden","aria-live":m?"polite":void 0},i))};ae.fragment=re,ae.displayName="LodgingCompareActionSheetToolbar";var oe,ie,le,ce,ue=(0,a.Ps)(H()),me={areas:{small:["items","cta"],medium:["items cta"]},columns:{medium:["1fr","1fr"]},rows:{small:["18x"]},space:{column:"six",row:"four"},alignItems:"center"},de=(T(oe={},b.Cu.SMALL,!0),T(oe,b.Cu.LARGE,!1),oe),se=(T(ie={},b.Cu.SMALL,"two"),T(ie,b.Cu.LARGE,"three"),ie),ge=(T(le={},b.Cu.SMALL,!1),T(le,b.Cu.LARGE,!0),le),pe=(T(ce={},b.Cu.SMALL,!0),T(ce,b.Cu.LARGE,!1),ce),fe=function(e){var n=e.data,t=e.isSplitView,a=n.sheet,o=n.cancelAction,i=n.compareActionPrompt,C=n.compareActionStatus,h=n.compareAction,S=n.toolbar,L=n.itemTemplate,w=B((0,y.NE)(),2),A=w[0],I=A.comparePropertyIds,x=A.searchResultsProperties,R=A.maxSelectable,k=A.enabled,P=A.preservedProperties,O=w[1],T=O.openDialog,F=O.resetSelection,z=O.setBottomSheetHeight,_=r.useRef(),G=(0,r.useCallback)((function(){var e=I.filter((function(e){return e.endsWith("-ad")})).flatMap((function(e){var n,t=e.split("-")[0];return null===(n=j(P).concat(j(x)).find((function(e){var n=e.propertyId,r=e.isAd;return t===n&&r})))||void 0===n?void 0:n.urls})).filter((function(e){return Boolean(e)}));e.forEach((function(e){return navigator.sendBeacon(e)}))}),[I,x,P]),M=(0,r.useCallback)((function(){T(),G()}),[G]),N=(0,r.useCallback)((function(){F()}),[]),H=B((0,r.useState)(!1),2),q=H[0],$=H[1],W=B((0,r.useState)(!1),2),Q=W[0],U=W[1],V=(0,r.useMemo)((function(){return I.reduce((function(e,n){var t=(0,y.z8)(n);return e.some((function(e){return t===(0,y.z8)(e)}))?e:j(e).concat([n])}),[]).map((function(e){var n=B(e.split("-"),2),t=n[0],r=n[1],a=Boolean(r);return j(P).concat(j(x)).find((function(e){var n=e.propertyId,r=e.isAd;return t===n&&a===r}))})).filter((function(e){return Boolean(e)}))}),[I,x,P]),K=V.length,X=B((0,r.useState)(K),2),J=X[0],Y=X[1],Z=(0,r.useRef)(K);Z.current=Math.max(Z.current,K);var ne=(0,E.useExperiment)("Property_Compare_Web_Usability").exposure.bucket>0,re=1===Z.current&&!ne,oe=(0,r.useMemo)((function(){return{properties:K}}),[K]),ie=B((0,l.he2)(C,oe),2),le=ie[0],ce=ie[1],ue=ne&&K<2?i:le,fe=!q&&!Q&&K>0,ve=(0,b.uQ)(de);(0,r.useEffect)((function(){if(fe&&ve){var e=document.documentElement.scrollTop,n=window.innerHeight,t=function(){var t=document.documentElement.scrollTop,r=window.innerHeight;if(r<n)return e=t,void(n=r);t-(e=Math.min(e,t))>5&&$(!0)};return window.addEventListener("scroll",t),function(){return window.removeEventListener("scroll",t)}}}),[fe,ve]);var Ee=(0,r.useCallback)((function(e){$(!e),U(!e)}),[]),ye=(0,r.useCallback)((function(){Z.current=0}),[]),be=(0,b.uQ)(se),Ce=(0,b.uQ)(ge),he=(0,b.uQ)(pe),Se=(0,r.useCallback)((function(e){var n=e.height;z(n)}),[]);return J!==K?(Y(K),K>J&&$(!1),!Q||K!==R&&0!==K||U(!1),null):a?r.createElement(ee,{data:a,isVisible:k&&(K>0||ne),type:"bottom",triggerRef:_,autoFocus:!1,closeCallback:ye,expanded:fe,splitView:t&&Ce,onDimensionsChange:Se},S&&r.createElement(ae,{data:S,expanded:fe,onToggleExpanded:Ee,title:null!=ue?ue:"",accessibilityTitle:null!=ce?ce:"",announce:!re,hideNavigation:ne&&K<1}),r.createElement(g.f,{padded:!1},r.createElement(p.b,{padding:"four"},r.createElement(s.E,D({},me),r.createElement(s.a,null,re&&r.createElement("div",{"aria-live":K>0?"polite":void 0},r.createElement(u.i,{backgroundTheme:"secondary",border:!0,padded:!0},r.createElement(d.i,{alignItems:"center",space:"two"},r.createElement(d.j,null,r.createElement("div",null,r.createElement(m.a,{name:"info_outline",spotlight:"info"}))),r.createElement(d.j,null,r.createElement(f.c,{size:400},i))))),!re&&r.createElement(s.E,{space:be,blockSize:"full_size",columns:R},L&&V.map((function(e){return r.createElement(s.a,{key:e.propertyId},r.createElement("div",null,r.createElement(te,{data:L,property:e})))})),Array.from({length:R-K},(function(e,n){return r.createElement(s.a,{key:"item-placeholder-".concat(n)},r.createElement(v.rb,{placeholder:!0}))})))),r.createElement(s.a,null,r.createElement(d.i,{space:"two"},ne&&r.createElement(d.j,null,o&&r.createElement(l.IBG,{data:o,onClick:N,isFullWidth:he,size:c.E.LARGE})),r.createElement(d.j,{grow:1},h&&r.createElement(l.IBG,{data:h,disabled:K<2,onClick:M,isFullWidth:!0,size:c.E.LARGE})))))))):null};fe.fragment=ue,fe.displayName="LodgingCompareActionSheet";var ve=(0,a.Ps)(q()),Ee=function(e){var n=e.data;return n.text?r.createElement(f.c,{size:200,weight:"medium",theme:"emphasis"},n.text):null};Ee.fragment=ve,Ee.displayName="LodgingCompareBadge";var ye=(0,r.createContext)({theme:"STANDARD"}),be=function(e){var n=e.theme,t=e.children,a=(0,r.useMemo)((function(){return{theme:n}}),[n]);return r.createElement(ye.Provider,{value:a},t)},Ce=function(){return(0,r.useContext)(ye)},he=function(e){var n,t,a=e.data;return(0,r.useMemo)((function(){return Object.values(L.v).includes(a.badgeTheme)}),[a.badgeTheme])?r.createElement(L.r,{text:null!==(n=a.text)&&void 0!==n?n:void 0,theme:null!==(t=a.badgeTheme)&&void 0!==t?t:void 0}):r.createElement(l.Pkm,{data:a})},Se=(0,a.Ps)($()),Le=function(e){var n=e.data,t=e.margin,a="SPOTLIGHT"===Ce().theme,o=(0,r.useMemo)((function(){var e;return Array.isArray(n)?r.createElement(w.E,{bullet:"icon-standard",size:"200"===(null===(e=n[0])||void 0===e?void 0:e.text.size)?3:void 0,spacing:!1},n.map((function(e,n){return r.createElement(w.a,{key:n},a?r.createElement(d.i,{alignItems:"center"},r.createElement(l.JO$,{data:e.graphic})):r.createElement(l.JO$,{data:e.graphic}),r.createElement(l.K1H,{inline:!0,data:e.text}))}))):n.graphic&&n.text?r.createElement("div",null,r.createElement(l.SXg,{data:n.graphic}),r.createElement(l.K1H,{inline:!0,data:n.text})):n.graphic?r.createElement(l.SXg,{data:n.graphic}):n.text?r.createElement(l.K1H,{data:n.text}):null}),[n]);return t&&o?r.createElement(p.b,{margin:t},o):o},we={blockstart:"two"},Ae=function(e){var n=e.data.items,t=(0,r.useMemo)((function(){return(n||[]).reduce((function(e,n){if(!n)return e;if(function(e){var n,t;return"Icon"===(null===(n=e.graphic)||void 0===n?void 0:n.__typename)&&Boolean(null===(t=e.text)||void 0===t?void 0:t.__typename)}(n)){var t=e[e.length-1];Array.isArray(t)?t.push(n):e.push([n])}else e.push(n);return e}),[])}),[n]);return r.createElement(r.Fragment,null,t.map((function(e,n){var t=n>0&&Array.isArray(e)!==Array.isArray(e[n-1])?we:void 0;return r.createElement(Le,{data:e,key:n,margin:t})})))};Ae.fragment=Se,Ae.displayName="LodgingCompareTextItems";var Ie=(0,a.Ps)(W(),l.qDW),xe=function(e){var n=e.data;switch(n.__typename){case"EGDSIconRating":return r.createElement(l.Iq1,{data:n});case"LodgingCompareTextItems":return r.createElement(Ae,{data:n});case"LodgingCardPhrase":return r.createElement(l.xzj,{data:n});case"LodgingCardPriceSection":return r.createElement(r.Fragment,null,n.badge&&r.createElement(Ee,{data:n.badge}),r.createElement(l.g2e,{priceSummary:n.priceSummary,flexAlignment:"start"}));case"EGDSStandardBadge":return r.createElement(he,{data:n});default:return null}};xe.fragment=Ie,xe.displayName="LodgingCompareCellContent";var Re=(0,a.Ps)(Q()),ke="three",Pe=function(e){return e?S.q.vertical:[S.q.horizontal,S.q.vertical]},Oe=function(e,n){return e||n?{inline:ke,blockstart:n?void 0:ke,blockend:e?void 0:ke}:void 0},Te=function(e){var n=e.data,t=e.combinePreviousRow,a=Ce().theme,o="COMBINE_NEXT"===a,i="SPOTLIGHT"===a,l=n.content,c=(0,r.useMemo)((function(){return Pe(o||i)}),[o,i]),u=(0,r.useMemo)((function(){return Oe(o,t)}),[o,t]),m=l&&r.createElement(xe,{data:l});return r.createElement(S.b,{border:c,align:"LodgingCardPriceSection"===(null==l?void 0:l.__typename)?{vertical:"bottom"}:{vertical:"top"},padding:u?S.v.zero:void 0},u?r.createElement(p.b,{padding:u},r.createElement("div",null,m)):m)};Te.fragment=Re,Te.displayName="LodgingCompareCell";var De,Fe=new Array(5).fill(null),ze=(T(De={},b.Cu.SMALL,{padding:{inline:"six"}}),T(De,b.Cu.LARGE,{padding:{inline:"three"}}),De),Be=function(e){var n=e.columnCount,t=(n?new Array(n):[]).fill(0),a=(0,b.uQ)(ze);return r.createElement(d.i,null,r.createElement(d.j,{grow:1},r.createElement("div",null)),r.createElement(p.b,D({},a),r.createElement(d.j,{minWidth:"zero"},r.createElement("div",null,r.createElement(S.a,{overflow:!1},r.createElement(S.f,null,r.createElement(r.Fragment,null,r.createElement(S.i,null,t.map((function(e,n){return r.createElement(S.b,{key:n,border:S.q.vertical,padding:S.v.zero},r.createElement(A.a,{ratio:A.E.R1_1},r.createElement(I.a,null)))}))),r.createElement(S.i,null,t.map((function(e,n){return r.createElement(S.b,{key:n,padding:S.v.zero},r.createElement(p.b,{padding:{blockend:"four",blockstart:"three"}},r.createElement(s.E,{columns:["minmax(154px, 154px)"]},r.createElement(s.a,null,r.createElement("div",null,r.createElement(p.b,{margin:{blockend:"two"}},r.createElement(I.b,{animation:!1})),r.createElement(I.b,{type:"secondary",animation:!1}))))))}))),Fe.map((function(e,n){return r.createElement(S.i,{key:n},t.map((function(e,n){return r.createElement(S.b,{key:n,padding:"zero"},r.createElement(p.b,{margin:{blockend:"four",blockstart:"four"}},r.createElement(I.b,{type:"secondary",animation:!1})))})))})))))))),r.createElement(d.j,{grow:1},r.createElement("div",null)))},_e=(0,a.Ps)(U()),je=function(e){var n=e.data,t=n.propertyId,a=B((0,y.NE)(),2)[1].removeCompareProperty,o=(0,r.useCallback)((function(){t&&a(t)}),[t]);return n.action&&r.createElement(l.IBG,{data:n.action,onClick:o})};je.fragment=_e,je.displayName="LodgingCompareRemoveAction";var Ge=function(e){var n=e.data.content,t=e.index,a=e.isAd,o="COMBINE_NEXT"===Ce().theme,i=(0,r.useMemo)((function(){return Pe(o)}),[o]),l=(0,r.useMemo)((function(){return Oe(o,!1)}),[o]),c=(0,r.useMemo)((function(){return"HOT.SR.PROPERTY.COMPARISON.property.".concat(t+1,".impression").concat(a?".ad":"")}),[t,a]);return r.createElement(S.b,{border:i,tag:S.p.header,scope:S.D.column,padding:l?S.v.zero:void 0,align:{vertical:"top",horizontal:"leading"}},r.createElement(p.b,{padding:l},r.createElement(s.E,{columns:["minmax(130px, 130px)"]},r.createElement(s.a,null,r.createElement(x.Pt,{referrerId:c,linkName:"Comparison table column impression",intersectionOptions:{threshold:.95}},r.createElement(f.c,{whiteSpace:"normal"},n&&r.createElement(xe,{data:n})))))))};Ge.displayName="LodgingCompareCellHeader";var Me=(0,a.Ps)(V()),Ne=function(e){var n=e.combinePreviousRow,t=e.headingRow,a=e.getKey,o=e.data,i=e.ads,l=o.cells,c="SPOTLIGHT"===Ce().theme;return r.createElement(v.SC,{spotlightRow:c},l.map((function(e,o){var l=a(o);return e?t?r.createElement(Ge,{key:l,data:e,isAd:Boolean(null==i?void 0:i[o]),index:o}):r.createElement(Te,{key:l,data:e,combinePreviousRow:n}):r.createElement(S.b,{key:l})})))};Ne.fragment=Me,Ne.displayName="LodgingCompareRow";var He,qe=function(e){var n=e.data,t=e.onIntersection,a=e.border,o=B((0,x.S1)(t,{threshold:.95}),1)[0];return r.createElement(S.b,{border:a},n&&r.createElement("div",{ref:o},r.createElement(l.IBG,{data:n,isFullWidth:!0})))},$e=(0,a.Ps)(K()),We=function(e){return Boolean((null==e?void 0:e.length)&&!e.every((function(e){return null===e})))},Qe=function(e){var n;return null!==(null!==(n=null==e?void 0:e.propertyId)&&void 0!==n?n:null)},Ue=new Set(["","-"]),Ve=function(e){var n,t,r,a;return"LodgingCompareTextItems"===(null==e||null===(n=e.content)||void 0===n?void 0:n.__typename)&&1===(null===(t=e.content.items)||void 0===t?void 0:t.length)&&Ue.has(null===(a=e.content.items[0])||void 0===a||null===(r=a.text)||void 0===r?void 0:r.text)},Ke=(T(He={},b.Cu.SMALL,{padding:{inline:"six"}}),T(He,b.Cu.LARGE,{padding:{inline:"three"}}),He),Xe=new Set(["EGDSIconRating","EGDSStandardBadge"]),Je={__typename:"ClientSideAnalytics",eventType:"IMPRESSION",referrerId:"HOT.SR.PRODUCT.COMPARISON.compare.table.viewbutton.impression",linkName:"Compare table view button impression",uisPrimeMessages:[]},Ye=function(e){var n,t=e.propertyIds,a=e.data,o=(0,r.useMemo)((function(){var e,n,r;if(!(null===(e=a.removeRow)||void 0===e?void 0:e.length)||!a.removeRow.every(Qe))return F(D({},a),{ads:null});var o,i,l,c,u=new Set((null!=t?t:[]).map(y.z8)),m=new Set(a.removeRow.reduce((function(e,n,t){return(null==n?void 0:n.propertyId)&&u.has(n.propertyId)?j(e).concat([t]):e}),[])),d=function(e,n){return m.has(n)},s=null!==(o=null===(n=a.viewRow)||void 0===n?void 0:n.filter(d))&&void 0!==o?o:null;return F(D({},a),{mediaRow:null!==(i=null===(r=a.mediaRow)||void 0===r?void 0:r.filter(d))&&void 0!==i?i:null,compareRows:a.compareRows.map((function(e){return e&&F(D({},e),{cells:e.cells.filter(d)})})).reduce((function(e,n){if(function(e){return null==e?void 0:e.cells.every(Ve)}(n)){var t=e[e.length-1];return"COMBINE_NEXT"===(null==t?void 0:t.theme)&&"STANDARD"===(null==n?void 0:n.theme)?j(e.slice(0,-1)).concat([F(D({},t),{theme:"STANDARD"})]):e}return j(e).concat([n])}),[]),viewRow:s,removeRow:null!==(l=a.removeRow.filter(d))&&void 0!==l?l:null,ads:null!==(c=null==s?void 0:s.map((function(e){var n;return Boolean(null==e||null===(n=e.analytics)||void 0===n?void 0:n.referrerId.endsWith(".ad"))})))&&void 0!==c?c:null})}),[t,a]),i=o.mediaRow,c=o.compareRows,u=o.viewRow,m=o.removeRow,s=o.ads,g=null!==(n=null==m?void 0:m.map((function(e,n){var t;return null!==(t=null==e?void 0:e.propertyId)&&void 0!==t?t:n})))&&void 0!==n?n:[],f=function(e){var n;return null!==(n=g[e])&&void 0!==n?n:e},v=(0,b.uQ)(Ke),E=c.findIndex((function(e){return"SPOTLIGHT"!==(null==e?void 0:e.theme)})),C=(0,l.Byz)(Je),h=(0,r.useRef)(!1),L=(0,r.useCallback)((function(e,n){var t;h.current?n.disconnect():(null===(t=e[0])||void 0===t?void 0:t.isIntersecting)&&(h.current=!0,C(),n.disconnect())}),[]);return r.createElement(d.i,null,r.createElement(d.j,{grow:1},r.createElement("div",null)),r.createElement(p.b,D({},v),r.createElement(d.j,{minWidth:"zero"},r.createElement("div",null,r.createElement(S.a,{border:!0,overflow:!1},r.createElement(S.f,null,r.createElement(r.Fragment,null,We(i)&&r.createElement(S.i,null,i.map((function(e,n){return r.createElement(S.b,{key:f(n),border:[S.q.horizontal,S.q.vertical],padding:S.v.zero},e&&r.createElement(l.tjH,{data:e,propertyId:null==t?void 0:t[n],view:l.HoO.RESPONSIVE,imageRatio:A.E.R1_1,isInCompareSection:!0}))}))),c.map((function(e,n){var t;if(!e||!We(e.cells))return null;var a="COMBINE_NEXT"===(null===(t=c[n-1])||void 0===t?void 0:t.theme)&&e.cells.some((function(e){var n;return Xe.has(null==e||null===(n=e.content)||void 0===n?void 0:n.__typename)}));return r.createElement(be,{key:n,theme:e.theme},r.createElement(Ne,{data:e,getKey:f,combinePreviousRow:a,headingRow:n===E,ads:s}))})),We(u)&&r.createElement(S.i,null,u.map((function(e,n){return r.createElement(qe,{key:f(n),data:e,onIntersection:L,border:[S.q.horizontal,S.q.vertical]})}))),We(m)&&r.createElement(S.i,null,m.map((function(e,n){return r.createElement(S.b,{align:{horizontal:"center"},key:f(n),border:[S.q.horizontal,S.q.vertical]},e&&r.createElement(je,{data:e}))}))))))))),r.createElement(d.j,{grow:1},r.createElement("div",null)))};Ye.fragment=$e,Ye.displayName="LodgingCompareSection";var Ze,en=(0,a.Ps)(X()),nn=(T(Ze={},b.Cu.SMALL,!0),T(Ze,b.Cu.MEDIUM,!1),Ze),tn=function(e){var n=e.data,t=e.closeDialog,a=n.button,o=n.header,i=n.body,c=n.errorRecoveryButtons,u=(0,r.useCallback)((function(){t(),window._qHasUsedPropertyCompare=!0}),[t]),m=(0,r.useCallback)((function(){"lodging-property-compare-error-button-close"===a.egdsElementId?u():window.location.reload()}),[a.egdsElementId]),s=(0,b.uQ)(nn);return r.createElement(p.b,{margin:{inline:"six"}},r.createElement(d.i,{direction:"column",blockSize:"full_size",alignItems:"center"},r.createElement(d.j,null,r.createElement(f.E,{size:5},o)),r.createElement(p.b,{margin:{blockstart:"two"}},r.createElement(d.j,null,r.createElement(f.c,{size:300,align:"center"},i))),r.createElement(p.b,{margin:{blockstart:"six"}},r.createElement(d.j,null,r.createElement(l.IBG,{data:a,isFullWidth:s,onClick:m}))),(null==c?void 0:c[0])?r.createElement(p.b,{margin:{blockstart:"three"}},r.createElement(d.j,null,r.createElement(l.IBG,{data:c[0],onClick:u,isFullWidth:s}))):null))};tn.fragment=en,tn.displayName="LodgingErrorResponse";var rn=(0,a.Ps)(J(),Ye.fragment,l.tjH.fragment,Te.fragment,xe.fragment,l.Iq1.fragment,l.xzj.fragment,Ae.fragment,Ee.fragment,l.SXg.fragment,l.TMM.fragment,l.IBG.fragment,l.oD6,l.TNw,je.fragment,tn.fragment,l.Pkm.fragment,Ne.fragment),an=function(e){var n,t,a,c,u,m,d,s=e.inputs,g=e.skipSsr,p=e.closeDialog,f=(0,i.v)().context,v=(0,r.useMemo)((function(){return F(D({},s),{context:f})}),[]),E=(0,o.a)(rn,{variables:v,ssr:!g}).data,y=null!==(u=null==E||null===(n=E.propertyCompare)||void 0===n?void 0:n.compareSection)&&void 0!==u?u:{},b=y.content,C=y.error,h=y.impressionAnalytics,S=(0,l.Byz)(null!=h?h:null);return(0,r.useEffect)((function(){S()}),[S]),C?r.createElement(tn,{data:C,closeDialog:p}):b?r.createElement(Ye,{data:b,propertyIds:s.propertyIds}):r.createElement(Be,{columnCount:null!==(d=null!==(m=null===(t=s.propertyIds)||void 0===t?void 0:t.length)&&void 0!==m?m:null===(c=s.tripItems)||void 0===c||null===(a=c.tripItemIds)||void 0===a?void 0:a.length)&&void 0!==d?d:0})};an.displayName="CompareSection";var on,ln,cn,un=(0,a.Ps)(Y()),mn=(T(on={},b.Cu.SMALL,{type:"full"}),T(on,b.Cu.LARGE,{type:"centered",minWidth:804,maxWidth:804}),on),dn=(T(ln={},b.Cu.SMALL,{padding:{block:"six"}}),T(ln,b.Cu.LARGE,{padding:{blockstart:"three",blockend:"six"}}),ln),sn=(T(cn={},b.Cu.SMALL,!0),T(cn,b.Cu.LARGE,!1),cn),gn=function(e){var n=e.data,t=n.closeAnalytics,a=n.toolbar,o=e.inputs,i=(0,l.Byz)(t),c=(0,r.useRef)(null),u=B((0,h.useDialog)(y.ol,y.P1),3),m=u[0],d=u[1],s=u[2],f=B((0,y.NE)(),2),E=f[0],C=E.isDialogOpen,S=E.comparePropertyIds,L=E.deepLinkDialogPropertyIds,w=f[1],A=w.closeDialog,I=w.openDialog,x=(0,r.useRef)(!1),R=(0,b.uQ)(sn);(0,r.useEffect)((function(){C!==x.current?(C?d.openDialog():(i(),d.closeDialog()),x.current=C):m!==x.current&&(m?I():A(),x.current=m)}),[C,m]);var k,P=(0,r.useCallback)((function(){A(),window._qHasUsedPropertyCompare=!0}),[]),O=L||S,T=(0,b.uQ)(mn),z=(0,b.uQ)(dn);return r.createElement(g.h,{isVisible:m},r.createElement(s,null,r.createElement(v.yo,D({isVisible:m,triggerRef:c},T),r.createElement(v.o8,{bottomBorder:R,toolbarTitle:a.title,navigationContent:{onClick:P,navIconLabel:null!==(k=a.closeText)&&void 0!==k?k:void 0}}),r.createElement(g.f,{padded:!1},r.createElement(p.b,D({},z),r.createElement("div",null,r.createElement(an,{inputs:F(D({},o),{propertyIds:O}),closeDialog:A})))))))};gn.fragment=un,gn.displayName="LodgingCompareDialog";var pn=(0,a.Ps)(Z(),fe.fragment,l.rCG.fragment,l.oD6,l._yO.fragment,l.TMM.fragment,l.IBG.fragment,gn.fragment,l.TNw,l.dNj.fragment,ae.fragment,te.fragment),fn=function(e){var n,t=e.inputs,a=e.skipSsr,l=e.isSplitView,c={context:(0,i.v)().context},u=(0,o.a)(pn,{variables:c,ssr:!a}),m=u.data,d=u.error,s=u.loading,g=null!==(n=null==m?void 0:m.propertyCompare)&&void 0!==n?n:{},p=g.actionSheet,f=g.dialog;return s||d||!p||!f?null:r.createElement(r.Fragment,null,r.createElement(fe,{data:p,isSplitView:l}),r.createElement(gn,{data:f,inputs:t}))};fn.displayName="sharedui-PropertyCompare";var vn=function(e){var n,t,r,a,o,i,c=null===(t=e.mediaSection.gallery)||void 0===t||null===(n=t.media[0])||void 0===n?void 0:n.media;return{isAd:(0,l.A6Q)(e.mediaSection),propertyId:e.id,urls:null!==(o=null==e||null===(r=e.cardLink)||void 0===r?void 0:r.analytics.urls)&&void 0!==o?o:void 0,heading:null===(a=e.headingSection)||void 0===a?void 0:a.heading,imageUrl:"Image"===(null==c?void 0:c.__typename)&&(i=c.url,i&&"undefined"!=typeof Symbol&&i.constructor===Symbol||1)?c.url:void 0}},En=new Set(["comparePropertyIds","searchId","useRewards"]),yn=function(e){var n,t,r;return e&&F(D({},e),{primary:F(D({},null==e?void 0:e.primary),{destination:{}}),secondary:F(D({},null==e?void 0:e.secondary),{selections:null!==(r=null==e||null===(t=e.secondary)||void 0===t||null===(n=t.selections)||void 0===n?void 0:n.filter((function(e){var n=e.id;return!En.has(n)})))&&void 0!==r?r:[],counts:null})})},bn=new Set([P.kv.Lodging]),Cn=(0,l.HR8)({name:"gateByProductType",predicate:function(){return bn.has((0,P.Cl)())}}),hn=(0,l.ujb)({label:"LodgingCompare"})(Cn((function(e){var n=e.searchResultsProperties,t=e.criteria,a=e.shoppingContext,o=e.skipSsr,i=e.isSplitView,l=B((0,y.NE)(),2)[1],c=l.setProperties,u=l.resetSelection;(0,r.useEffect)((function(){c(n.map(vn))}),[n]);var m,d,s,g=(0,r.useRef)(t);if(t!==g.current){var p=(m=t,d=g.current,!k()(yn(m),yn(d))||!(null==m||null===(s=m.primary.destination.mapBounds)||void 0===s?void 0:s.length)&&!k()(null==m?void 0:m.primary.destination,null==d?void 0:d.primary.destination));if(g.current=t,p)return u(),null}return r.createElement(fn,{skipSsr:o,isSplitView:i,inputs:{criteria:t,shoppingContext:a}})})))}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-retail-lodging-compare.c93988f86b9f2b9b0db5.js.map