/*@license For license information please refer to shared-ui-global-navigation-picker.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3337],{94738:function(e,n,t){t.d(n,{cW:function(){return X},pQ:function(){return M}});var r=t(38972),a=t(96170),l=t(83962),i=t(10309),c=t(7951),o=t(28243),u=t(49006),s=t(8684),m=t(23783),d=t(25738),f=t(10225),g=t(58578),v=t(70027),p=t(47751),y=t(26246),E=t(49970),b=t(93519),k=t(23109),h=t(92061),N=t(1740),P=t(55025),O=t(93648),S=t(87251);function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function I(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){I(e,n,t[n])}))}return e}function A(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function C(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,l=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);i=!0);}catch(o){c=!0,a=o}finally{try{i||null==t.return||t.return()}finally{if(c)throw a}}return l}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function L(){var e=w(["\n  fragment CurrencySelectorFragment on CurrencySelector {\n    disabled\n    heading\n    queryParameterName\n    options {\n      name\n      selected\n      value\n    }\n    onChangeAnalytics {\n      linkName\n      referrerId\n    }\n  }\n"]);return L=function(){return e},e}function j(){var e=w(["\n  fragment LanguageSelectorFragment on LanguageSelector {\n    heading\n    queryParameterName\n    options {\n      name\n      selected\n      value\n    }\n    onChangeAnalytics {\n      linkName\n      referrerId\n    }\n  }\n"]);return j=function(){return e},e}function x(){var e=w(["\n  fragment PosSelectorFragment on PosSelector {\n    heading\n    options {\n      name\n      selected\n      value\n    }\n    onChangeAnalytics {\n      linkName\n      referrerId\n    }\n  }\n"]);return x=function(){return e},e}function D(){var e=w(["\n  fragment OneKeyMessagingFragment on Picker {\n    oneKeyMessagingHeading\n    oneKeyMessagingSubHeading\n  }\n"]);return D=function(){return e},e}function F(){var e=w(["\n  query LocalePreferencesQuery(\n    $context: ContextInput!\n    $lineOfBusiness: GlobalNavigationLineOfBusiness\n    $pickerTriggerPlacementType: PickerTriggerPlacementType\n    $selectedSiteId: Int\n  ) {\n    localePreferences(\n      context: $context\n      lineOfBusiness: $lineOfBusiness\n      pickerTriggerPlacementType: $pickerTriggerPlacementType\n      selectedSiteId: $selectedSiteId\n    ) {\n      heading\n      closeDialogText\n      submitText\n      bannerText\n      ...OneKeyMessagingFragment\n      urlToSubmit\n      queryParamsToSubmit {\n        key\n        value\n      }\n      trigger {\n        iconName\n        text\n        flagName\n        trackingEvent\n        displayType\n      }\n      preferences {\n        __typename\n        ...CurrencySelectorFragment\n        ...LanguageSelectorFragment\n        ...PosSelectorFragment\n      }\n      impressionAnalytics {\n        linkName\n        referrerId\n      }\n      saveAnalytics {\n        linkName\n        referrerId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return F=function(){return e},e}var M=function(e){return e.MENU_ITEM="MENU_ITEM",e.NAV_LINK="NAV_LINK",e}(M||{}),K=/\{value\}/g,B=function(e,n){var t=n.replace(/\s/,"");return e.replace(K,t)},z=(0,a.Ps)(L()),$=function(e){var n=e.data,t=e.updateQueryParams,a=n.disabled,l=n.heading,i=n.queryParameterName,c=n.options,o=n.onChangeAnalytics,u=c.find((function(e){return!0===e.selected})),s=C(r.useState((null==u?void 0:u.value)||""),2),m=s[0],d=s[1],f=(0,h.Gv)();r.useEffect((function(){return d((null==u?void 0:u.value)||"")}),[u]);return c.length?r.createElement(S.i,{id:"currency-selector",label:l,value:m,onChange:function(e){var n,r=e.target.value,a=(null==o?void 0:o.referrerId)?B(null==o?void 0:o.referrerId,r):"";f(a,null!==(n=null==o?void 0:o.linkName)&&void 0!==n?n:""),d(r),t(i,r,(null==u?void 0:u.value)||null)},disabled:a},c.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)}))):null};$.displayName="CurrencySelector",$.fragment=A(T({},z),{__typename:"CurrencySelector"});var G=(0,a.Ps)(j()),R=function(e){var n=e.data,t=e.updateQueryParams,a=n.heading,l=n.options,i=n.queryParameterName,c=n.onChangeAnalytics,o=l.find((function(e){return!0===e.selected})),u=C(r.useState((null==o?void 0:o.value)||""),2),s=u[0],m=u[1],d=(0,h.Gv)();r.useEffect((function(){return m((null==o?void 0:o.value)||"")}),[o]);return l.length?r.createElement(S.i,{id:"language-selector",label:a,value:s,onChange:function(e){var n,r=e.target.options.selectedIndex,a=l[r].name,u=(null==c?void 0:c.referrerId)?B(null==c?void 0:c.referrerId,a):"";d(u,null!==(n=null==c?void 0:c.linkName)&&void 0!==n?n:"");var s=e.target.value;m(s),t(i,s,(null==o?void 0:o.value)||null)}},l.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)}))):null};R.displayName="LanguageSelector",R.fragment=A(T({},G),{__typename:"LanguageSelector"});var U=(0,a.Ps)(x()),q=function(e){var n=e.refetch,t=e.data,a=t.heading,l=t.options,i=t.onChangeAnalytics,c=l.find((function(e){return!0===e.selected})),o=C(r.useState((null==c?void 0:c.value)||""),2),u=o[0],s=o[1],m=(0,h.Gv)();return l.length?r.createElement(S.i,{id:"site-selector","data-stid":"site-selector",label:a,value:u,onChange:function(e){var t,r=e.target.options.selectedIndex,a=l[r].name,c=(null==i?void 0:i.referrerId)?B(null==i?void 0:i.referrerId,a):"";m(c,null!==(t=null==i?void 0:i.linkName)&&void 0!==t?t:"");var o=e.target.value;s(o),n({selectedSiteId:Number(o)})}},l.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.name)}))):null};q.displayName="PosSelector",q.fragment=A(T({},U),{__typename:"PosSelector"});var V=(0,a.Ps)(D()),H=function(e){var n=e.data,t=n.oneKeyMessagingHeading,a=n.oneKeyMessagingSubHeading;return r.createElement(r.Fragment,null,t&&r.createElement(y.b,{padding:{inline:"four",blockstart:"six"}},r.createElement(d.i,null,r.createElement(d.j,null,r.createElement(y.b,{margin:{inlinestart:"two",inlineend:"three"}},r.createElement(m.a,{name:"warning"}))),r.createElement(d.j,null,r.createElement("div",{"data-stid":"picker-one-key-heading"},r.createElement(E.E,{size:6},t))))),a&&r.createElement(y.b,{padding:{inline:"six",blockstart:"six"}},r.createElement("div",{"data-stid":"picker-one-key-subheading"},r.createElement(E.c,{size:400},a))))};H.displayName="OneKeyMessaging",H.fragment=V;var Q=(0,a.Ps)(F(),$.fragment,R.fragment,q.fragment,H.fragment),W=[$,R,q],J=function(e){var n=e.content;return r.createElement(c.E,{fullWidth:!0},r.createElement(y.b,{padding:{block:"one"}},r.createElement(d.i,{alignItems:"center",space:"two"},r.createElement(d.j,null,r.createElement(y.b,{margin:{inlinestart:"four",inlineend:"six"}},r.createElement(m.a,{name:"info_outline"}))),r.createElement(d.j,null,r.createElement("div",{"data-stid":"picker-banner-text"},r.createElement(E.c,null,n))))))},X=function(e){var n=e.skipSsr,t=e.lineOfBusiness,a=e.pickerTriggerPlacementType,c={context:(0,k.v)().context,lineOfBusiness:t,pickerTriggerPlacementType:a},d=(0,l.a)(Q,{variables:c,ssr:!n}),E=d.data,S=d.error,_=d.loading,I=d.refetch,A=d.networkStatus,w=C((0,N.useDialog)("disp-settings-picker"),3),L=w[0],j=w[1],x=w[2],D=r.useRef(null),F=(0,h.Gv)(),M=(0,P.useExperiment)("Shared_UI_Remove_Deprecated_UITK_Nav_Button").exposure.bucket>0,K=r.useCallback((function(){j.closeDialog()}),[j]),B={},z=function(e,n,t){n===t?delete B[e]:B[e]=n},$=function(){var e,n,t;j.closeDialog();var r=null==E||null===(e=E.localePreferences)||void 0===e?void 0:e.saveAnalytics;(null==r?void 0:r.referrerId)&&F(r.referrerId,(null==r?void 0:r.linkName)||"Picker button");var a=null==E||null===(n=E.localePreferences)||void 0===n?void 0:n.urlToSubmit,l=(null==E||null===(t=E.localePreferences)||void 0===t?void 0:t.queryParamsToSubmit)||[],c={};l.forEach((function(e){c[e.key]=e.value}));var o=Object.keys(l).length>0,u=Object.keys(B).length>0;if(a||o||u)if(a){var s=i.stringify(T({},c,B));window.location.href=s?"".concat(a,"?").concat(s):a}else{var m=i.parse(window.location.search),d=i.stringify(T({},m,c,B));window.location.search=d}};if(_&&!(2===A||4===A)||S||!E)return null;var G=E.localePreferences,R=G.preferences,U=G.trigger,q=G.heading,V=G.closeDialogText,X=G.submitText,Y=G.bannerText,Z=G.impressionAnalytics;if(!R||!R.length)return null;var ee,ne,te=function(){F(U.trackingEvent,""),j.toggleDialog()},re=r.createElement(r.Fragment,null,U.iconName&&r.createElement(y.b,{margin:{inlineend:"one"}},r.createElement(m.a,{name:U.iconName,size:m.E.SMALL})),r.createElement(y.b,{margin:{inline:"one"}},r.createElement("span",null,U.text)),U.flagName&&r.createElement(y.b,{margin:{inlinestart:"one"}},r.createElement(g.a,{name:U.flagName}))),ae=r.createElement(r.Fragment,null,U.iconName&&r.createElement(y.b,{padding:{inlineend:"two"}},r.createElement(m.a,{name:U.iconName,size:m.E.SMALL})),U.text,U.flagName&&r.createElement(y.b,{padding:{inlinestart:"two"}},r.createElement(g.a,{name:U.flagName}))),le=r.createElement(r.Fragment,null,U.iconName&&r.createElement(m.a,{name:U.iconName,size:m.E.SMALL}),U.text,U.flagName&&r.createElement(g.a,{name:U.flagName})),ie=r.createElement(p.h,{isVisible:L},r.createElement(x,null,r.createElement(O.l_,null,r.createElement(O.Vk,null,r.createElement(p.e,{isVisible:L,returnFocusOnClose:!0,type:"full",triggerRef:D},r.createElement(b.b,{toolbarTitle:q,key:"picker-dialog-toolbar",navigationContent:{onClick:K,navIconLabel:V,navType:"close"}}),Y&&r.createElement(J,{content:Y}),r.createElement(H,{data:E.localePreferences}),r.createElement(p.f,null,R.map((function(e){if(!e)return null;var n=W.find((function(n){return n.fragment.__typename===e.__typename}));return n?r.createElement(y.b,{margin:{block:"three"},key:"selector-".concat(e.__typename)},r.createElement("div",null,r.createElement(n,{refetch:I,data:e,updateQueryParams:z}))):null})),r.createElement(v.E,{type:v.a.BUTTON},r.createElement(o.E,{isFullWidth:!0,size:u.E.LARGE,onClick:$},X))))),r.createElement(O.N0,null,r.createElement(p.e,{isVisible:L,returnFocusOnClose:!0,type:"centered",centeredSheetSize:"small",triggerRef:D},r.createElement(b.b,{toolbarTitle:q,key:"picker-dialog-toolbar",navigationContent:{onClick:K,navIconLabel:V,navType:"close"}}),Y&&r.createElement(J,{content:Y}),r.createElement(H,{data:E.localePreferences}),r.createElement(p.f,null,R.map((function(e){if(!e)return null;var n=W.find((function(n){return n.fragment.__typename===e.__typename}));return n?r.createElement(y.b,{margin:{block:"three"},key:"selector-".concat(e.__typename)},r.createElement("div",null,r.createElement(n,{refetch:I,data:e,updateQueryParams:z}))):null})),r.createElement(o.E,{isFullWidth:!0,size:u.E.LARGE,onClick:$},X)))))));return r.createElement(r.Fragment,null,"GLOBAL_NAV_LINK"===U.displayType?r.createElement(y.b,{padding:{block:"three",inline:"six"}},r.createElement(f.E,{className:"uitk-list-item",onClick:te,"data-stid":"link-type-picker-trigger",domRef:D},r.createElement("button",{type:"button"},le))):r.createElement(y.b,{margin:M?{small:{inline:"one"},large:{inline:"two"}}:void 0},r.createElement(s.E,{className:M?void 0:"global-navigation-nav-button",onClick:te,"data-stid":"button-type-picker-trigger",domRef:D},null===U.iconName?re:ae)),L&&((null==Z?void 0:Z.referrerId)?r.createElement(h.Pt,{referrerId:null!==(ee=null==Z?void 0:Z.referrerId)&&void 0!==ee?ee:"",linkName:null!==(ne=null==Z?void 0:Z.linkName)&&void 0!==ne?ne:""},ie):ie))};X.displayName="sharedui-Picker"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-global-navigation-picker.c2a52a1c4512f9c67d24.js.map