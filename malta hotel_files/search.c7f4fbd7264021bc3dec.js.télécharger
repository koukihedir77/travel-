/*@license For license information please refer to search.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6464],{85640:function(e,t,a){a.r(t),a.d(t,{default:function(){return tn}});var n=a(38972),r=a(78096),l=a(903),i=a(43270),o=a(55183),s=a(1415),c=a(52011),u=a(99069),d=a(8169),m=a(10309),p=a(68536),v=a(72562),E=a(23783),g=a(25738),h=a(51204),y=a(36182),b=a(82068),f=a(83359),S=a(26246),k=a(12455),_=a(38591),R=a(85690),x=a(65626),P=a(64406),I=a(55025),C=a(85221),L=a(72470),T=a(44922),w=a(64572),O=a(48525),D=a(39828),A=a(73592),N=a(60514),M=a(20113),B=a(64425),F=a(13624);const j=(e,t)=>{var a;let n=null===(a=e.searchCriteria)||void 0===a?void 0:a.house_rules_group;if(t){n=null==n?void 0:n.filter((e=>e!==A.X.PETS_ALLOWED));t.some((e=>e.value===String(A.X.PETS_ALLOWED)))&&(null==n||n.push(A.X.PETS_ALLOWED))}return n},H=(e,t)=>{var a,n,r;return 1===(null===(n=null===(a=null==t?void 0:t.exposures)||void 0===a?void 0:a.Thematic_search_by_categories_Post_mvp_BEXGH)||void 0===n?void 0:n.bucket)?null===(r=e.searchCriteria)||void 0===r?void 0:r.categorySearch:""},U=(e,t)=>{var a;let n=null===(a=e.searchCriteria)||void 0===a?void 0:a.amenities;if(t){n=null==n?void 0:n.filter((e=>e!==D.k9C.PETS));t.some((e=>e.value===String(A.X.PETS_ALLOWED)))&&(null==n||n.push(D.k9C.PETS))}return null==n?void 0:n.filter(Boolean).join()},V=(e,t)=>{if(null===e)return{startDate:void 0,endDate:void 0};const{checkInDate:a,checkOutDate:n}=e,r=new Date(a.year,a.month-1,a.day),l=new Date(n.year,n.month-1,n.day);return{startDate:t.formatDate(r,{raw:"yyyy-MM-dd"}),endDate:t.formatDate(l,{raw:"yyyy-MM-dd"})}},G=e=>e.map((({length:e,unit:t,bound:a})=>(a?[e,t,a]:[e,t]).join("_"))),z=(e,t)=>e.map((({start:e,end:a})=>{const n=e&&[e.year,e.month,e.day],r=a&&[a.year,a.month,a.day];return`${P.E.formatDateStringToIsoDate(n.join("-"),"yyyy-MM-dd",t)}_${P.E.formatDateStringToIsoDate(r.join("-"),"yyyy-MM-dd",t)}`})),W=e=>null!==e.get(F.H.semcid),Y={[N.fv.ACCESSIBILITY]:"array",[N.fv.AGENCY_BUSINESS_MODELS]:"array",[N.fv.AMENITIES]:"array",[N.fv.BED_TYPE_GROUP]:"array",[N.fv.BEDROOM_FILTER]:"array",[N.fv.CHAIN]:"value",[N.fv.CLEANLINESS]:"array",[N.fv.COMMISSION_TIERS]:"array",[N.fv.DEALS]:"array",[N.fv.HOTEL_BRAND]:"array",[N.fv.MEAL_PLANS]:"array",[N.fv.REGION_ID]:"value",[N.fv.PAYMENT_TYPE]:"array",[N.fv.POI]:"value",[N.fv.PROPERTY_NAME]:"value",[N.fv.PROPERTY_STYLES]:"array",[N.fv.REVIEW_SCORE]:"value",[N.fv.REWARDS]:"array",[N.fv.STAR]:"array",[N.fv.STAY_OPTIONS_GROUP]:"array",[N.fv.STAY_TYPE]:"array",[N.fv.STRUCTURE_TYPE]:"array",[N.fv.TRAVELER_TYPE]:"array",[N.fv.MULTI_NEIGHBORHOOD_GROUP]:"array",[T.tI.PROPERTY_STYLE]:"array",[T.tI.NEIGHBORHOOD]:"value",[T.tI.MIN_BEDROOMS]:"value",[T.tI.MIN_BATHROOMS]:"value",[T.tI.PROPERTY_TYPE]:"array",[T.tI.LOCATION]:"array",[T.tI.ACCESSIBILITY_FEATURES]:"array",[T.tI.BOOKING_OPTIONS]:"array",[T.tI.DISCOUNTS_GROUP]:"array",[T.tI.AMENITIES_FACILITIES]:"array",[T.tI.FREE_CANCELLATION_GROUP]:"array",[T.tI.HOUSE_RULES]:"array",[T.tI.NEARBY_ACTIVITIES]:"array",[T.tI.NEIGHBORHOOD_GROUP]:"value",[T.tI.PREMIER_HOST]:"array",[T.tI.PROPERTIES_GOOD]:"array",[T.tI.PROPERTY_REVIEWS]:"array",[T.tI.ROOMS_SPACES]:"value",[T.tI.SAFETY]:"array",[T.tI.VIRTUAL_TOUR_GROUP]:"array",[T.tI.PRICING_GROUP]:"array",[T.tI.PROPERTY_NAME]:"value",[T.tI.AVAILABLE_FILTER]:"array"},q=()=>{var e,t;const a=(0,r.useLocation)(),l=(0,r.useHistory)(),i=(0,C.useLocalization)(),o=new P.E(i),{analytics:s,searchResults:u,experiment:m,uiPage:p,context:v,analyticsSearch:E}=(0,w.m)(),[g,h]=n.useState(!1),y=[...Object.values(T.tI),...Object.values(T.AI)],b=new URLSearchParams(a.search),f=b.get("startDate")||"",S=b.get("endDate")||"",k=b.get("searchRange")||"",D=b.get("latLong")||"",A=b.get("regionId")||"",N=b.get("daysInFuture")||"",q=b.get("stayLength")||"",K=Boolean((null===(e=null==v?void 0:v.deviceInformation)||void 0===e?void 0:e.mobile)&&!(null===(t=null==v?void 0:v.deviceInformation)||void 0===t?void 0:t.tablet)),Q=Boolean((e=>{var t,a,n,r;switch(e.get("mctc")){case F.A.TRIVAGO:return Boolean(null===(t=e.get(F.H.mdpdtl))||void 0===t?void 0:t.includes("defdate=1"));case F.A.TRIPADVISOR:return Boolean(null===(a=e.get(F.H.icmdtl))||void 0===a?void 0:a.includes("defdate.1"))||Boolean(null===(n=e.get(F.H.icmdtl.toUpperCase()))||void 0===n?void 0:n.includes("defdate.1"));case F.A.GOOGLE_HA:return Boolean(null===(r=e.get(F.H.mdpdtl.toUpperCase()))||void 0===r?void 0:r.includes("DDT"));default:return!1}})(b)||W(b)),X=Boolean((e=>{switch(e.get("mctc")){case F.A.TRIVAGO:return Boolean(e.get(F.H.mdpdtl));case F.A.TRIPADVISOR:return Boolean(e.get(F.H.icmdtl))||Boolean(e.get(F.H.icmdtl.toUpperCase()));case F.A.GOOGLE_HA:return Boolean(e.get(F.H.mdpdtl))||Boolean(e.get(F.H.mdpdtl.toUpperCase()));default:return!1}})(b)||W(b)),J=(0,R.d)(v)&&""!==f&&P.E.isBefore(f,o.getToday()),$=Boolean("true"===b.get("openPlayBack")),Z=Boolean($&&K),ee=Boolean(m&&v&&((e,t)=>1===(0,B.lF)("Alternate_Destination_Recs_SRP_Lodging_Feature_Gate",t,e))(m,v)),{exposure:te,logExperiment:ae}=(0,I.useExperiment)("Vrbo_filter_persistence_on_destination_change"),{getTargets:ne}=(0,L.xK)(),{SearchForm:re}=ne(["SearchForm"]);n.useEffect((()=>{Q&&!K&&h(!0)}),[]),n.useEffect((()=>{(0,R.d)(v)&&!K&&((f||S||k)&&!J||h(!0))}),[]),n.useEffect((()=>{const e=(0,_.reaction)((()=>null==p?void 0:p.openNewDatePickerEvent),(e=>{var t;e&&(h(!0),null===(t=null==re?void 0:re.current)||void 0===t||t.scrollIntoView({block:"start",behavior:"instant"}))}));return()=>e()}),[null==p?void 0:p.openNewDatePickerEvent]);const le={dateLocalFormat:null==v?void 0:v.localDateFormat,queryParamStartDate:J?"":f,queryParamEndDate:J?"":S,isVrboPastDateSearch:J,handleSubmit:(e,t)=>{var n,r,o;e.preventDefault(),null==s||s.resetAnalyticsForNewPage(),(0,x.DI)(!1);const d=(null===(o=null===(r=null===(n=null==t?void 0:t.propertySearchCriteriaInput)||void 0===n?void 0:n.primary)||void 0===r?void 0:r.destination)||void 0===o?void 0:o.regionId)!==A,p=(()=>{for(const e of b.keys())if(y.includes(e)&&"RECOMMENDED"!==b.get(e))return!0;return!1})();u&&v&&m&&t&&E&&(1===te.bucket&&d&&p&&ae(te),(({propertySearchCriteriaInput:e},t,a,n,r,l,i,o,s)=>{var u,d,m,p,v,E,g,h,y,b,f;n.clearDefaultRequestFields(),n.clearPagination(),n.shouldFetch=!0;const{primary:S,secondary:k}=e||{},{regionName:_,regionId:x,coordinates:P,pinnedPropertyId:I}=(null==S?void 0:S.destination)||{},C=(null==S?void 0:S.dateRange)?V(S.dateRange,i):void 0,L=null==C?void 0:C.startDate,w=null==C?void 0:C.endDate,O=(null==S?void 0:S.rooms)?(0,M._6)(S.rooms):void 0,D=null==O?void 0:O.adults,A=null==O?void 0:O.children,N=P?[P.latitude,P.longitude].join(","):"",B=new URLSearchParams(t.search),F=B.get("startDate"),W=B.get("endDate"),q=B.get("regionId"),K=B.get("vacationRentalsOnly"),Q=(null===(u=null==S?void 0:S.flexSearchCriteria)||void 0===u?void 0:u.flexibility)?G(S.flexSearchCriteria.flexibility):void 0,X=(null===(d=null==S?void 0:S.flexSearchCriteria)||void 0===d?void 0:d.searchRange)?z(S.flexSearchCriteria.searchRange,i):void 0,J=null!==(p=null===(m=null==S?void 0:S.flexSearchCriteria)||void 0===m?void 0:m.flexibleSearchRequirement)&&void 0!==p?p:void 0,$={},Z=x!==q,ee=[...Object.values(T.tI),...Object.values(T.AI)],te=null===(v=n.searchCriteria)||void 0===v?void 0:v.categorySearch;(0,R.d)(r)?(Z&&($.neighborhood_group=void 0),$.amenities=U(n,null==k?void 0:k.selections),$.house_rules_group=j(n,null==k?void 0:k.selections)):Z&&("true"!==K&&($.lodging=void 0),$.neighborhood=void 0,$.poi=void 0,$.hotelName=void 0,$.amenities=void 0,$.price=void 0,$.star=void 0,$.accessibility=void 0,$.mealPlan=void 0,$.paymentType=void 0,$.travelerType=void 0,$.rewards=void 0,$.guestRating=void 0,$.hotel_brand=void 0,$.stay_options_group=void 0,$.multi_neighborhood_group=void 0,$.bedroomFilter=void 0);const ae=null!==(g=null===(E=null==k?void 0:k.selections)||void 0===E?void 0:E.reduce(((e,t)=>"array"===Y[t.id]?Object.assign(Object.assign({},e),{[t.id]:[t.value]}):"value"===Y[t.id]?Object.assign(Object.assign({},e),{[t.id]:t.value}):e),{}))&&void 0!==g?g:{};I&&($.regionId=null),L===F&&w===W||0===(null===(y=null===(h=null==l?void 0:l.exposures)||void 0===h?void 0:h.Vrbex_NEW_Price_withTextEntry)||void 0===y?void 0:y.bucket)&&($.total_price=void 0),1===(null===(f=null===(b=null==l?void 0:l.exposures)||void 0===b?void 0:b.Vrbo_filter_persistence_on_destination_change)||void 0===f?void 0:f.bucket)&&Z&&B.forEach(((e,t)=>{ee.includes(t)&&("house_rules_group"===t?$.house_rules_group="pets_allowed"===e?["pets_allowed"]:$.house_rules_group.filter((e=>"pets_allowed"===e)):$[t]=void 0)})),te&&($.categorySearch=H(n,l));const ne=Object.assign(Object.assign({adults:D,children:A,destination:_,endDate:w,flexibility:Q,flexibleSearchRequirement:J,latLong:N,mapBounds:"",pwaDialog:null,regionId:x,searchRange:X,selected:I,startDate:L},$),ae);setTimeout((()=>o.withPublishingAnalyticsPayload(c.updateSearch,s,l)({location:t,history:a,newParams:ne,replace:!1})),25)})(t,a,l,u,v,m,i,E,s))},showDatePicker:g,toggleDatePicker:h,autoOpenPlayback:X&&K||Z,includePlayback:!0,dateFieldInitialFocus:!1,queryParamLatLong:D,alternateDestination:ee,redirectToSearchResultOnSubmit:!1,autoSubmitOnFieldChange:!0,queryParamDaysInFuture:N,queryParamStayLength:q,queryRooms:[]};return n.createElement(d.ErrorBoundary,{label:"hotel.search.universal-search-form"},X&&K?n.createElement(I.Experiment,{name:"Highlight_dates_field_for_SEM_and_META_users_landing_on_mWeb_SRP",logExposure:!0},n.createElement(I.ExperimentControl,null,n.createElement(O.Y,Object.assign({},le))),n.createElement(I.ExperimentVariant,{bucket:1},n.createElement(O.Y,Object.assign({},le,{dateFieldInitialFocus:!0})))):n.createElement(O.Y,Object.assign({},le)))};q.displayName="SharedUiUniversalSearchFormWrapper";var K=a(58439);const Q=(0,n.createContext)({isFirstAdOnTop:!0,handleScroll:()=>{throw new Error("The handleScroll function is used out of the context provider!")},adLoadState:{r1:void 0,r2:void 0},setAdLoadState:()=>{throw new Error("The setAdLoadState function is used out of the context provider!")}}),X=({children:e})=>{const[t,a]=n.useState(!0),[r,l]=n.useState({r1:void 0,r2:void 0}),i=n.useCallback((e=>{const n=e.target.scrollTop;n<450&&!t?a(!0):n>500&&t&&a(!1)}),[t]);return n.createElement(Q.Provider,{value:{isFirstAdOnTop:t,handleScroll:i,adLoadState:r,setAdLoadState:l}},e)};var J=a(18533),$=a(15017),Z=a(50806),ee=a(71173),te=a(92061),ae=a(79900),ne=a(99839),re=a(38109),le=a(95263),ie=a(93648),oe=function(e,t,a,n){return new(a||(a=Promise))((function(r,l){function i(e){try{s(n.next(e))}catch(t){l(t)}}function o(e){try{s(n.throw(e))}catch(t){l(t)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,o)}s((n=n.apply(e,t||[])).next())}))};const se=(e,t,a,r)=>n.useCallback((()=>oe(void 0,void 0,void 0,(function*(){var n;e((e=>!e));const l=null===(n=t.current)||void 0===n?void 0:n.listFeatures();if(l&&(null==l?void 0:l.length)){yield(i=500,new Promise((e=>setTimeout(e,i))));const e=t.current;if(e&&a){const t=a;if(t.sw&&t.ne)yield e.fitBounds(t.sw,t.ne,void 0,r);else{const t=a;yield e.fitLatLongs(t,void 0,r)}}}var i}))),[a,e,r,t]);var ce=a(85961),ue=a(81810);const de=e=>{const[t,a]=n.useState(null);return n.useEffect((()=>{if(!(null==t?void 0:t.ref))return;const e=t.ref,a=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(0,ce.be)()}))}),{rootMargin:"-200px"});return a.observe(e),()=>a.unobserve(e)}),[t]),n.createElement(ue.H,Object.assign({ref:e=>(a(e),e)},e))};var me=a(86852),pe=a(14030),ve=a(36364),Ee=a(42793),ge=a(7611);const he=n.memo((({isEnabled:e})=>n.createElement(Ee.E,Object.assign({},ge.DC.SIDERAIL_R1,{adSwapEnabled:!0,isEnabled:e})))),ye=n.memo((({isEnabled:e})=>n.createElement(Ee.E,Object.assign({},ge.DC.SIDERAIL_R2,{adSwapEnabled:!0,isEnabled:e})))),be=()=>{const{isFirstAdOnTop:e,adLoadState:t}=n.useContext(Q),a={display:e&&t.r1||!t.r2?"block":"none"},r={display:!t.r2||e&&!1!==t.r1?"none":"block"};return n.createElement("div",{"data-stid":"ads-by-swapping"},n.createElement("div",{style:a},n.createElement(he,{isEnabled:!0})),n.createElement("div",{style:r},n.createElement(ye,{isEnabled:!e||!1===t.r1})))},fe="mesoRender",Se=(0,ve.Ry)({code:(0,ve.Z_)(),uci:(0,ve.Z_)()}),ke=n.memo((()=>n.createElement(Ee.E,Object.assign({},ge.DC.SIDERAIL_R1)))),_e=n.memo((()=>n.createElement(Ee.E,Object.assign({},ge.DC.SIDERAIL_R2)))),Re=n.memo((({isBEXGSplitViewExperimentEnabled:e})=>{const{advertising:t}=(0,w.m)(),[a,r,l]=(0,J.F)("meso-display-ad-R1","meso-display-ad-R2","ad-parent-div"),{adLoadState:i,setAdLoadState:o}=n.useContext(Q),[s,c]=n.useState(!0);return n.useEffect((()=>{const n=(e,t)=>{const a=(0,ve.As)(Se,e.detail);if(a.success&&a.output.uci.includes(t)){const e=a.output.code;o(Object.assign(Object.assign({},i),{[t.toLowerCase()]:"AD-LOAD-PASS"===e}))}else o(Object.assign(Object.assign({},i),{[t.toLowerCase()]:!1}))},u=(e,a)=>{t.canTrack&&(null==e?void 0:e.current)&&e.current.addEventListener("mesoAd",a)},d=(e,a)=>{t.canTrack&&(null==e?void 0:e.current)&&e.current.removeEventListener("mesoAd",a)},m=e=>n(e,"R1");a&&u(a,m);const p=e=>n(e,"R2");r&&u(r,p);const v=e=>{var t;const a=Object.keys(null===(t=null==e?void 0:e.detail)||void 0===t?void 0:t.content["MESO-DISPLAY-AD"]).some((e=>["R1","R2"].includes(e)));c(a)};return window.addEventListener(fe,v),(()=>{const a=s&&t.canTrack,n=!1!==i.r1||e&&!1!==i.r2;var r;if(!a||!n)return(()=>{var e;null===(e=null==l?void 0:l.current)||void 0===e||e.setAttribute("hidden","")})();null===(r=null==l?void 0:l.current)||void 0===r||r.removeAttribute("hidden")})(),()=>{d(a,m),d(r,p),window.removeEventListener(fe,v)}}),[i,l,t.canTrack,e,s,a,r,o]),e?n.createElement(be,null):n.createElement(n.Fragment,null,n.createElement(ke,null),n.createElement(_e,null))}));Re.displayName="MesoDynamicSideRail";var xe=a(10051),Pe=a(84502),Ie=a(8684),Ce=a(65407),Le=a(49970);const Te=(e,t,a,n,r,l)=>{a&&"function"==typeof a.trackEvent&&a.trackEvent(e,t,null,null,!0),n&&(n.shouldFetch=!0),(0,c.updateSearch)({history:r,location:l,newParams:{}})};var we=a(42898);const Oe=(0,o.inject)("searchResults","analytics")((({searchResults:e,analytics:t})=>{const a=null==e?void 0:e.errorResponse,l=null==e?void 0:e.dialogErrorResponse,i=(0,r.useHistory)(),o=(0,r.useLocation)(),s=a=>((e,t,a,n,r)=>{if((e=>{var t;return(null==e?void 0:e.analytics)&&(null===(t=e.resource)||void 0===t?void 0:t.relativePath)})(e)){const a=e,{referrerId:n}=a.analytics,r="MultiItem Error",l=a.resource.relativePath;t&&"function"==typeof t.trackEvent&&t.trackEvent(n,r,null,null,!0),window.location.replace(l)}else Te(":errorOnSearch","MultiItem Retry Search",t,a,n,r)})(a,t,e,i,o);return l?n.createElement(Ne,{dialogErrorResponse:l,onClickHandler:s}):a?n.createElement(De,{errorResponse:a,onClickHandler:s}):n.createElement(Ae,{retryHandler:()=>Te(":errorOnSearch","MultiItem Retry Search",t,e,i,o)})})),De=({errorResponse:e,onClickHandler:t})=>{var a;const r=(null===(a=e.errorRecoveryButtons)||void 0===a?void 0:a.length)?n.createElement(Ce.a,null,e.errorRecoveryButtons.map(((e,a)=>{var r;return n.createElement(Ie.E,{key:null!==(r=e.primary)&&void 0!==r?r:a,name:"textonly",onClick:()=>t(e.action),type:"button"},e.primary)}))):null,l=n.createElement(Ce.a,null,n.createElement(Ie.E,{name:"textonly",onClick:()=>t(e.button.action),type:"button"},e.button.primary));return n.createElement(S.b,{padding:{blockstart:"three"}},n.createElement("div",null,n.createElement(Ce.E,{"data-stid":"multi-item-error-actions"},n.createElement(E.a,{name:"search"}),n.createElement(Le.E,{tag:"h2"},e.header),n.createElement(Le.c,{size:300,theme:"default"},e.body),r,l)))},Ae=({retryHandler:e})=>{const{formatText:t}=(0,C.useLocalization)();return n.createElement(S.b,{padding:{blockstart:"three"}},n.createElement("div",null,n.createElement(Ce.E,{"data-stid":"multi-item-generic-error"},n.createElement(E.a,{name:"search"}),n.createElement(Le.E,{tag:"h2"},t("multiItem.searchResults.error.text")),n.createElement(Le.c,{size:300,theme:"default"},t("multiItem.searchResults.tryAgain.text")),n.createElement(Ce.a,null,n.createElement(Ie.E,{name:"textonly",onClick:e,type:"button"},t("multiItem.searchResults.retryButton.label"))))))},Ne=({dialogErrorResponse:e,onClickHandler:t})=>{const{body:a,button:{action:r,primary:l}}=e,i={onClick:()=>t(r),text:null!=l?l:"",type:"tertiary"};return n.createElement(d.Layer,{id:"dialog-Error-Response-Layer"},n.createElement(we.a,{dialogShow:!0,returnFocusOnClose:!0},n.createElement(we.b,null,n.createElement(Le.a,{size:2},a),n.createElement(we.c,{buttonOne:i}))))},Me=(0,o.inject)("searchResults","analytics")((({searchResults:e,analytics:t})=>{const{formatText:a}=(0,C.useLocalization)(),l=(0,r.useHistory)(),i=(0,r.useLocation)(),o=null==e?void 0:e.isError,s=null==e?void 0:e.searchCriteria,{misId:c}=s||{};if(!o)return null;if(c)return n.createElement(S.b,{padding:{blockstart:"six",blockend:"twelve"}},n.createElement("div",null,n.createElement(Le.c,{align:"center"},n.createElement(Oe,{searchResults:e,analytics:t}))));const u=a("hotels.searchResults.error.text"),d=o?a("hotels.searchResults.error.cta"):"";return n.createElement(S.b,{padding:{blockend:"twelve"}},n.createElement("div",{"data-stid":"empty-state-error"},n.createElement(Le.c,{align:"center"},n.createElement(S.b,{padding:{blockstart:"three"}},n.createElement(Ce.E,{"data-stid":"retry-search"},n.createElement(E.a,{name:"error"}),n.createElement(Le.E,{tag:"h2"},u),n.createElement(Ce.a,null,n.createElement(Ie.E,{name:"textonly",onClick:()=>Te(":errorOnSearch","Try Again on error",t,e,l,i),type:"button"},d)))))))}));var Be=a(36050),Fe=a(72430),je=a(69870);const He={small:3,medium:4,large:4,extraLarge:4,defaultInViewport:4},Ue=e=>{const{inputs:t,pageContext:a,itemsVisibleForTracking:r=He,skipSsr:l=!1}=e,i=null==t?void 0:t.collectionId,{context:o,propertySearch:s}=a||{};if(!o||!(null==s?void 0:s.regionId)||!i)return null;const c=(0,je.R)(o,s);return n.createElement(ue.H,{placeholder:n.createElement(n.Fragment,null)},n.createElement(Fe.G,{inputs:{collectionId:i,pageContext:{propertySearch:c}},showPlaceholder:!1,itemsVisibleForTracking:r,skipSsr:l}))};Ue.displayName="IncentivesCollectionCarouselWrapper";var Ve=a(53199),Ge=a(48570);const ze=(0,o.inject)("context","multiItem","experiment","searchCriteria","searchResults","analyticsSearch","pageLayout")((0,o.observer)((({context:e,multiItem:t,searchCriteria:a,searchResults:r,analyticsSearch:l})=>{if(!e||!a||!r||!l||r.isLoading)return null;const i=null==t?void 0:t.isPackageShoppingPath();return n.createElement(n.Fragment,null,i&&n.createElement("div",{"data-stid":"package-product-card"},n.createElement(Ge.wW,{data:r})))})));ze.displayName="PackageProductCard";var We=a(61438),Ye=a(15978),qe=a(87516),Ke=a(2855),Qe=a(44408),Xe=a(19046),Je=a(57321);const $e=n.memo((e=>n.createElement("div",{"data-stid":"shopping-pwa-managed-banner-wrapper"},n.createElement(Je.l,{skipSsr:!0,inputs:{contentTopic:e.contentTopic},fixedLayoutSettings:e.fixedWidthLayout}))));var Ze=a(90902),et=a(15954),tt=a(83028),at=a(49006),nt=a(43746);const rt=e=>{if("Tab"===e.key&&!e.shiftKey){const e=document.getElementById("map-focus-holder-entry");e&&e.focus()}},lt=(0,et.ClickTracker)(tt.E),it=({onPrevPage:e,onNextPage:t,pagingPrevButton:a,pagingNextButton:r,isLoading:l,paginationLabel:i})=>{var o,s,c,u,m,p,v,h,y,b,f,k;return n.createElement(d.ErrorBoundary,{label:"hotel.search.paginationNavigationButtons"},n.createElement(g.i,{"data-stid":"pagination-navigation",direction:"column",justifyContent:"center",alignItems:"center"},n.createElement(S.b,{margin:{blockend:"four"}},n.createElement(g.i,{space:"six",alignItems:"center",justifyContent:"center"},n.createElement(S.b,{margin:{inlineend:"four"}},n.createElement(lt,{type:"button","data-stid":"previous-button","aria-label":null!==(o=null==a?void 0:a.accessibility)&&void 0!==o?o:"",size:at.E.MEDIUM,disabled:!a||l||null!==(s=null==a?void 0:a.disabled)&&void 0!==s&&s,onClick:e,rfrr:null!==(u=null===(c=null==a?void 0:a.analytics)||void 0===c?void 0:c.referrerId)&&void 0!==u?u:"",linkName:null!==(p=null===(m=null==a?void 0:a.analytics)||void 0===m?void 0:m.linkName)&&void 0!==p?p:""},n.createElement(E.a,{name:"chevron_left"}))),l?n.createElement(g.j,{minWidth:12,shrink:0},n.createElement(nt.b,{type:"secondary"})):i&&n.createElement(Le.c,{size:300,weight:"regular"},i),n.createElement(S.b,{margin:{inlinestart:"four"}},n.createElement(lt,{type:"button","data-stid":"next-button","aria-label":null!==(v=null==r?void 0:r.accessibility)&&void 0!==v?v:"",size:at.E.MEDIUM,disabled:!r||l||null!==(h=null==r?void 0:r.disabled)&&void 0!==h&&h,onKeyDown:rt,onClick:t,rfrr:null!==(b=null===(y=null==r?void 0:r.analytics)||void 0===y?void 0:y.referrerId)&&void 0!==b?b:"",linkName:null!==(k=null===(f=null==r?void 0:r.analytics)||void 0===f?void 0:f.linkName)&&void 0!==k?k:""},n.createElement(E.a,{name:"chevron_right"}))))),n.createElement(Le.c,{size:100,weight:"regular"})))};it.displayName="PaginationNavigation";var ot=a(82662);const st=(0,et.ClickTracker)(ot.E),ct=({onNextSubset:e,isLoading:t,rfrr:a,linkName:r})=>n.createElement(d.ErrorBoundary,{label:"hotel.search.showMoreResultsButton"},n.createElement(S.b,{padding:{blockstart:"three"}},n.createElement(g.i,{justifyContent:"center",tag:"section"},n.createElement(st,{disabled:t,"data-stid":"show-more-results",onClick:e,rfrr:a,linkName:r},n.createElement(C.LocalizedText,{message:"hotels.searchResults.paginationButton.label"})))));var ut=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const dt=(0,o.inject)("searchResults")((0,o.observer)((({searchResults:e,handleNext:t,handlePrev:a})=>{var r,l,i,o,s,c;const{context:u,experiment:d,pageLayout:m}=(0,w.m)();if(!u||!d||!(null===(r=null==e?void 0:e.pagination)||void 0===r?void 0:r.trigger))return null;const p=e.pagination.trigger,{__typename:v}=p,E=ut(p,["__typename"]),{isPaginationLoading:g}=e;switch(v){case"LodgingPaginationNavigationButtons":return e.isTotalPropertyCountLessThanInitialListingFetchCount(u,d,m)?null:n.createElement(it,{isLoading:g,onNextPage:t,onPrevPage:a,paginationLabel:null!==(l=e.pagination.paginationLabel)&&void 0!==l?l:"",pagingNextButton:null==E?void 0:E.nextButton,pagingPrevButton:null==E?void 0:E.previousButton});case"UIPrimaryButton":return e.thereAreMoreListingsToFetch?n.createElement(ct,{isLoading:g,linkName:null!==(o=null===(i=null==E?void 0:E.analytics)||void 0===i?void 0:i.linkName)&&void 0!==o?o:"",rfrr:null!==(c=null===(s=null==E?void 0:E.analytics)||void 0===s?void 0:s.referrerId)&&void 0!==c?c:"",onNextSubset:t}):null;default:return null}}))),mt=({searchInputs:e,criteriaChanged:t,searchResults:a})=>{const[r,l]=(0,n.useState)(e);(0,n.useEffect)((()=>{t&&l(e)}),[t]);const i={summary:{resultMessages:null==a?void 0:a.resultMessages}};return n.createElement(Ge.tt,{inputs:r,propertySearchListingsPwa:null==a?void 0:a.propertySearchListings,data:i})};mt.displayName="ResultsMessagingModuleSharedUiWrapper";var pt=a(89956);const vt=(0,o.inject)("searchResults")((0,o.observer)((({searchResults:e})=>{if(!(null==e?void 0:e.priceDisplayChangeOnboardingAction)||!(null==e?void 0:e.shoppingJoinListContainer)||!(null==e?void 0:e.contents))return null;const t={summary:{priceDisplayChangeOnboardingAction:e.priceDisplayChangeOnboardingAction,shoppingJoinListContainer:e.shoppingJoinListContainer,shoppingInvokeFunctionParams:e.shoppingInvokeFunctionParams,contents:e.contents}};return n.createElement(Ge.li,{data:t})})));vt.displayName="PriceDisplayChangeOnboardingSharedUiWrapper";var Et=a(45550),gt=a(14761),ht=a(63188),yt=a(46265),bt=a(82913),ft=a(27247),St=a(4007),kt=a(13498),_t=a(31158),Rt=a(10626),xt=a(91733);var Pt=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const It=({searchInputs:e,criteriaChanged:t,handleNext:a,handlePrev:l})=>{const{context:i,analytics:o,uiPage:s,currentHotel:u,searchCriteria:d,multiItem:m,searchResults:p,experiment:v,analyticsSearch:E,pageLayout:h}=(0,w.m)(),{formatText:y}=(0,C.useLocalization)(),[b,f]=(0,n.useState)(e),{getTargets:S}=(0,L.xK)(),{SearchForm:k}=S(["SearchForm"]),_=(0,r.useLocation)(),P=(0,r.useHistory)(),{setHighlightedPropertyId:T}=(0,bt.KJ)(),{exposure:O}=(0,I.useExperiment)("Akamai_smart_cropping_for_PDP_image_gallery"),{exposure:D}=(0,I.useExperiment)("mWeb_larger_image_for_top_of_PDP_gallery"),{exposure:A,logExperiment:N}=(0,I.useExperiment)("Preload_hero_image_on_SRP_card_hover"),{exposure:M}=(0,I.useExperiment)("PropertyDetailsQuery_CSR"),[B,F]=(0,n.useState)(""),j=(null==h?void 0:h.templateName)===ft.Pb.SplitView,H=!(null==m?void 0:m.isPackageShoppingPath()),{appendPropertyNameUrlParam:U}=(()=>{const e=(0,n.useCallback)(((e,t)=>{var a;const[n,r]=e.split("?"),l=new URLSearchParams(r),i=null===(a=t.headingSection)||void 0===a?void 0:a.heading;return i&&l.append("propertyName",i),`${n}?${l.toString()}`}),[]);return{appendPropertyNameUrlParam:e}})(),V=(0,te.m_)();(0,n.useEffect)((()=>{var e,t,a,n;const r=null!==(t=null===(e=null==p?void 0:p.clickstreamEvents)||void 0===e?void 0:e.additionalEvents)&&void 0!==t?t:[];if(r.length){const e=r.find((e=>{var t,a;try{return Object.hasOwn(null!==(a=null===(t=JSON.parse(e))||void 0===t?void 0:t.events)&&void 0!==a?a:{},yt.bS)}catch(n){return!1}}));if(e){const t=null===(n=null===(a=JSON.parse(e).events[yt.bS])||void 0===a?void 0:a.v1)||void 0===n?void 0:n.event_data;null!=t&&V(t)}}}),[null==p?void 0:p.clickstreamEvents]),(0,n.useEffect)((()=>{t&&f(e)}),[t]);const z=(null==m?void 0:m.multiItemContext)||null,W=function({searchResults:e,analytics:t,context:a,multiItem:r,uiPage:l,experiment:i,analyticsSearch:o,pageLayout:s}){const c=e.isFetchSecondaryListingBatch(a,i,s);return(0,n.useEffect)((()=>{if(c&&!e.isLoading&&!e.isSecondaryFetchDisabled&&t&&r&&l&&o){const n=e.getSecondaryListingFetchCount(a,i,s),c=e.getInitialListingFetchCount(a,i,s);e.showItemsByPage(t,a,r,l,{size:n,startingIndex:c},o,i,s,!1,!0)}}),[c,t,o,a,i,R.d,r,e,l,s]),c&&e.isPaginationLoading&&!(0,R.d)(a)}({searchResults:p,context:i,multiItem:m,uiPage:s,analytics:o,experiment:v,analyticsSearch:E,pageLayout:h}),Y=e=>(0,We.sC)(e,o,P),q=n.useCallback((()=>{null==s||s.dispatchOpenNewDatePickerEvent()}),[s]),K=n.useCallback((e=>{var t,a;let n="string"==typeof d.flexibility?[d.flexibility]:d.flexibility;n&&(n=[...n]);const r=G(e);if(!(0,Et.isEqual)(n,r)){null===(t=null==k?void 0:k.current)||void 0===t||t.focus(),null===(a=null==k?void 0:k.current)||void 0===a||a.scrollIntoView({behavior:"smooth"});const e=new URLSearchParams;r.forEach((t=>e.append("flexibility",t))),(0,c.updateSearch)({location:_,history:P,newParams:e.toString()})}}),[P,_,d.flexibility,k]),Q=p.isLoading||p.isPaginationLoading,X=y("hotels.searchResults.resultsLoading.liveAnnounce"),$=y("hotels.searchResults.errorRetrievingResults.liveAnnounce"),Z=y("hotels.searchResults.resultsUpdated.liveAnnounce"),ee=Boolean(new URLSearchParams(_.search).get("selected")),{exposure:ae,logExperiment:ne}=(0,I.useExperiment)("Enable_hover_state_for_BEX_HCOM_pinned_SRP"),{exposure:re}=(0,I.useExperiment)("Carousel_gallery_pagination_dots_on_pinned_SRP",ee);ne(ae);const le=ee&&1===ae.bucket,ie=!(0,St.ic)(i)&&((0,R.d)(i)||le),oe=!(0,St.ic)(i)&&ee&&1===re.bucket,se=e=>(0,We.ir)(e,P),ce=n.useMemo((()=>{if(H)return{inputs:b,listingAnnouncementMessages:{loadMessage:X,errorMessage:$,updateMessage:Z},data:{propertySearchListings:p.propertySearchListings,shoppingSearchListingHeader:p.shoppingSearchListingHeader,pagination:p.pagination,summary:{resultMessages:p.resultMessages,resultsHeading:p.resultsHeading,loyaltyInfo:p.loyaltyMessagingModel,shoppingJoinListContainer:p.shoppingJoinListContainer,header:p.header},mapTrigger:p.mapTrigger,errorResponse:p.errorResponse,dialogErrorResponse:p.dialogErrorResponse,criteria:p.searchCriteria,propertyListingsToast:p.propertyListingToast,propertyListingAdaptexAnalyticsSuccessEvents:p.propertyListingAdaptexAnalyticsSuccessEvents},isLoadingPwa:Q,propertySearchListingsPwa:p.propertySearchListings,locationFieldUpdateSignalType:qe.fr.LOCATION_FIELD_UPDATE,onFilterPillRemoval:se,onRemoveAllFilters:Y,clickstreamEvents:p.clickstreamEvents};const e=(0,Xe.pu)(i,E,p.searchCriteria,z,void 0,void 0,void 0,h),{context:t}=e,a=Pt(e,["context"]);return{data:p.header&&{summary:{header:p.header}},inputs:a,isLoadingPwa:Q,propertyListingToast:p.propertyListingToast,propertySearchListingAdaptexAnalyticsEvents:p.propertyListingAdaptexAnalyticsSuccessEvents,propertySearchListingsPwa:p.propertySearchListings}}),[i,b,z,p.isLoading,p.isPaginationLoading,p.propertyListingToast,p.propertyListingAdaptexAnalyticsSuccessEvents,p.propertySearchListings,p.searchCriteria,H,null==h?void 0:h.productCardAdaptiveViewType]),[ue]=(0,J.F)("searchResultsList"),de=n.useCallback((e=>{null==u||u.setPropertyListingAsCurrentHotel(e),(null==p?void 0:p.searchCriteria)&&(null==u||u.updateSearchCriteria(p.searchCriteria));const t={isMobile:(0,St.tq)(i),isTablet:(0,St.Em)(i)},a=O.bucket,n=D.bucket,r=M.bucket;0===A.bucket&&(0,xt.al)(e,t,a,n,r)}),[u,i,O.bucket,D.bucket,A.bucket]),me=n.useCallback((e=>{E.withPublishingAnalyticsPayload(c.updateSearch,o,v)({history:P,location:_,newParams:(0,kt.QT)(e,_),replace:!1});const t=document.getElementsByClassName("scrollable-result-section")[0];t?t.scrollTo(0,0):(0,_t.V)({scrollTo:0})}),[P,_,c.updateSearch,o,E,v,kt.QT,_t.V]),pe=n.useCallback(((e,t)=>{var a;if(j){const n=null!==(a=null==t?void 0:t.id)&&void 0!==a?a:"";T(e?n:"")}const n={isMobile:(0,St.tq)(i),isTablet:(0,St.Em)(i)},r=O.bucket,l=D.bucket,o=M.bucket;N(A),1===A.bucket&&e&&(0,xt.al)(t,n,r,l,o)}),[T]),ve=n.useCallback((e=>{if(j)return d.paginationSubSets=e}),[d]),Ee=n.useCallback((e=>{d.pageTitle=e}),[]);(0,ht.liveAnnounce)(B,ht.Level.POLITE),(0,n.useEffect)((()=>{H||F(Q?X:Z)}),[Q,X,Z,H]);const ge=n.useCallback((()=>{(0,x.DI)(!0)}),[x.DI]);return i&&d&&(null==p?void 0:p.searchCriteria)&&E&&v?n.createElement(n.Fragment,null,n.createElement(Rt.A,{topHeadingLevel:3},n.createElement(Lt,Object.assign({},ce,{openDatePicker:q,onClickCallback:de,onHoverChanged:pe,appendAdditionalQueryParamCb:U,onPaginationCallback:ve,onDestinationCallback:Ee,shouldScrollToTopOnSearch:j&&!p.isScrollToTopOnSearchDisabled,scrollToTopRef:ue,changeFlexibility:K,shouldChangeCardDisplayOnHover:ie,onBannerDismiss:ge,hideCompressionMessage:(0,x.Kw)(),onPaginationNext:a,onPaginationPrev:l,showPagination:H,showLoadingSpinner:H&&W,showListingToast:!0,onImageCardClickCallback:me,showCarouselDots:oe}))),!H&&W&&n.createElement(g.i,{justifyContent:"center"},n.createElement(g.j,null,n.createElement(gt.E,null)))):null};It.displayName="PropertyListingWrapper";const Ct=(0,o.observer)(It),Lt=n.memo(Ge.E0),Tt=(e,t,a,n,r,l,i,o,s)=>{var c,u;"LodgingPaginationNavigationButtons"===(null===(u=null===(c=null==t?void 0:t.pagination)||void 0===c?void 0:c.trigger)||void 0===u?void 0:u.__typename)&&window.scrollTo(0,0),document&&CustomEvent&&"function"==typeof document.dispatchEvent&&document.dispatchEvent(new CustomEvent("mesoTriggeredRefresh",{detail:{type:"impressionRefresh"}})),t&&a&&n&&r&&o&&l&&i&&("PREV_PAGE"===e?t.showPreviousPage(a,n,r,o,i,l,s):t.showNextPage(a,n,r,o,i,l,s))},wt=()=>{var e,t,a,l,i,o,s,c,u,d,m,p,v,E;const{context:g,analytics:h,uiPage:y,searchCriteria:b,multiItem:f,searchResults:k,experiment:_,analyticsSearch:R,pageLayout:x}=(0,w.m)(),P=(0,le.IJ)(),C=(0,r.useLocation)(),L=n.useRef(new URLSearchParams(C.search).get("destination")),[T,O]=n.useState(!1),A=!(null==f?void 0:f.isPackageShoppingPath()),{exposure:N}=(0,I.useExperiment)("Web_banners_on_pinned_SRP"),{publishSignal:M}=(0,Qe.s0)();(0,Ye._9)("TRIP_TOAST",Ke.rF,{onSuccess(e){"DISMISS"===e.payload.state&&"TRIP_ITEM_SAVED"===e.payload.usage&&O(!0)}}),n.useEffect((()=>{const e=new URLSearchParams(C.search).get("destination");e&&e!==L.current&&(L.current=e,M({type:qe.fr.LOCATION_FIELD_UPDATE,payload:{locationValue:e}}))}),[C.search,M]);const B=n.useCallback((()=>{Tt("NEXT_PAGE",k,h,g,f,_,R,y,x)}),[h,g,_,f,k,y,R,x,Tt]),F=n.useCallback((()=>{Tt("PREV_PAGE",k,h,g,f,_,R,y,x)}),[h,g,_,f,k,y,R,x,Tt]),j=A&&P?(0,Xe.M5)(P,g,R,C,x,b,_):void 0,H=A&&(0,Xe.or)(g,b,k),{exposure:U}=(0,I.useExperiment)("Loyalty_Banner_Test");if(!(g&&b&&k&&R))return null;const V=Boolean(0===U.bucket),G={margin:{block:"two"}},z=Boolean(new URLSearchParams(C.search).get("selected")),W=!(null==f?void 0:f.isPackageShoppingPath())&&z&&1===N.bucket,Y=null===(e=null==g?void 0:g.deviceInformation)||void 0===e?void 0:e.type,q=Y!==D.Yii.MOBILE_TABLET&&Y!==D.Yii.MOBILE_PHONE,K=(null===(t=null==g?void 0:g.user)||void 0===t?void 0:t.authState)===D.zGj.ANONYMOUS,Q=null!==(i=null===(l=null===(a=null==_?void 0:_.exposures)||void 0===a?void 0:a.BEX_mweb_PTP_inline_MAD_LSR_main_Gate)||void 0===l?void 0:l.bucket)&&void 0!==i?i:0,X=null!==(c=null===(s=null===(o=null==_?void 0:_.exposures)||void 0===o?void 0:o.BEX_mWeb_LSRP_inline_MAD_US)||void 0===s?void 0:s.bucket)&&void 0!==c?c:0,J=(null!==(m=null===(d=null===(u=null==_?void 0:_.exposures)||void 0===u?void 0:u.Web_Managed_Banner_Above_Search_Results_Toggle)||void 0===d?void 0:d.bucket)&&void 0!==m?m:0)>0,$=(null===(p=null==g?void 0:g.user)||void 0===p?void 0:p.authState)!==D.zGj.AUTHENTICATED,Z=(0,We.Vf)(k),ee=(X>0||Q>0)&&K&&!q&&!Z,te=J&&$&&!W&&!ee&&!Z,ne=V&&!W&&!J&&!ee&&!Z;return n.createElement("div",{"data-stid":"section-results"},T&&n.createElement("div",{"data-stid":"mad-banner"},n.createElement(pt.t,{location:ae.OD.POPUP})),te&&n.createElement($e,{contentTopic:"signin-banner_above-search-results"}),ee&&n.createElement(pt.t,{location:ae.OD.IN_PAGE,spacingProps:G}),ne&&n.createElement(Ze.v,{analyticsSearch:R,experiment:_,analytics:h}),n.createElement(S.b,Object.assign({},G),n.createElement("div",null,A?n.createElement(mt,{searchInputs:j,criteriaChanged:H,searchResults:k}):n.createElement(Ge.q2,{text:null===(E=null===(v=k.messagingModule)||void 0===v?void 0:v.header)||void 0===E?void 0:E.text}))),n.createElement(vt,null),n.createElement(Ct,{searchInputs:j,criteriaChanged:H,handleNext:B,handlePrev:F}),A?n.createElement(n.Fragment,null):n.createElement(dt,{handleNext:B,handlePrev:F}))};wt.displayName="PropertySearchListings";const Ot=(0,o.observer)(wt),Dt=(0,o.inject)("searchResults")((0,o.observer)((({searchResults:e,errorMessage:t,similarDestinationProps:a})=>{var r,l;const i=null!==(l=(null!==(r=null==e?void 0:e.resultsHeading)&&void 0!==r?r:"").split("|")[1])&&void 0!==l?l:"";return n.createElement(n.Fragment,null,n.createElement(ze,null),!(null==e?void 0:e.header)&&n.createElement("h2",{className:"is-visually-hidden"},i||n.createElement(C.LocalizedText,{message:"hotels.search.results.heading"})),n.createElement(Ot,null),n.createElement("div",{id:"post-map-focus-footer",role:"button",onKeyDown:e=>{if(e.shiftKey&&"Tab"===e.key){const e=document.getElementById("map-focus-holder-exit");e&&e.focus()}},tabIndex:0,"aria-label":"Footer"}),t,a&&n.createElement(Ue,Object.assign({},a)),n.createElement(Ve.y,null),n.createElement(d.ErrorBoundary,{label:"voice-of-the-customer"},n.createElement(S.b,{margin:{medium:{blockstart:"six"}}},n.createElement("div",{"data-stid":"shared-ui-voice-of-the-customer"},n.createElement(Be._,{inputs:{}})))))}))),At=(0,o.inject)("searchResults","context","uiPage","multiItem")((0,o.observer)((({searchResults:e,context:t,uiPage:a,multiItem:r})=>{if(!a||!e)return null;const{searchCriteria:l}=e,i=(null==r?void 0:r.isPackageShoppingPath())?null:{inputs:{collectionId:"similar_destinations"},pageContext:{propertySearch:l,context:t}};return n.createElement(Dt,{errorMessage:(null==r?void 0:r.isPackageShoppingPath())?n.createElement(Me,null):n.createElement(n.Fragment,null),similarDestinationProps:i})})));var Nt=a(86291),Mt=a(40333);const Bt="expand-map-button",Ft=()=>{const{formatText:e}=(0,C.useLocalization)(),t=(0,ie.uQ)(ee.N);if(!(t===ie.Cu.EXTRA_LARGE||t===ie.Cu.LARGE))return null;const a=[{attributes:{role:"menuitem",tabindex:0},className:"uitk-list-item",href:`#${Bt}`,label:e("hotels.searchResults.skipToMap")||"Skip to map",typeAnchor:!0}];return n.createElement("div",{"data-stid":"split-view-map-skip-link"},n.createElement(y.d,{type:"relative"},n.createElement(Mt.E,{items:a})))};var jt=a(74344),Ht=a(73232),Ut=a(8537);const Vt=()=>{const{context:e,experiment:t,pageLayout:a,searchCriteria:l,searchResults:i,analyticsSearch:o}=(0,w.m)(),s=(0,le.IJ)(),c=(0,r.useLocation)();if(!(e&&l&&i&&o))return null;const u=s?(0,Xe.M5)(s,e,o,c,a,l,t):void 0,d=(0,Xe.or)(e,l,i);return n.createElement(Ut.e,{analyticsSearch:o,searchInputs:u,searchResults:i,criteriaChanged:d,skeletonLayout:[Ge.PA.Secondary]})};Vt.displayName="ResultsSubHeader";const Gt=(0,o.inject)("searchResults")((({searchResults:e})=>{const{exposure:t}=(0,I.useExperiment)("SRP_Grid_view_web",!1),a=(0,ie.uQ)(ee.N);if(!e)return null;const{isLoading:r}=e,l=null==e?void 0:e.isError,i=(null==e?void 0:e.shoppingSearchListingHeader)&&(null==e?void 0:e.shoppingSearchListingHeader.length)>0;return r||l?null:n.createElement(d.ErrorBoundary,{label:"hotel.search.tools"},n.createElement(S.b,{margin:a===ie.Cu.SMALL||a===ie.Cu.MEDIUM?{blockstart:"three"}:void 0},n.createElement("section",{"data-stid":"split-view-results-header"},n.createElement("header",null,n.createElement(h.E,{columns:(0,Ht.t)(t)?2:1},n.createElement(h.a,null,n.createElement(n.Fragment,null,n.createElement(S.b,{margin:{blockstart:i?"three":void 0}},n.createElement("div",null,n.createElement(Vt,null))))),n.createElement(h.a,{alignSelf:"end"},n.createElement(jt.K,null)))))))})),zt=n.memo((({children:e})=>{const{handleScroll:t}=n.useContext(Q);return n.createElement("div",{className:"scrollable-result-section",style:{overflowY:"auto",blockSize:"100%",position:"relative"},onScroll:t},e)})),Wt=(0,o.inject)("searchResults")((({searchResults:e,location:t})=>{const a=null==e?void 0:e.searchCriteria,{regionId:r,startDate:l,endDate:i}=a||{};return n.createElement(pt.t,{location:t,regionId:r,startDate:l,endDate:i})})),Yt="header",qt="search-form",Kt="filter-pills",Qt="results",Xt="map-trigger",Jt="map",$t="meso-ad",Zt="shopping-search-listing-header-wrapper",ea=n.memo(k.$_),ta=(e,t,a,r,l,i,o,s,c,u,m,p,h,_,R,x,P)=>{const I={header:null,searchForm:null,filters:null,results:null,map:null};I.header=n.createElement("div",{"data-stid":Yt},n.createElement(k.h4,{fullWidth:!0}));const L=n.createElement("div",null,n.createElement(d.ErrorBoundary,{label:"search-form-error-boundary"},n.createElement(q,null)));I.filters=R?n.createElement("div",{"data-stid":Kt},n.createElement(S.b,{border:["blockend"]},n.createElement("div",null,n.createElement(K.t,{view:T.oT.FILTER_BAR,filterBarSpacing:{padding:{large:{inline:"six",blockstart:"four",blockend:"two"}}}}),n.createElement(S.b,{padding:{blockstart:_?"two":"one"}},n.createElement("div",{"data-stid":"loading-bar"},n.createElement(b.E,{type:"indeterminate",indeterminateHasFinished:_,announceStartPhrase:"Loading.",announceEndPhrase:"Results loaded."}))))),n.createElement(Ft,null)):n.createElement("div",{"data-stid":Kt},n.createElement(S.b,{border:["blockend"]},n.createElement(K.t,{view:T.oT.FILTER_BAR,filterBarSpacing:{padding:{small:{inline:"three",block:"two"},medium:{inline:"six",block:"three"},large:{inline:"six",block:"four"}}}})),n.createElement(Ft,null));const w=n.createElement("div",{style:s?{}:{visibility:"hidden"},"data-stid":"visually-hidden-list"},n.createElement(d.ErrorBoundary,{label:"search-results-error-boundary"},n.createElement(Wt,{location:ae.OD.AFTER_HEADER}),n.createElement("div",{"data-stid":Zt},n.createElement(Nt.g,{spacingOptions:{margin:{blockend:"three"}}})),n.createElement(Gt,null),n.createElement(At,null))),O=o,D=n.createElement(y.d,{type:"absolute",position:{top:"two",left:"two",zindex:"layer3"},cloneElement:!0},n.createElement(v.E,{id:Bt,name:s?i.formatText("maps.splitview.expandButton.a11y"):i.formatText("maps.splitview.collapseButton.a11y"),"aria-label":s?i.formatText("maps.splitview.expandButton.a11y"):i.formatText("maps.splitview.collapseButton.a11y"),onClick:()=>{(()=>{var e;const t=document.getElementsByClassName("scrollable-result-section")[0];t&&(s?P(t.scrollTop):null===(e=t.scrollTo)||void 0===e||e.call(t,0,x))})(),c(),(e=>{const t=e?"HOT.SR.map_expand":"HOT.SR.map_collapse",a=e?"Expand Map on search results":"Collapse Map on search results";l.track(te.Es.EVENT,{data:{schemaName:"referrer",messageContent:{referrerId:t,linkName:a,eventType:"click"}},config:{delay:!1}})})(s)},role:"button"},n.createElement(E.a,{name:s?"arrow_back_iOS":"arrow_forward_iOS"}),O&&n.createElement(C.LocalizedText,{message:s?"maps.splitview.expandButton.text":"maps.splitview.collapseButton.text"}))),A=o||h,N=A?{style:{"div:has(> .gm-iv-close)":{marginLeft:"0.5rem",marginTop:"4rem"},"div:has(> .gm-iv-address)":{marginTop:"3.375rem"}}}:{},M=n.createElement("div",{"data-stid":Jt},n.createElement(y.d,{type:"relative",style:{height:"100%"}},A&&D,n.createElement(d.ErrorBoundary,{label:"map-error-boundary"},n.createElement(xe.i,{mapFocusHolderDisabled:!s,onInit:m,cfg:N,setViewportToApplyOnMapExpandChange:p,clientPadding:u})),A&&D)),B=n.createElement("div",{"data-stid":$t,ref:a},n.createElement(pe.U,null),n.createElement(Re,{isBEXGSplitViewExperimentEnabled:o})),F=n.createElement(n.Fragment,null,n.createElement(d.ErrorBoundary,{label:"lodging.splitview.footer"},n.createElement(de,null,n.createElement(ea,{skipSsr:!0})))),j=n.createElement(n.Fragment,null,n.createElement("div",{"data-stid":Qt,ref:t},n.createElement(S.b,{padding:{inline:"six",blockstart:"three"}},w)),F);return e===ie.Cu.SMALL||e===ie.Cu.MEDIUM?(I.searchForm=n.createElement("div",{"data-stid":qt},n.createElement(S.b,{margin:{small:{inline:"three",blockstart:"three"},medium:{inline:"six",blockstart:"three"}}},L)),I.results=n.createElement("div",{"data-stid":Qt},n.createElement(S.b,{padding:{small:{inline:"three"},medium:{inline:"six"}}},w),n.createElement("div",{"data-stid":Xt},n.createElement(Pe.r,{viewTracker:r,tracker:l,dialogView:T.oT.FILTER_BAR})),F)):(I.searchForm=n.createElement("div",{"data-stid":qt},n.createElement(g.i,null,n.createElement(g.j,{grow:1,maxWidth:1200},n.createElement(S.b,{margin:{inline:"six",blockstart:"four"}},L)))),I.results=n.createElement(f.E,{className:"scrollable-result-section",direction:"vertical"},j),I.map=M),e===ie.Cu.EXTRA_LARGE&&(o&&(I.results=n.createElement(zt,null,j)),I.map=n.createElement(g.i,{space:"six",style:{overflowY:"hidden"}},n.createElement(g.j,{minWidth:336,grow:1},M),n.createElement(g.j,{minWidth:160,maxWidth:160},B))),I},aa=(0,o.inject)("searchResults")((0,o.observer)((({searchResults:e})=>{const[t,a]=(0,J.F)("searchResultsList","ad-parent-div"),r=(0,$.MH)(),l=(0,te.xB)(),i=(0,C.useLocalization)(),o=n.useRef(),s=(0,ie.uQ)(ee.N),{experiment:c,context:u}=(0,w.m)(),m=(0,Z.I)(c,u),{exposure:p}=(0,I.useExperiment)("Expandable_Map_View_on_SRP_Web"),[v,E]=n.useState(!1),[g,y]=n.useState(0),b=n.useCallback((e=>{o.current=e}),[]),[f,S]=n.useState(),k=void 0,_=se(E,o,f,k),x=(null==e?void 0:e.isLoading)||(null==e?void 0:e.isPaginationLoading),P=s===ie.Cu.EXTRA_LARGE||s===ie.Cu.LARGE,L=(0,R.d)(u)&&P,T=ta(s,t,a,r,l,i,m,!1===v,_,k,b,S,0!==p.bucket,!1===x,L,g,y);return n.createElement(X,null,n.createElement(re.lS,{productType:re.kv.Lodging},n.createElement(le.rO,null,n.createElement(h.E,{columns:{large:v?["0px","1fr"]:[(0,h.e)("660px","800px"),(0,h.e)("332px","400px")],extra_large:v?["0px","1fr"]:[(0,h.e)("680px","864px"),(0,h.e)("520px","1fr")]},blockSize:P?"100vb":"full_size"},n.createElement(h.a,{colSpan:"all"},T.header),n.createElement(me.S,null),n.createElement(h.a,{colSpan:"all"},T.searchForm),n.createElement(h.a,{colSpan:"all"},T.filters),n.createElement(h.a,null,T.results),n.createElement(h.a,null,T.map)),n.createElement(d.ErrorBoundary,{label:"onekey.onboarding.shopping-pwa"},n.createElement(ne.L,null)))))})));aa.displayName="SplitView";var na=a(51167),ra=a(65881),la=a(50280),ia=a(27405),oa=a(49861),sa=a(36645),ca=a(12125),ua=a(36008),da=a(21159);const ma=({isLoading:e,isError:t})=>{const a=(0,C.useLocalization)(),[r,l]=n.useState(""),i=null==a?void 0:a.formatText("hotels.searchResults.resultsUpdated.liveAnnounce");let o;return o=e?null==a?void 0:a.formatText("hotels.searchResults.resultsLoading.liveAnnounce"):t?null==a?void 0:a.formatText("hotels.searchResults.errorRetrievingResults.liveAnnounce"):i,o!==r&&((0,ht.liveAnnounce)(o,ht.Level.POLITE),l(o)),null};ma.displayName="AnnounceLoadingState";const pa=({children:e,isPackages:t,defaultGridViewState:a})=>t?n.createElement(n.Fragment,null,e):n.createElement(va,{defaultGridViewState:a},e),va=({children:e,defaultGridViewState:t})=>{var a;const{exposure:r}=(0,I.useExperiment)("SRP_Grid_view_web",!0);return n.createElement(Ge.vx,{isGridView:null!==(a=(0,Ht.t)(r)&&t)&&void 0!==a?a:2===(null==r?void 0:r.bucket)},e)};var Ea=a(87864),ga=a(30164),ha=a(40828),ya=a(86415);const ba=(0,o.inject)("packageType","searchResults","multiItem")((0,o.observer)((({packageType:e,searchResults:t,multiItem:a})=>{const l=(0,C.useLocalization)(),i=(0,r.useLocation)(),o=(0,r.useHistory)(),[s,u]=n.useState(!1),[d,p]=n.useState(!1),v=(null==t?void 0:t.searchCriteria)?null==a?void 0:a.getPrimaryProductShoppingCriteriaInput(t.searchCriteria):null,E=n.useMemo((()=>({packageShoppingCriteria:{primarySearchCriteria:v},packageType:e})),[v,e]);if(n.useEffect((()=>{const e=(0,m.parse)(o.location.search).pwaDialog,t=Boolean(e)||""===e;"PUSH"===o.action&&t&&p(!0),"POP"===o.action&&d?(u(!0),p(!1)):"POP"===o.action&&u(!1)}),[o.action]),n.useEffect((()=>{E&&!s&&u(!0)}),[E,s]),!v)return null;return n.createElement("div",{"data-stid":"mit-search-form"},n.createElement(qe.Mc,{inputs:E,onSubmit:(e,a)=>{e.preventDefault(),null==t||t.clearDefaultRequestFields(),null==t||t.clearPagination(),(0,c.updateSearch)({history:o,location:i,newParams:Object.assign({},fa(l,a)),replace:!0})},includePlayback:!0,skipQuery:s}))}))),fa=(e,t)=>{var a,n,r,l,i,o,s,c,u,d,m,p,v,E,g,h,y,b,f,S,k,_,R,x,P,I,C;if(!(null===(a=null==t?void 0:t.packageShoppingCriteria)||void 0===a?void 0:a.primarySearchCriteria))return null;const L=t.packageShoppingCriteria.primarySearchCriteria,T=(null===(r=null===(n=L.flight)||void 0===n?void 0:n.journeyCriterias[0])||void 0===r?void 0:r.departureDate)&&Sa(L.flight.journeyCriterias[0].departureDate,e),w=(null===(i=null===(l=L.flight)||void 0===l?void 0:l.journeyCriterias[1])||void 0===i?void 0:i.departureDate)&&Sa(L.flight.journeyCriterias[1].departureDate,e),O=null!==(c=null===(s=null===(o=null==L?void 0:L.flight)||void 0===o?void 0:o.journeyCriterias[0])||void 0===s?void 0:s.origin)&&void 0!==c?c:"",A=null!==(m=null===(d=null===(u=null==L?void 0:L.flight)||void 0===u?void 0:u.journeyCriterias[0])||void 0===d?void 0:d.destination)&&void 0!==m?m:"",N=null!==(E=null===(v=null===(p=null==L?void 0:L.property)||void 0===p?void 0:p.destination)||void 0===v?void 0:v.regionId)&&void 0!==E?E:"",M=null===(h=null===(g=L.property)||void 0===g?void 0:g.rooms)||void 0===h?void 0:h.map((e=>e.adults)).join(","),B=null===(b=null===(y=L.property)||void 0===y?void 0:y.rooms)||void 0===b?void 0:b.map(((e,t)=>{var a;return null===(a=null==e?void 0:e.children)||void 0===a?void 0:a.map((e=>`${t+1}_${e.age}`)).join(",")})).filter((e=>""!==e)).join(","),F=ka(L),j=null===(S=null===(f=L.flight)||void 0===f?void 0:f.searchPreferences)||void 0===S?void 0:S.cabinClass,H=null===(R=null===(_=null===(k=L.flight)||void 0===k?void 0:k.searchPreferences)||void 0===_?void 0:_.advancedFilters)||void 0===R?void 0:R.indexOf(D.BSu.NONSTOP),U=((null!=H?H:-1)>-1).toString(),V=(null===(P=null===(x=null==L?void 0:L.property)||void 0===x?void 0:x.dateRange)||void 0===P?void 0:P.checkInDate)&&Sa(L.property.dateRange.checkInDate,e),G=(null===(C=null===(I=null==L?void 0:L.property)||void 0===I?void 0:I.dateRange)||void 0===C?void 0:C.checkOutDate)&&Sa(L.property.dateRange.checkOutDate,e),z=V!==T||G!==w;return{startDate:T,endDate:w,partialStay:z,partialStayStartDate:z?V:null,partialStayEndDate:z?G:null,origin:O,destination:A,regionId:N,adults:M,children:B,infantsInSeats:F,cabinClass:j,directFlights:U}},Sa=(e,t)=>t.formatDate(new Date(e.year,e.month-1,e.day),{raw:"yyyy-MM-dd"}),ka=e=>{var t,a;const n=null===(a=null===(t=null==e?void 0:e.flight)||void 0===t?void 0:t.travelers)||void 0===a?void 0:a.filter((e=>(null==e?void 0:e.type)===D.eBe.INFANT_IN_SEAT));return Array.isArray(n)&&n.length>0?"1":"0"};ba.displayName="MultiItemSearchForm";var _a=a(11474),Ra=a(56810);const xa=(0,o.inject)("searchResults","multiItem","context")((0,o.observer)((({searchResults:e,multiItem:t,context:a,isHidden:r=!1})=>{var l;const{formatText:i}=(0,C.useLocalization)(),o=null!==(l=null==t?void 0:t.getPackageType())&&void 0!==l?l:void 0,s=a&&a.deviceInformation&&a.deviceInformation.mobile,c=n.useMemo((()=>Pa(o)),[o]),u=n.useMemo((()=>["startDate","endDate","partialStayStartDate","partialStayEndDate"]),[]),d={model:e&&e.searchCriteria,displayFields:c,ignoreFields:u,onUpdateResults:()=>{e&&(e.clearDefaultRequestFields(),e.clearPagination(),e.shouldFetch=!0)},isMobile:s};return n.createElement(S.b,{padding:{small:{inline:"two"},medium:{inline:"unset"}},margin:{block:"two"},className:r?"is-hidden":""},n.createElement("div",{"data-stid":"section-hotel-search"},(null==t?void 0:t.isTouchedCart)&&!(null==t?void 0:t.isPackageShoppingPath())&&n.createElement(S.b,{margin:{blockend:"two"}},n.createElement(Le.c,{size:400,className:"pwa-theme--grey-700",weight:"bold"},i("hotels.searchResults.multiProperty.searchCriteria.header"))),n.createElement("h2",{className:"is-visually-hidden"},i("hotels.infosite.availabilityWizard.changeSearch.a11yLabel")),n.createElement(Ra.UI,Object.assign({},d))))}))),Pa=e=>e&&e!==_a.yR.HC?["origin","destination","rooms","cabinClass","dateRange","directFlights","partialStayCheckbox","partialStayDateRange"]:["destination","dateRange","rooms","pickUpTime","dropOffTime"];var Ia=a(85411);const Ca=(0,et.ClickTracker)(at.b),La=({onClick:e})=>n.createElement(g.i,{justifyContent:"center"},n.createElement(S.b,{padding:{blockend:"four",blockstart:"four"}},n.createElement(Ca,{linkName:"Close search form",onClick:e,align:"center",className:"uitk-button-tertiary","data-stid":"close-search-form",rfrr:":CloseSearch"},n.createElement(C.LocalizedText,{message:"hotels.searchResults.close.text"})))),Ta=({destinationMessage:e,dateRange:t,guestCountTitle:a})=>n.createElement(Le.c,{align:"left",overflow:"truncate"},n.createElement(Le.c,{dataTestId:"content-location-title",overflow:"truncate",size:400,weight:"medium"},e),n.createElement(n.Fragment,null,n.createElement(Le.c,{dataTestId:"playback-date-range",inline:!0,size:200,weight:"medium"},t),a&&n.createElement(S.b,{padding:{inline:"two"}},n.createElement(Le.c,{dataTestId:"playback-guest-count",inline:!0,size:200,weight:"medium","aria-label":`, ${a}`},a)))),wa=(0,o.inject)("searchResults")((({searchResults:e})=>{const{formatText:t,formatDateString:a}=(0,C.useLocalization)();if(!e)return null;const{searchCriteria:r,isLoading:l}=e,{destination:i,guestCount:o}=r||{},s=l?i:i||t("hotels.searchResults.playback.destinationMissing.text");return n.createElement(g.i,{dataTestId:"collapsed-search-playback"},n.createElement(g.j,{alignSelf:"center"},n.createElement(S.b,{margin:{inlinestart:"one",inlineend:"two"}},n.createElement(E.a,{description:t("hotels.searchResults.backToSearchResults.a11yLabel"),id:"playback-icon",name:"search",size:E.E.MEDIUM,title:t("hotels.searchResults.title")}))),n.createElement(g.j,null,n.createElement(S.b,{margin:{block:"two",inlinestart:"one"}},n.createElement("div",null,n.createElement(Ta,{destinationMessage:s,dateRange:(()=>{const n=null==e?void 0:e.searchCriteria;if(!n||!n.startDate||!n.endDate)return"";const r=a(n.startDate,{skeleton:"MMMd"}),l=a(n.endDate,{skeleton:"MMMd"});return t("hotels.searchResults.playback.dateRange",r,l)})(),guestCountTitle:o&&t("hotels.searchResults.numberOfGuests",o)||void 0})))))})),Oa=(0,et.ClickTracker)(Ia.Link),Da=(0,o.inject)("analytics","searchResults","uiPage")((({analytics:e,uiPage:t,searchResults:a})=>{const r=n.useRef(),[l,i]=n.useState(null==a?void 0:a.expandForm),[o,s]=n.useState(!1),c=()=>i(!l);return n.useEffect((()=>{s(!0);const e=(0,_.reaction)((()=>null==t?void 0:t.openNewDatePickerEvent),(e=>{e&&i(!0)}));return()=>{e(),null==a||a.setExpandForm(!1)}}),[a,null==t?void 0:t.openNewDatePickerEvent]),n.useEffect((()=>{!l&&r&&r.current&&r.current.focus(),null==e||e.trackEvent(":"+(l?"ChangeSearch":"CloseForm"),"Edit search form",null)}),[l,r]),n.createElement("div",{"data-stid":"collapsible-playback"},!l&&n.createElement("h2",{className:"is-visually-hidden"},n.createElement(C.LocalizedText,{message:"hotels.infosite.availabilityWizard.changeSearch.a11yLabel"})),o?n.createElement(n.Fragment,null,n.createElement(xa,{isHidden:!l}),!l&&n.createElement(Ie.E,{"data-stid":"form_expander",isFullWidth:!0,onClick:c,domRef:r},n.createElement(Le.c,{overflow:"truncate"},n.createElement(g.i,null,n.createElement(g.j,{minWidth:"full_width"},n.createElement(wa,null)))))):n.createElement(Oa,{"data-stid":"playback-action",linkName:"Edit search form",rfrr:":ChangeSearch",to:"/Hotels"},n.createElement(S.b,{margin:{block:"one"},padding:{inline:"three"}},n.createElement(wa,null))),l&&n.createElement(La,{onClick:c}))})),Aa=(0,o.inject)("packageType")((0,o.observer)((({packageType:e})=>e!==qe.yR.FLIGHT_HOTEL?n.createElement(Na,null):n.createElement(I.Experiment,{name:"TSDP_New_Search_Form_FH_SRP",logExposure:!0},n.createElement(I.ExperimentControl,null,n.createElement(Na,null)),n.createElement(I.ExperimentVariant,{bucket:1},n.createElement(ba,{packageType:e})),n.createElement(I.ExperimentVariant,{bucket:2},n.createElement(Na,null)))))),Na=(0,o.observer)((()=>n.createElement(ie.l_,null,n.createElement(ie.Vk,null,n.createElement(Da,null)),n.createElement(ie.N2,null,n.createElement(xa,null)))));Aa.displayName="MitSearchFormWrapper";const Ma=(0,o.inject)("multiItem","pageLayout")((({multiItem:e,pageLayout:t})=>{const a="true"===(0,kt.ZP)().prebundle,r="true"===(0,kt.ZP)().searchFormDisabled;if(a||r)return null;const l=null==e?void 0:e.isPackageShoppingPath(),i=null==e?void 0:e.getPackageType(),o=null==i?void 0:Xe.EO[i],s=(null==t?void 0:t.templateName)===ft.Pb.SplitView?{margin:{small:{inline:"three",blockstart:"three"},medium:{inline:"six",blockstart:"four"},large:{inline:"six",blockstart:"four"}}}:{margin:{small:{inline:"three",blockstart:"three"},medium:{inline:"unset",blockstart:"six",blockend:"two"},large:{blockend:"one"}}};return n.createElement(S.b,Object.assign({},s),n.createElement("div",null,l?n.createElement(Aa,{packageType:o}):n.createElement(q,null)))}));var Ba=a(73202),Fa=a(40536);const ja=(0,o.inject)("searchResults")((0,o.observer)((({templateComponent:e,searchResults:t})=>{const a=null==t?void 0:t.searchCriteria,{regionId:r,startDate:l,endDate:i}=a||{},o=(0,ve.Ry)({location:(0,ve.jb)(ae.OD)}),s=(0,ve.As)(o,e.config);if(!s.success)return null;const{location:c}=s.output;return n.createElement(pt.t,{location:c,regionId:r,startDate:l,endDate:i})}))),Ha=(0,o.inject)("multiItem")((0,o.observer)((({templateComponent:e,multiItem:t})=>{var a;const{children:r,config:l}=e,i=null==t?void 0:t.isPackageShoppingPath(),o=(0,ve.jt)((0,ve.Ry)({columns:(0,ve.Rx)(),space:(0,ve.Yj)(),bexQuickFiltersEnabled:(0,ve.jt)((0,ve.O7)())})),s=(0,ve.As)(o,l);if(!s.success||!r||0===r.length)return null;const{columns:c,space:u,bexQuickFiltersEnabled:d}=null!==(a=s.output)&&void 0!==a?a:{},m=i?"unset":"three";return n.createElement(S.b,{padding:d?{blockstart:"two"}:{small:{blockstart:m,blockend:m},medium:{blockstart:"one"},large:{blockstart:"three"}}},n.createElement("div",{className:"search-results-listing"},n.createElement(ie.l_,null,n.createElement(ie.N0,null,n.createElement(h.E,{columns:c,space:u},r&&n.createElement(Ea.DU,{templateComponents:r}))),n.createElement(ie.Vk,null,n.createElement(h.E,{columns:1},r&&n.createElement(Ea.DU,{templateComponents:r}))))))})));var Ua=a(46467);const Va=(0,o.inject)("context","searchCriteria","searchResults","multiItem","analyticsSearch")((({l10n:e,context:t,searchResults:a,tracker:r,viewTracker:l,location:i,multiItem:o,searchCriteria:s,bexQuickFiltersEnabled:c,analyticsSearch:u})=>{var d,p,v;const E=(0,le.IJ)();if(!(t&&a&&s&&u))return null;const g=a.searchCriteria,h=null==g?void 0:g.regionId,y=null==g?void 0:g.destination,b=null==g?void 0:g.latLong,f=null==g?void 0:g.group,k=null==e?void 0:e.formatText,_=Boolean("map"===(0,m.parse)(i.search).pwaOverlay),R=!h&&!b&&!f&&y||h||b||f,x=(0,Xe.pu)(t,u,s,null==o?void 0:o.multiItemContext),P=null===(p=null===(d=null==E?void 0:E.primarySearchCriteria)||void 0===d?void 0:d.property)||void 0===p?void 0:p.rooms;(null===(v=null==x?void 0:x.criteria)||void 0===v?void 0:v.primary)&&P&&(x.criteria.primary.rooms=P);const I=n.createElement(n.Fragment,null,n.createElement(Pe.r,{viewTracker:l,tracker:r,searchInputs:x,bexQuickFiltersEnabled:c}),R&&!c&&n.createElement(n.Fragment,null,n.createElement("h2",{className:"is-visually-hidden"},k&&k("hotels.searchResults.filtersDialog.title")),!_&&n.createElement(S.b,{padding:{blockend:"twelve"}},n.createElement(K.t,{view:T.oT.FILTERS}))));return c?I:n.createElement("section",{"data-stid":"desktop-sidebar"},I)})),Ga=(0,C.withLocalization)((0,r.withRouter)(Va)),za=(0,o.inject)("experiment","multiItem")((({templateComponent:e})=>{const{children:t}=e;return t&&0!==t.length?n.createElement(d.ErrorBoundary,{label:"hotel.masterPage.toolbar"},n.createElement(S.b,{margin:{medium:{blockstart:"two"},large:{blockstart:"three"}}},n.createElement("section",null,t&&n.createElement(Ea.DU,{templateComponents:t})))):null}));var Wa=a(62443);const Ya=(new Map).set("SearchResultsWrapper",(0,ga.wK)(At)).set("ResultsHeader",(0,ga.wK)(Ba.w)).set("Sidebar",(0,ga.wK)((({templateComponent:e})=>{var t;const a=(0,$.MH)(),r=(0,te.xB)(),l=(0,ve.jt)((0,ve.Ry)({bexQuickFiltersEnabled:(0,ve.jt)((0,ve.O7)())})),i=(0,ve.As)(l,e.config);if(!i.success)return null;const{bexQuickFiltersEnabled:o}=null!==(t=i.output)&&void 0!==t?t:{};return n.createElement(ie.l_,null,n.createElement(ie.N0,null,n.createElement(Ga,{tracker:r,viewTracker:a,bexQuickFiltersEnabled:o})))}))).set("ToolbarRegion",za).set("Playback",(0,ga.wK)(Ma)).set("MainRegion",(({templateComponent:e})=>{const{children:t}=e;return t&&0!==t.length?n.createElement(d.ErrorBoundary,{label:"hotel.masterPage.main"},n.createElement("section",{"data-stid":"search-results__main",itemScope:!0,itemType:"https://schema.org/Hotel"},n.createElement(S.b,{margin:{small:{inline:"three"},medium:{inline:"unset"}}},n.createElement("div",null,n.createElement(Ea.DU,{templateComponents:t}))))):null})).set("ResultsWrapper",Ha).set("MitHeader",ya.g).set("CustomerNotificationTemplateComponent",ja).set("SideRailRegion",Ua._).set("MesoSideRail",ha.d).set("EGDSComponent",Wa.c).set("Filterbar",(0,ga.wK)(Fa.N)).set("ListViewLayout",(({templateComponent:{children:e}})=>(null==e?void 0:e.length)?n.createElement(h.E,{columns:{extra_large:["auto","184px"]}},n.createElement(Ea.DU,{templateComponents:e})):null)).set("Footer",k.$_).set("MesoScripts",pe.U),qa=({pageLayout:e})=>{var t,a;return n.createElement("div",{"data-stid":"lodging-template-renderer"},n.createElement(Ea.Nv,{library:Ya},n.createElement(d.ErrorBoundary,{label:"lodging.template.renderer"},n.createElement(Ea.DU,{templateComponents:null!==(a=null===(t=null==e?void 0:e.getSRPTemplate(null==e?void 0:e.templateName))||void 0===t?void 0:t.components)&&void 0!==a?a:[]}))))};var Ka=a(90939),Qa=a(33184),Xa=function(e,t,a,n){var r,l=arguments.length,i=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(i=(l<3?r(i):l>3?r(t,a,i):r(t,a))||i);return l>3&&i&&Object.defineProperty(t,a,i),i},Ja=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a};const $a=s.ClientLogger.getLoggerWithIdentifier("pwa.component.search");let Za=class extends n.Component{constructor(e){var t,a,n,r;if(super(e),this.setView=this.setView.bind(this),this.state={view:$.G7.LISTINGS},this.props.context&&this.props.searchResults&&this.props.searchResults.searchCriteria&&"true"===this.props.searchResults.searchCriteria.multiProp&&this.props.multiItem&&this.props.multiItem.getOrCreateCart(this.props.context),null===(t=this.props.advertising)||void 0===t||t.includeAd(),null===(a=this.props.multiItem)||void 0===a?void 0:a.multiItemContext){const e=Qa.zz[this.props.multiItem.multiItemContext.packageType];e&&(null===(n=this.props.advertising)||void 0===n||n.trigger(e))}else null===(r=this.props.advertising)||void 0===r||r.trigger("page.Hotels.Search")}componentDidMount(){this.trackDisambiguationSearch(),this.trackSearchResultsError(),this.sendAdBlockerEvent()}analyticsTrackEvent(e,t,a){this.props.analytics&&"function"==typeof this.props.analytics.trackEvent&&this.props.analytics.trackEvent(e,t,a)}sendAdBlockerEvent(){{const{referrer:e,linkName:t}=(0,u.getAdBlockerEventParams)();this.analyticsTrackEvent(e,t,null)}}trackDisambiguationSearch(){if(this.props.multiItem&&this.props.multiItem.isDisambigSearch()&&this.props.analytics&&"function"==typeof this.props.analytics.trackEvent){const e=[{name:"SearchResultsDisambig",error:!1}];this.props.analytics.trackEvent(this.props.multiItem.referrer,"package disambig search",null,e)}}trackSearchResultsError(){var e;(null===(e=this.props.searchResults)||void 0===e?void 0:e.isError)&&this.analyticsTrackEvent("SorryMessage","SorryMessage",null)}setView(e){this.setState({view:e})}render(){var e,t;const{analyticsSearch:a,context:r,searchResults:l,multiItem:i,pageLayout:o}=this.props,s=i&&i.cartInfo&&"mixAndMatch"===i.cartInfo.identifier,u=null==i?void 0:i.isPackageShoppingPath();let m;if(s&&r&&i&&i.itemCount>0&&i.emptyCart(r),(null==o?void 0:o.templateName)===ft.Pb.SplitView)m=n.createElement(d.ErrorBoundary,{label:"lodging.search.splitView"},n.createElement(aa,null));else{const e=n.createElement("div",{className:"constrain-width"},n.createElement(qa,{pageLayout:o}));m=n.createElement(da.M,{route:this.props.route,pageHeader:null==l?void 0:l.resultsHeading,templateContent:e})}if(l)return n.createElement($.Zj,{viewTracker:{view:this.state.view,setView:this.setView}},n.createElement(ua.n,null,n.createElement(ia.uC,null,n.createElement(la.K3,null,n.createElement(Qe.On,{eventManager:ca.h},n.createElement(bt.m3,null,n.createElement(J.j,null,n.createElement(L.CR,null,n.createElement(pa,{isPackages:Boolean(null==i?void 0:i.isPackageShoppingPath()),defaultGridViewState:(null==o?void 0:o.productCardAdaptiveViewType)&&(null==o?void 0:o.isGridViewListingCards)},n.createElement(sa.t,{version:Ka.P.google},n.createElement(Ge.At.Provider,{value:{analyticsSearch:a,updateSearch:c.updateSearch}},u&&n.createElement(ma,{isLoading:null===(e=this.props.searchResults)||void 0===e?void 0:e.isLoading,isError:null===(t=this.props.searchResults)||void 0===t?void 0:t.isError}),m,n.createElement(p.u,null))))))))))))}};Za=Xa([(0,o.inject)("advertising","analytics","context","multiItem","searchResults","uiPage","pageLayout"),o.observer],Za);const en=(0,o.inject)("analytics","experiment","multiItem","analyticsSearch","page","searchResults","context")((e=>{var t,a,{analytics:o,experiment:s,multiItem:c,analyticsSearch:u,page:d,searchResults:p,context:v}=e,E=Ja(e,["analytics","experiment","multiItem","analyticsSearch","page","searchResults","context"]);const g=(0,l.x)(),h=null==c?void 0:c.isPackageShoppingPath(),y=1===(null===(a=null===(t=null==s?void 0:s.exposures)||void 0===t?void 0:t.srp_move_searchresultshotel_to_clientside)||void 0===a?void 0:a.bucket),{exposure:b,logExperiment:f}=(0,I.useExperiment)("Split_View_Side_by_side_BEXG_H"),{exposure:S,logExperiment:k}=(0,I.useExperiment)("Exclude_map_from_search_query_vrbo_mobile"),{exposure:_,logExperiment:R}=(0,I.useExperiment)("Expandable_Map_View_on_SRP_Web");if(n.useEffect((()=>{R(_)}),[R,_]),n.useEffect((()=>{(0,St.tq)(v)&&k(S)}),[S,v]),(0,St.tq)(v)||f(b),(!h||y)&&u){const e=(0,na.$N)(o,$a,u,na.Yd,v.site.brand,s);u.apolloLinkSetOnServer?u.apolloLinkSetInBrowser||(g.setLink(i.i.from([e,g.link])),u.apolloLinkSetInBrowser=!0):(g.setLink(i.i.from([e,g.link])),u.apolloLinkSetOnServer=!0)}const x=(0,r.useLocation)(),{pageId:P,pageName:C}=(0,ra.iU)((0,m.parse)(x.search));return d&&(d.pageId=P,d.pageName=C,p.pageId=P),n.createElement(re.lS,{productType:re.kv.Lodging},n.createElement(le.rO,null,n.createElement(oa.yq,{isMultiItem:h},n.createElement(I.Experiment,{name:"Lodging_Tag_Commander_Delay"},n.createElement(I.ExperimentControl,null),n.createElement(I.ExperimentVariant,{bucket:1}),n.createElement(I.ExperimentVariant,{bucket:2}),n.createElement(I.ExperimentVariant,{bucket:3})),n.createElement(I.Experiment,{name:"Vrbo_Bounding_Box_Client_Side_Adjustment"},n.createElement(I.ExperimentControl,null),n.createElement(I.ExperimentVariant,{bucket:1})),n.createElement(Za,Object.assign({},E,{analyticsSearch:u,experiment:s,page:d})))))}));var tn=n.memo(en)},57249:function(){},94095:function(){}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/search.c7f4fbd7264021bc3dec.js.map