/*@license For license information please refer to shared-ui-retail-incentives-collection-carousel.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6912],{72430:function(e,n,t){t.d(n,{G:function(){return ue}});var r=t(38972),i=t(96170),a=t(83962),o=t(58367),l=t(26246),c=t(23109),s=t(92061),u=t(85221),m=t(93648),d=t(48296),v=t(43746),f=t(32173),g=t(49970),p=t(83028),y=t(82662),b=t(8684),I=t(36182),E=t(23783),C=t(10225),h=t(1740),k=t(42898),A=t(47751);function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){_(e,n,t[n])}))}return e}function P(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(c){l=!0,i=c}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||F(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function S(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,n){if(e){if("string"==typeof e)return O(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O(e,n):void 0}}function D(){var e=x(["\n  fragment CollectionClickstreamAnalyticsFragment on CollectionClickstreamAnalytics {\n    event {\n      eventCategory\n      eventName\n      eventType\n      eventVersion\n    }\n    payload {\n      collectionId\n      collectionType\n      componentPosition\n      destinationGeoId\n      productId\n      trackingId\n      componentName\n      componentId\n    }\n  }\n"]);return D=function(){return e},e}function L(){var e=x(["\n  fragment EGDSButtonFragment on EGDSButton {\n    __typename\n    accessibility\n    primary\n    disabled\n  }\n"]);return L=function(){return e},e}function j(){var e=x(["\n  fragment IncentivesActionLinkFragment on IncentivesActionLink {\n    resource {\n      value\n    }\n    button {\n      ...EGDSButtonFragment\n    }\n    accessibility\n    impressionAnalytics {\n      linkName\n      referrerId\n    }\n    clickAnalytics {\n      linkName\n      referrerId\n    }\n    presentedAnalytics {\n      ...CollectionClickstreamAnalyticsFragment\n    }\n    selectedAnalytics {\n      ...CollectionClickstreamAnalyticsFragment\n    }\n  }\n\n  ","\n  ","\n"]);return j=function(){return e},e}function T(){var e=x(["\n  fragment IncentivesImageAttributionDialogFragment on IncentivesImageAttributionDialog {\n    text\n    closeText\n  }\n"]);return T=function(){return e},e}function R(){var e=x(["\n  fragment IncentivesImageAttributionFragment on IncentivesImageAttribution {\n    dialog {\n      ...IncentivesImageAttributionDialogFragment\n    }\n    dialogTriggerAccessibility\n  }\n\n  ","\n"]);return R=function(){return e},e}function B(){var e=x(["\n  fragment IncentivesCollectionCarouselImageFragment on IncentivesImage {\n    image {\n      description\n      url\n    }\n    attribution {\n      ...IncentivesImageAttributionFragment\n    }\n  }\n  ","\n"]);return B=function(){return e},e}function H(){var e=x(["\n  fragment IncentivesContentItemFragment on IncentivesContentItem {\n    actionLink {\n      ...IncentivesActionLinkFragment\n    }\n    incentivesImage {\n      ...IncentivesCollectionCarouselImageFragment\n    }\n    title\n    subtitle\n    recommendationId\n  }\n\n  ","\n  ","\n"]);return H=function(){return e},e}function M(){var e=x(["\n  fragment IncentivesCollectionCarouselHeaderFragment on IncentivesCollectionHeader {\n    title\n    subtitle\n  }\n"]);return M=function(){return e},e}function z(){var e=x(["\n  query CollectionCarouselQuery($context: ContextInput!, $collectionId: String!, $pageContext: PageContextInput) {\n    incentivesCollection(context: $context, collectionId: $collectionId, pageContext: $pageContext) {\n      collectionHeader {\n        ...IncentivesCollectionCarouselHeaderFragment\n      }\n      collectionItems {\n        ...IncentivesContentItemFragment\n      }\n      egRecommendationResponseId\n      impressionAnalytics {\n        event\n        referrerId\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return z=function(){return e},e}var U=function(e){var n,t;return{recommendationId:e.recommendationId,rank:e.index,presentationDetails:N({name:e.title,imageUrl:e.imageUrl,badges:null!==(t=e.badges)&&void 0!==t?t:""},(null===(n=e.price)||void 0===n?void 0:n.currency)&&{price:{displayPrice:e.price.displayPrice,currency:e.price.currency}})}},G=function(e,n,t){return{eventType:null!=t?t:"recommendationInteraction",eventName:n,egRecommendationResponseId:e.egRecommendationResponseId,recommendationTitle:e.title,component:e.componentType,componentElement:"thumbnail"}},V=function(e,n){if(e&&e.items[0])return[{schemaName:"allRecommendations",messageContent:P(N({},G(e,"recommendationClicked",n)),{recommendations:[U(e.items[0])]})}]},$=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;if(e){var i=null===(n=e.items)||void 0===n?void 0:n.filter((function(e){return e})).map((function(e){return U(e)})),a=P(N({},G(e,"recommendationSeen",r)),{scroll:t,recommendations:i});return(null==i?void 0:i.length)?[{schemaName:"allRecommendations",messageContent:a}]:void 0}},K=function(){var e=(0,u.useLocalization)().formatText,n={carouselName:"IncentivesCollectionCarousel",itemsVisible:{sm:2,md:3,lg:4,xl:5},pageBy:1,peek:!0,wrapItems:!1,buttonText:{nextButton:e("carousel.item.next"),prevButton:e("carousel.item.prev")}};return r.createElement(r.Fragment,null,r.createElement(l.b,{margin:{block:"three"}},r.createElement(v.b,{animation:!0})),r.createElement(o.E,N({},n),S(Array(6)).map((function(e,n){return r.createElement("div",{key:"incentives-collection-placeholder-card-".concat(n)},r.createElement(d.a,{ratio:d.E.R4_3},r.createElement(v.a,{animation:!0})))}))))},W=(0,i.Ps)(D()),q=(0,i.Ps)(L()),Q=function(e){var n=e.data,t=e.size,i=e.isFullWidth,a=e.onClickHandler,o=e.href,l=e.className,c=e.onClickCapture,s=e.inverse,u=n.__typename,m=n.primary,d=n.accessibility,v=n.disabled;if(!m)return null;var f=p.E;return"UISecondaryButton"===u?f=y.E:"UITertiaryButton"===u&&(f=b.E),r.createElement(f,{size:t,href:o,isFullWidth:i,onClick:a,disabled:v,className:l,onClickCapture:c,inverse:s},m,r.createElement("span",{className:"is-visually-hidden"},d))};Q.fragment=q,Q.displayName="Button";var J=(0,i.Ps)(j(),W,Q.fragment),X=function(e){var n=e.data,t=e.className,i=e.buttonSize,a=e.buttonIsFullWidth,o=e.buttonClickHandler,l=e.additionalUisPrimeMicroMessages,c=e.visuallyHidden,u=e.multiArmBanditTrack,m=e.inverseButton,d=n.accessibility,v=n.resource,f=n.clickAnalytics,g=n.button,p=n.selectedAnalytics,y=(0,s.m_)(),b=(0,s.Gv)(),I=function(){var e,n,t,r,i,a,o,c,s,m,d,v,g,I,E,C,h,k;p&&y((n=(e=p).event,t=n.eventName,r=n.eventType,i=n.eventVersion,a=n.eventCategory,o=e.payload,c=o.collectionId,s=o.collectionType,m=o.productId,d=o.destinationGeoId,v=o.trackingId,g=o.componentPosition,I=o.componentName,E=o.componentId,C=m?{product_list:[{product_id:m}]}:null,h=d?{destination:{destination_geo_id:d}}:null,k=g||I||E?{additional_context:{user_interface:{component_position:g,component_id:E,component_name:I}}}:null,N({},{event:{event_name:t,event_version:i,event_type:r,event_category:a},incentive:{collection_id:c,collection_type:s.toLowerCase(),incentive_tracking_id:v}},C,h,k))),null==u||u(),f.referrerId&&b(f.referrerId,f.linkName,void 0,l)};return g?r.createElement(Q,{data:g,href:v.value,size:i,isFullWidth:a,className:t,onClickHandler:o,onClickCapture:I,inverse:m}):r.createElement("a",{href:v.value,onClickCapture:I,className:t},r.createElement("span",{className:c?"is-visually-hidden":""},d))};X.displayName="IncentivesActionLink",X.fragment=J;var Y=(0,i.Ps)(T()),Z=function(e){var n=e.data,t=e.dialogKey,i=e.triggerRef,a=n.text,o=n.closeText,l=w((0,h.useDialog)("image-attribution-info-".concat(t)),3),c=l[0],s=l[1],u=l[2];return r.createElement(A.h,{isVisible:c},r.createElement(u,null,r.createElement(k.a,{dialogShow:c,returnFocusOnClose:!0,triggerRef:i},r.createElement(k.b,null,r.createElement(g.c,{theme:"emphasis"},a),r.createElement(k.c,{key:"footer",buttonOne:{onClick:s.closeDialog,text:o,type:"tertiary"}})))))};Z.displayName="IncentivesImageAttributionDialog",Z.fragment=Y;var ee=(0,i.Ps)(R(),Z.fragment),ne=function(e){var n=e.data,t=n.dialog,i=n.dialogTriggerAccessibility,a=r.useMemo((function(){return Math.random().toString(36).substr(2,5)}),[]),o=w((0,h.useDialog)("image-attribution-info-".concat(a)),2)[1],l=r.useRef(null),c=r.useCallback((function(){o.openDialog()}),[o]);return r.createElement(r.Fragment,null,r.createElement(C.E,{onClick:c,theme:"inverse"},r.createElement("button",{type:"button","aria-label":i,ref:l},r.createElement(E.a,{name:"info_outline",size:E.E.SMALL}))),r.createElement(Z,{data:t,dialogKey:a,triggerRef:l}))};ne.displayName="IncentivesImageAttribution",ne.fragment=ee;var te=(0,i.Ps)(B(),ne.fragment),re=function(e){var n=e.data,t=n.image,i=n.attribution;return r.createElement(I.d,{type:"relative"},r.createElement(d.a,{imageFit:"cover",ratio:d.E.R16_9,roundcorner:["startstart","startend"]},r.createElement(d.b,{placeholderImage:!0,alt:t.description,src:t.url})),i&&r.createElement(I.d,{type:"absolute",position:{bottom:"three",right:"three"}},r.createElement(ne,{data:i})))};re.displayName="IncentivesCollectionCarouselImage",re.fragment=te;var ie=(0,i.Ps)(H(),X.fragment,re.fragment),ae=function(e){var n=e.data,t=e.collectionEventingDetails,i=n.incentivesImage,a=n.title,o=n.subtitle,l=n.actionLink;return r.createElement(f.i,{border:!0},r.createElement(f.q,null,r.createElement(X,{visuallyHidden:!0,data:l,additionalUisPrimeMicroMessages:V(t,"Interaction")})),r.createElement(re,{data:i}),r.createElement(f.m,null,r.createElement(g.E,{overflow:"truncate",tag:"h4",size:7},a),o&&r.createElement(g.c,{spacing:"half",overflow:"truncate",size:200},o)))};ae.fragment=ie,ae.displayName="IncentivesContentItem";var oe=(0,i.Ps)(M()),le=function(e){var n=e.data;return r.createElement(r.Fragment,null,r.createElement(g.E,{size:4},n.title),n.subtitle&&r.createElement(g.c,{spacing:"two"},n.subtitle))};le.fragment=oe,le.displayName="IncentivesCollectionCarouselHeader";var ce=(0,i.Ps)(z(),le.fragment,ae.fragment),se={margin:{blockstart:"three"}},ue=function(e){var n,t=e.inputs,i=e.skipSsr,d=e.showPlaceholder,v=void 0===d||d,f=e.itemsVisibleForTracking,g=void 0===f?{}:f,p=(0,c.v)().context,y=(0,u.useLocalization)().formatText,b=g.small,I=void 0===b?3:b,E=g.medium,C=void 0===E?4:E,h=g.large,k=void 0===h?5:h,A=g.extraLarge,O=void 0===A?6:A,_=(0,s.Gv)(),w=(0,m.lS)({viewSizes:m.wl}),x=r.useRef(0),S=r.useMemo((function(){switch(w){case m.wl.SMALL:return I;case m.wl.MEDIUM:return C;case m.wl.LARGE:return k;default:return O}}),[w,I,C,k,O]),F=P(N({},t),{context:p}),D=(0,a.a)(ce,{variables:F,ssr:!i}),L=D.data,j=D.error;if(D.loading&&v)return r.createElement(K,null);if(j||!(null==L||null===(n=L.incentivesCollection)||void 0===n?void 0:n.collectionItems)||0===L.incentivesCollection.collectionItems.length)return null;var T,R,B=L.incentivesCollection,H=B.collectionHeader,M=B.collectionItems,z=B.egRecommendationResponseId,U=B.impressionAnalytics,G=function(e,n){if(z){var t,r=M.slice(e,e+n).map((function(n,t){return function(e,n){return e.recommendationId?{index:n,recommendationId:e.recommendationId,title:e.title,imageUrl:e.incentivesImage.image.url,badges:null,price:null}:null}(n,t+e)}));return{egRecommendationResponseId:z,title:null!==(t=null==H?void 0:H.title)&&void 0!==t?t:null,componentType:"carousel",items:r}}},V={carouselName:"IncentivesCollectionCarousel",carouselHeaderText:null==H?void 0:H.title,itemViewedCallback:function(e){if(e>=S){var n=$(G(e,1),x.current<e?"right":"left","Impression");if(n){var t=M[e].actionLink.impressionAnalytics,r=t.referrerId,i=t.linkName;_(r,i,void 0,n)}x.current=e}},itemsVisible:{sm:2,md:3,lg:4,xl:5},pageBy:1,peek:!0,buttonText:{nextButton:y("carousel.item.next"),prevButton:y("carousel.item.prev")}};return r.createElement(r.Fragment,null,H&&r.createElement(le,{data:H}),r.createElement(s.Pt,{trackOnce:!0,referrerId:null!==(T=null==U?void 0:U.referrerId)&&void 0!==T?T:"INC.CAROUSEL",linkName:null!==(R=null==U?void 0:U.event)&&void 0!==R?R:"Incentives carousel impression event",additionalUisPrimeMicroMessages:$(G(0,S),"","Impression")},r.createElement(l.b,{margin:se.margin},r.createElement(o.E,N({},V),M.map((function(e,n){return r.createElement(ae,{key:"collection-carousel-content-item-".concat(n),data:e,collectionEventingDetails:G(n,1)})}))))))};ue.displayName="sharedui-IncentivesCollectionCarousel"}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/shared-ui-retail-incentives-collection-carousel.558ad58f3c2f298a220b.js.map