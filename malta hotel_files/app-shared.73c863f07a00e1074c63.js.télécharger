/*@license For license information please refer to app-shared.licenses.txt*/
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2397],{68962:function(e){function t(e){e=e||{},this.startDate=e.startDate,this.endDate=e.endDate,this.siblingMonths=e.siblingMonths,this.weekNumbers=e.weekNumbers,this.weekStart=e.weekStart,void 0===this.weekStart&&(this.weekStart=0)}t.prototype.getCalendar=function(e,n){var r=new Date(Date.UTC(e,n,1,0,0,0,0));e=r.getUTCFullYear(),n=r.getUTCMonth();for(var i,a,o,s,l,c=[],u=r.getUTCDay(),d=-(7-this.weekStart+u)%7,h=t.daysInMonth(e,n),p=(h-d)%7,f=t.daysInMonth(e,n-1),m=d,g=h-m+(0!=p?7-p:0)+d,v=null;m<g;)i=((m<1?7+m:m)+u)%7,(a=m+1)<1||a>h?this.siblingMonths?(a<1?(l=e,(s=n-1)<0&&(s=11,l--),a=f+a):a>h&&(l=e,(s=n+1)>11&&(s=0,l++),a=m-h+1),o={day:a,weekDay:i,month:s,year:l,siblingMonth:!0}):o=!1:o={day:a,weekDay:i,month:n,year:e},o&&this.weekNumbers&&(null===v?v=t.calculateWeekNumber(o):1==i&&52==v?v=1:1==i&&v++,o.weekNumber=v),o&&this.startDate&&(o.selected=this.isDateSelected(o)),c.push(o),m++;return c},t.prototype.isDateSelected=function(e){return e.year==this.startDate.year&&e.month==this.startDate.month&&e.day==this.startDate.day||!!this.endDate&&(!(e.year==this.startDate.year&&e.month==this.startDate.month&&e.day<this.startDate.day)&&(!(e.year==this.endDate.year&&e.month==this.endDate.month&&e.day>this.endDate.day)&&(!(e.year==this.startDate.year&&e.month<this.startDate.month)&&(!(e.year==this.endDate.year&&e.month>this.endDate.month)&&(!(e.year<this.startDate.year)&&!(e.year>this.endDate.year))))))},t.prototype.setStartDate=function(e){this.startDate=e},t.prototype.setEndDate=function(e){this.endDate=e},t.prototype.setDate=t.prototype.setStartDate,t.diff=function(e,t){return e=new Date(Date.UTC(e.year,e.month,e.day,0,0,0,0)),t=new Date(Date.UTC(t.year,t.month,t.day,0,0,0,0)),Math.ceil((e.getTime()-t.getTime())/864e5)},t.interval=function(e,n){return Math.abs(t.diff(e,n))+1},t.compare=function(e,t){if("object"!=typeof e||"object"!=typeof t||null===e||null===t)throw new TypeError("dates must be objects");return e.year<t.year?-1:e.year>t.year?1:e.month<t.month?-1:e.month>t.month?1:e.day<t.day?-1:e.day>t.day?1:0},t.daysInMonth=function(e,t){return new Date(e,t+1,0).getDate()},t.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},t.calculateWeekNumber=function(e){var t=new Date(Date.UTC(e.year,e.month,e.day,0,0,0,0)),n=new Date(t.valueOf()),r=(t.getUTCDay()+6)%7;n.setUTCDate(n.getUTCDate()-r+3);var i=n.valueOf();return n.setUTCMonth(0,1),4!=n.getUTCDay()&&n.setUTCMonth(0,1+(4-n.getUTCDay()+7)%7),1+Math.ceil((i-n)/6048e5)},e.exports={Calendar:t}},87864:function(e,t,n){n.d(t,{DU:function(){return l},Nv:function(){return s}});var r=n(38972),i=function(e){return e.type||null},a={library:new Map,onUnsupportedComponent:function(){return null},libraryKeyResolver:i},o=(0,r.createContext)(a);o.displayName="ExperienceTemplateRendererContext";var s=function(e){var t=e.children,n=e.library,a=e.wrapper,s=e.onUnsupportedComponent,l=e.libraryKeyResolver,c=(0,r.useMemo)((function(){return{library:n,wrapper:a,onUnsupportedComponent:s,libraryKeyResolver:l||i}}),[n,a,s,l]);return(0,r.createElement)(o.Provider,{value:c},t)},l=function(e){var t=(0,r.useContext)(o),n=t.library,i=t.wrapper,a=t.onUnsupportedComponent,s=t.libraryKeyResolver,l=e.templateComponents,c=e.wrapper,u=Array.from(n.keys()),d=l.map((function(e,t){var o=e.metadata,l=s(e,u);if(!l)return null;var d=n.get(l);if(!d)return a&&a(l),null;var h=(null==o?void 0:o.id)||t;return i&&c?(0,r.createElement)(i,{key:h,templateComponent:e},(0,r.createElement)(c,{templateComponent:e},(0,r.createElement)(d,{templateComponent:e}))):i?(0,r.createElement)(i,{key:h,templateComponent:e},(0,r.createElement)(d,{templateComponent:e})):c?(0,r.createElement)(c,{key:h,templateComponent:e},(0,r.createElement)(d,{templateComponent:e})):(0,r.createElement)(d,{key:h,templateComponent:e})}));return(0,r.createElement)(r.Fragment,null,d)}},59594:function(e,t){t.__esModule=!0;var n={"[object HTMLCollection]":!0,"[object NodeList]":!0,"[object RadioNodeList]":!0},r={button:!0,fieldset:!0,reset:!0,submit:!0},i={checkbox:!0,radio:!0},a=/^\s+|\s+$/g,o=Array.prototype.slice,s=Object.prototype.toString;function l(e){var t=arguments.length<=1||void 0===arguments[1]?{trim:!1}:arguments[1];if(!e)throw new Error("A form is required by getFormData, was given form="+e);for(var n={},i=void 0,a=[],o={},s=0,l=e.elements.length;s<l;s++){var u=e.elements[s];r[u.type]||u.disabled||(i=u.name||u.id)&&!o[i]&&(a.push(i),o[i]=!0)}for(s=0,l=a.length;s<l;s++){var d=c(e,i=a[s],t);null!=d&&(n[i]=d)}return n}function c(e,t){var r=arguments.length<=2||void 0===arguments[2]?{trim:!1}:arguments[2];if(!e)throw new Error("A form is required by getNamedFormElementData, was given form="+e);if(!t&&"[object String]"!==s.call(t))throw new Error("A form element name is required by getNamedFormElementData, was given elementName="+t);var i=e.elements[t];if(!i||i.disabled)return null;if(!n[s.call(i)])return u(i,r.trim);for(var a=[],o=!0,l=0,c=i.length;l<c;l++)if(!i[l].disabled){o&&"radio"!==i[l].type&&(o=!1);var d=u(i[l],r.trim);null!=d&&(a=a.concat(d))}return o&&1===a.length?a[0]:a.length>0?a:null}function u(e,t){var n=null,r=e.type;if("select-one"===r)return e.options.length&&(n=e.options[e.selectedIndex].value),n;if("select-multiple"===r){n=[];for(var s=0,l=e.options.length;s<l;s++)e.options[s].selected&&n.push(e.options[s].value);return 0===n.length&&(n=null),n}return"file"===r&&"files"in e?(e.multiple?0===(n=o.call(e.files)).length&&(n=null):n=e.files[0],n):(i[r]?e.checked&&(n=e.value):n=t?e.value.replace(a,""):e.value,n)}l.getNamedFormElementData=c,t.default=l,e.exports=t.default},6616:function(e,t,n){var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=Object.prototype.toString,h=Math.max,p=Math.min,f=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=a.test(e);return n||o.test(e)?s(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var r,i,a,o,s,l,c=0,u=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function E(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=a}function b(){var e=f();if(E(e))return S(e);s=setTimeout(b,function(e){var n=t-(e-l);return d?p(n,a-(e-c)):n}(e))}function S(e){return s=void 0,v&&r?y(e):(r=i=void 0,o)}function T(){var e=f(),n=E(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return c=e,s=setTimeout(b,t),u?y(e):o}(l);if(d)return s=setTimeout(b,t),y(l)}return void 0===s&&(s=setTimeout(b,t)),o}return t=g(t)||0,m(n)&&(u=!!n.leading,a=(d="maxWait"in n)?h(g(n.maxWait)||0,t):a,v="trailing"in n?!!n.trailing:v),T.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},T.flush=function(){return void 0===s?o:S(f())},T}},45550:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,c=32,u=64,d=128,h=256,p=1/0,f=9007199254740991,m=NaN,g=4294967295,v=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",h]],y="[object Arguments]",E="[object Array]",b="[object Boolean]",S="[object Date]",T="[object Error]",R="[object Function]",_="[object GeneratorFunction]",O="[object Map]",I="[object Number]",C="[object Object]",x="[object Promise]",D="[object RegExp]",P="[object Set]",w="[object String]",k="[object Symbol]",A="[object WeakMap]",L="[object ArrayBuffer]",N="[object DataView]",j="[object Float32Array]",M="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",B="[object Int32Array]",H="[object Uint8Array]",$="[object Uint8ClampedArray]",G="[object Uint16Array]",V="[object Uint32Array]",z=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Q=RegExp(q.source),Z=RegExp(K.source),X=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,fe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,Ee=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Te=/($^)/,Re=/['\n\r\u2028\u2029\\]/g,_e="\\ud800-\\udfff",Oe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ie="\\u2700-\\u27bf",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",xe="A-Z\\xc0-\\xd6\\xd8-\\xde",De="\\ufe0e\\ufe0f",Pe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",we="['’]",ke="["+_e+"]",Ae="["+Pe+"]",Le="["+Oe+"]",Ne="\\d+",je="["+Ie+"]",Me="["+Ce+"]",Fe="[^"+_e+Pe+Ne+Ie+Ce+xe+"]",Ue="\\ud83c[\\udffb-\\udfff]",Be="[^"+_e+"]",He="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",Ge="["+xe+"]",Ve="\\u200d",ze="(?:"+Me+"|"+Fe+")",We="(?:"+Ge+"|"+Fe+")",Ye="(?:['’](?:d|ll|m|re|s|t|ve))?",qe="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Le+"|"+Ue+")"+"?",Qe="["+De+"]?",Ze=Qe+Ke+("(?:"+Ve+"(?:"+[Be,He,$e].join("|")+")"+Qe+Ke+")*"),Xe="(?:"+[je,He,$e].join("|")+")"+Ze,Je="(?:"+[Be+Le+"?",Le,He,$e,ke].join("|")+")",et=RegExp(we,"g"),tt=RegExp(Le,"g"),nt=RegExp(Ue+"(?="+Ue+")|"+Je+Ze,"g"),rt=RegExp([Ge+"?"+Me+"+"+Ye+"(?="+[Ae,Ge,"$"].join("|")+")",We+"+"+qe+"(?="+[Ae,Ge+ze,"$"].join("|")+")",Ge+"?"+ze+"+"+Ye,Ge+"+"+qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Xe].join("|"),"g"),it=RegExp("["+Ve+_e+Oe+De+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,lt={};lt[j]=lt[M]=lt[F]=lt[U]=lt[B]=lt[H]=lt[$]=lt[G]=lt[V]=!0,lt[y]=lt[E]=lt[L]=lt[b]=lt[N]=lt[S]=lt[T]=lt[R]=lt[O]=lt[I]=lt[C]=lt[D]=lt[P]=lt[w]=lt[A]=!1;var ct={};ct[y]=ct[E]=ct[L]=ct[N]=ct[b]=ct[S]=ct[j]=ct[M]=ct[F]=ct[U]=ct[B]=ct[O]=ct[I]=ct[C]=ct[D]=ct[P]=ct[w]=ct[k]=ct[H]=ct[$]=ct[G]=ct[V]=!0,ct[T]=ct[R]=ct[A]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dt=parseFloat,ht=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ft="object"==typeof self&&self&&self.Object===Object&&self,mt=pt||ft||Function("return this")(),gt=t&&!t.nodeType&&t,vt=gt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===gt,Et=yt&&pt.process,bt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||Et&&Et.binding&&Et.binding("util")}catch(t){}}(),St=bt&&bt.isArrayBuffer,Tt=bt&&bt.isDate,Rt=bt&&bt.isMap,_t=bt&&bt.isRegExp,Ot=bt&&bt.isSet,It=bt&&bt.isTypedArray;function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function xt(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Dt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Pt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function wt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function kt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function At(e,t){return!!(null==e?0:e.length)&&Gt(e,t,0)>-1}function Lt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function jt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Mt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function Ft(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=Yt("length");function Ht(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function $t(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Gt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):$t(e,zt,n)}function Vt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function zt(e){return e!=e}function Wt(e,t){var n=null==e?0:e.length;return n?Qt(e,t)/n:m}function Yt(e){return function(t){return null==t?i:t[e]}}function qt(e){return function(t){return null==e?i:e[t]}}function Kt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Qt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Zt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Xt(e){return e?e.slice(0,gn(e)+1).replace(oe,""):e}function Jt(e){return function(t){return e(t)}}function en(e,t){return Nt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Gt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Gt(t,e[n],0)>-1;);return n}var an=qt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),on=qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ut[e]}function ln(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Bt(e)}function mn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var vn=qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n,r=(t=null==t?mt:yn.defaults(mt.Object(),t,yn.pick(mt,ot))).Array,se=t.Date,_e=t.Error,Oe=t.Function,Ie=t.Math,Ce=t.Object,xe=t.RegExp,De=t.String,Pe=t.TypeError,we=r.prototype,ke=Oe.prototype,Ae=Ce.prototype,Le=t["__core-js_shared__"],Ne=ke.toString,je=Ae.hasOwnProperty,Me=0,Fe=(n=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ue=Ae.toString,Be=Ne.call(Ce),He=mt._,$e=xe("^"+Ne.call(je).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=yt?t.Buffer:i,Ve=t.Symbol,ze=t.Uint8Array,We=Ge?Ge.allocUnsafe:i,Ye=un(Ce.getPrototypeOf,Ce),qe=Ce.create,Ke=Ae.propertyIsEnumerable,Qe=we.splice,Ze=Ve?Ve.isConcatSpreadable:i,Xe=Ve?Ve.iterator:i,Je=Ve?Ve.toStringTag:i,nt=function(){try{var e=ha(Ce,"defineProperty");return e({},"",{}),e}catch(t){}}(),it=t.clearTimeout!==mt.clearTimeout&&t.clearTimeout,ut=se&&se.now!==mt.Date.now&&se.now,pt=t.setTimeout!==mt.setTimeout&&t.setTimeout,ft=Ie.ceil,gt=Ie.floor,vt=Ce.getOwnPropertySymbols,Et=Ge?Ge.isBuffer:i,bt=t.isFinite,Bt=we.join,qt=un(Ce.keys,Ce),En=Ie.max,bn=Ie.min,Sn=se.now,Tn=t.parseInt,Rn=Ie.random,_n=we.reverse,On=ha(t,"DataView"),In=ha(t,"Map"),Cn=ha(t,"Promise"),xn=ha(t,"Set"),Dn=ha(t,"WeakMap"),Pn=ha(Ce,"create"),wn=Dn&&new Dn,kn={},An=Fa(On),Ln=Fa(In),Nn=Fa(Cn),jn=Fa(xn),Mn=Fa(Dn),Fn=Ve?Ve.prototype:i,Un=Fn?Fn.valueOf:i,Bn=Fn?Fn.toString:i;function Hn(e){if(ns(e)&&!zo(e)&&!(e instanceof zn)){if(e instanceof Vn)return e;if(je.call(e,"__wrapped__"))return Ua(e)}return new Vn(e)}var $n=function(){function e(){}return function(t){if(!ts(t))return{};if(qe)return qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Gn(){}function Vn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Qn(e){var t=this.__data__=new Yn(e);this.size=t.size}function Zn(e,t){var n=zo(e),r=!n&&Vo(e),i=!n&&!r&&Ko(e),a=!n&&!r&&!i&&us(e),o=n||r||i||a,s=o?Zt(e.length,De):[],l=s.length;for(var c in e)!t&&!je.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ea(c,l))||s.push(c);return s}function Xn(e){var t=e.length;return t?e[Kr(0,t-1)]:i}function Jn(e,t){return Na(Pi(e),lr(t,0,e.length))}function er(e){return Na(Pi(e))}function tr(e,t,n){(n!==i&&!Ho(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];je.call(e,t)&&Ho(r,n)&&(n!==i||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Ho(e[n][0],t))return n;return-1}function ir(e,t,n,r){return pr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ar(e,t){return e&&wi(t,ks(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var n=-1,a=t.length,o=r(a),s=null==e;++n<a;)o[n]=s?i:Cs(e,t[n]);return o}function lr(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function cr(e,t,n,r,a,o){var s,l=1&t,c=2&t,u=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!ts(e))return e;var d=zo(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&je.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Pi(e,s)}else{var h=ma(e),p=h==R||h==_;if(Ko(e))return _i(e,l);if(h==C||h==y||p&&!a){if(s=c||p?{}:va(e),!l)return c?function(e,t){return wi(e,fa(e),t)}(e,function(e,t){return e&&wi(t,As(t),e)}(s,e)):function(e,t){return wi(e,pa(e),t)}(e,ar(s,e))}else{if(!ct[h])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case L:return Oi(e);case b:case S:return new r(+e);case N:return function(e,t){var n=t?Oi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case j:case M:case F:case U:case B:case H:case $:case G:case V:return Ii(e,n);case O:return new r;case I:case w:return new r(e);case D:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case P:return new r;case k:return i=e,Un?Ce(Un.call(i)):{}}var i}(e,h,l)}}o||(o=new Qn);var f=o.get(e);if(f)return f;o.set(e,s),ss(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,o))})):rs(e)&&e.forEach((function(r,i){s.set(i,cr(r,t,n,i,e,o))}));var m=d?i:(u?c?aa:ia:c?As:ks)(e);return Dt(m||e,(function(r,i){m&&(r=e[i=r]),nr(s,i,cr(r,t,n,i,e,o))})),s}function ur(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ce(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new Pe(a);return wa((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,a=At,o=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=Nt(t,Jt(n))),r?(a=Lt,o=!1):t.length>=200&&(a=tn,o=!1,t=new Kn(t));e:for(;++i<s;){var u=e[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,o&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else a(t,d,r)||l.push(u)}return l}Hn.templateSettings={escape:X,evaluate:J,interpolate:ee,variable:"",imports:{_:Hn}},Hn.prototype=Gn.prototype,Hn.prototype.constructor=Hn,Vn.prototype=$n(Gn.prototype),Vn.prototype.constructor=Vn,zn.prototype=$n(Gn.prototype),zn.prototype.constructor=zn,Wn.prototype.clear=function(){this.__data__=Pn?Pn(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(Pn){var n=t[e];return n===o?i:n}return je.call(t,e)?t[e]:i},Wn.prototype.has=function(e){var t=this.__data__;return Pn?t[e]!==i:je.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Pn&&t===i?o:t,this},Yn.prototype.clear=function(){this.__data__=[],this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Qe.call(t,n,1),--this.size,!0)},Yn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Yn.prototype.has=function(e){return rr(this.__data__,e)>-1},Yn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(In||Yn),string:new Wn}},qn.prototype.delete=function(e){var t=ua(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return ua(this,e).get(e)},qn.prototype.has=function(e){return ua(this,e).has(e)},qn.prototype.set=function(e,t){var n=ua(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,o),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Qn.prototype.clear=function(){this.__data__=new Yn,this.size=0},Qn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Qn.prototype.get=function(e){return this.__data__.get(e)},Qn.prototype.has=function(e){return this.__data__.has(e)},Qn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Yn){var r=n.__data__;if(!In||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var pr=Li(Sr),fr=Li(Tr,!0);function mr(e,t){var n=!0;return pr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(l===i?s==s&&!cs(s):n(s,l)))var l=s,c=o}return c}function vr(e,t){var n=[];return pr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ya),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):jt(i,s):r||(i[i.length]=s)}return i}var Er=Ni(),br=Ni(!0);function Sr(e,t){return e&&Er(e,t,ks)}function Tr(e,t){return e&&br(e,t,ks)}function Rr(e,t){return kt(t,(function(t){return Xo(e[t])}))}function _r(e,t){for(var n=0,r=(t=bi(t,e)).length;null!=e&&n<r;)e=e[Ma(t[n++])];return n&&n==r?e:i}function Or(e,t,n){var r=t(e);return zo(e)?r:jt(r,n(e))}function Ir(e){return null==e?e===i?"[object Undefined]":"[object Null]":Je&&Je in Ce(e)?function(e){var t=je.call(e,Je),n=e[Je];try{e[Je]=i;var r=!0}catch(o){}var a=Ue.call(e);r&&(t?e[Je]=n:delete e[Je]);return a}(e):function(e){return Ue.call(e)}(e)}function Cr(e,t){return e>t}function xr(e,t){return null!=e&&je.call(e,t)}function Dr(e,t){return null!=e&&t in Ce(e)}function Pr(e,t,n){for(var a=n?Lt:At,o=e[0].length,s=e.length,l=s,c=r(s),u=1/0,d=[];l--;){var h=e[l];l&&t&&(h=Nt(h,Jt(t))),u=bn(h.length,u),c[l]=!n&&(t||o>=120&&h.length>=120)?new Kn(l&&h):i}h=e[0];var p=-1,f=c[0];e:for(;++p<o&&d.length<u;){var m=h[p],g=t?t(m):m;if(m=n||0!==m?m:0,!(f?tn(f,g):a(d,g,n))){for(l=s;--l;){var v=c[l];if(!(v?tn(v,g):a(e[l],g,n)))continue e}f&&f.push(g),d.push(m)}}return d}function wr(e,t,n){var r=null==(e=xa(e,t=bi(t,e)))?e:e[Ma(Qa(t))];return null==r?i:Ct(r,e,n)}function kr(e){return ns(e)&&Ir(e)==y}function Ar(e,t,n,r,a){return e===t||(null==e||null==t||!ns(e)&&!ns(t)?e!=e&&t!=t:function(e,t,n,r,a,o){var s=zo(e),l=zo(t),c=s?E:ma(e),u=l?E:ma(t),d=(c=c==y?C:c)==C,h=(u=u==y?C:u)==C,p=c==u;if(p&&Ko(e)){if(!Ko(t))return!1;s=!0,d=!1}if(p&&!d)return o||(o=new Qn),s||us(e)?na(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case N:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!a(new ze(e),new ze(t)));case b:case S:case I:return Ho(+e,+t);case T:return e.name==t.name&&e.message==t.message;case D:case w:return e==t+"";case O:var s=cn;case P:var l=1&r;if(s||(s=hn),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=na(s(e),s(t),r,i,a,o);return o.delete(e),u;case k:if(Un)return Un.call(e)==Un.call(t)}return!1}(e,t,c,n,r,a,o);if(!(1&n)){var f=d&&je.call(e,"__wrapped__"),m=h&&je.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,v=m?t.value():t;return o||(o=new Qn),a(g,v,n,r,o)}}if(!p)return!1;return o||(o=new Qn),function(e,t,n,r,a,o){var s=1&n,l=ia(e),c=l.length,u=ia(t),d=u.length;if(c!=d&&!s)return!1;var h=c;for(;h--;){var p=l[h];if(!(s?p in t:je.call(t,p)))return!1}var f=o.get(e),m=o.get(t);if(f&&m)return f==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);var v=s;for(;++h<c;){var y=e[p=l[h]],E=t[p];if(r)var b=s?r(E,y,p,t,e,o):r(y,E,p,e,t,o);if(!(b===i?y===E||a(y,E,n,r,o):b)){g=!1;break}v||(v="constructor"==p)}if(g&&!v){var S=e.constructor,T=t.constructor;S==T||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof T&&T instanceof T||(g=!1)}return o.delete(e),o.delete(t),g}(e,t,n,r,a,o)}(e,t,n,r,Ar,a))}function Lr(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Ce(e);a--;){var l=n[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){var c=(l=n[a])[0],u=e[c],d=l[1];if(s&&l[2]){if(u===i&&!(c in e))return!1}else{var h=new Qn;if(r)var p=r(u,d,c,e,t,h);if(!(p===i?Ar(d,u,3,r,h):p))return!1}}return!0}function Nr(e){return!(!ts(e)||(t=e,Fe&&Fe in t))&&(Xo(e)?$e:ye).test(Fa(e));var t}function jr(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?zo(e)?$r(e[0],e[1]):Hr(e):pl(e)}function Mr(e){if(!_a(e))return qt(e);var t=[];for(var n in Ce(e))je.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!ts(e))return function(e){var t=[];if(null!=e)for(var n in Ce(e))t.push(n);return t}(e);var t=_a(e),n=[];for(var r in e)("constructor"!=r||!t&&je.call(e,r))&&n.push(r);return n}function Ur(e,t){return e<t}function Br(e,t){var n=-1,i=Yo(e)?r(e.length):[];return pr(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function Hr(e){var t=da(e);return 1==t.length&&t[0][2]?Ia(t[0][0],t[0][1]):function(n){return n===e||Lr(n,e,t)}}function $r(e,t){return Sa(e)&&Oa(t)?Ia(Ma(e),t):function(n){var r=Cs(n,e);return r===i&&r===t?xs(n,e):Ar(t,r,3)}}function Gr(e,t,n,r,a){e!==t&&Er(t,(function(o,s){if(a||(a=new Qn),ts(o))!function(e,t,n,r,a,o,s){var l=Da(e,n),c=Da(t,n),u=s.get(c);if(u)return void tr(e,n,u);var d=o?o(l,c,n+"",e,t,s):i,h=d===i;if(h){var p=zo(c),f=!p&&Ko(c),m=!p&&!f&&us(c);d=c,p||f||m?zo(l)?d=l:qo(l)?d=Pi(l):f?(h=!1,d=_i(c,!0)):m?(h=!1,d=Ii(c,!0)):d=[]:as(c)||Vo(c)?(d=l,Vo(l)?d=ys(l):ts(l)&&!Xo(l)||(d=va(c))):h=!1}h&&(s.set(c,d),a(d,c,r,o,s),s.delete(c));tr(e,n,d)}(e,t,s,n,Gr,r,a);else{var l=r?r(Da(e,s),o,s+"",e,t,a):i;l===i&&(l=o),tr(e,s,l)}}),As)}function Vr(e,t){var n=e.length;if(n)return Ea(t+=t<0?n:0,n)?e[t]:i}function zr(e,t,n){t=t.length?Nt(t,(function(e){return zo(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e})):[il];var r=-1;t=Nt(t,Jt(ca()));var i=Br(e,(function(e,n,i){var a=Nt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var l=Ci(i[r],a[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=_r(e,o);n(s,o)&&ei(a,bi(o,e),s)}return a}function Yr(e,t,n,r){var i=r?Vt:Gt,a=-1,o=t.length,s=e;for(e===t&&(t=Pi(t)),n&&(s=Nt(e,Jt(n)));++a<o;)for(var l=0,c=t[a],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Qe.call(s,l,1),Qe.call(e,l,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;Ea(i)?Qe.call(e,i,1):hi(e,i)}}return e}function Kr(e,t){return e+gt(Rn()*(t-e+1))}function Qr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Zr(e,t){return ka(Ca(e,t,il),e+"")}function Xr(e){return Xn(Hs(e))}function Jr(e,t){var n=Hs(e);return Na(n,lr(t,0,n.length))}function ei(e,t,n,r){if(!ts(e))return e;for(var a=-1,o=(t=bi(t,e)).length,s=o-1,l=e;null!=l&&++a<o;){var c=Ma(t[a]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var d=l[c];(u=r?r(d,c,l):i)===i&&(u=ts(d)?d:Ea(t[a+1])?[]:{})}nr(l,c,u),l=l[c]}return e}var ti=wn?function(e,t){return wn.set(e,t),e}:il,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ri(e){return Na(Hs(e))}function ii(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=r(a);++i<a;)o[i]=e[i+t];return o}function ai(e,t){var n;return pr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!cs(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return si(e,t,il,n)}function si(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!=t,l=null===t,c=cs(t),u=t===i;a<o;){var d=gt((a+o)/2),h=n(e[d]),p=h!==i,f=null===h,m=h==h,g=cs(h);if(s)var v=r||m;else v=u?m&&(r||p):l?m&&p&&(r||!f):c?m&&p&&!f&&(r||!g):!f&&!g&&(r?h<=t:h<t);v?a=d+1:o=d}return bn(o,4294967294)}function li(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Ho(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function ci(e){return"number"==typeof e?e:cs(e)?m:+e}function ui(e){if("string"==typeof e)return e;if(zo(e))return Nt(e,ui)+"";if(cs(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t,n){var r=-1,i=At,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=Lt;else if(a>=200){var c=t?null:Qi(e);if(c)return hn(c);o=!1,i=tn,l=new Kn}else l=t?[]:s;e:for(;++r<a;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,o&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else i(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}function hi(e,t){return null==(e=xa(e,t=bi(t,e)))||delete e[Ma(Qa(t))]}function pi(e,t,n,r){return ei(e,t,n(_r(e,t)),r)}function fi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function mi(e,t){var n=e;return n instanceof zn&&(n=n.value()),Mt(t,(function(e,t){return t.func.apply(t.thisArg,jt([e],t.args))}),n)}function gi(e,t,n){var i=e.length;if(i<2)return i?di(e[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=e[a],l=-1;++l<i;)l!=a&&(o[a]=hr(o[a]||s,e[l],t,n));return di(yr(o,1),t,n)}function vi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var l=r<o?t[r]:i;n(s,e[r],l)}return s}function yi(e){return qo(e)?e:[]}function Ei(e){return"function"==typeof e?e:il}function bi(e,t){return zo(e)?e:Sa(e,t)?[e]:ja(Es(e))}var Si=Zr;function Ti(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Ri=it||function(e){return mt.clearTimeout(e)};function _i(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function Oi(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function Ii(e,t){var n=t?Oi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ci(e,t){if(e!==t){var n=e!==i,r=null===e,a=e==e,o=cs(e),s=t!==i,l=null===t,c=t==t,u=cs(t);if(!l&&!u&&!o&&e>t||o&&s&&c&&!l&&!u||r&&s&&c||!n&&c||!a)return 1;if(!r&&!o&&!u&&e<t||u&&n&&a&&!r&&!o||l&&n&&a||!s&&a||!c)return-1}return 0}function xi(e,t,n,i){for(var a=-1,o=e.length,s=n.length,l=-1,c=t.length,u=En(o-s,0),d=r(c+u),h=!i;++l<c;)d[l]=t[l];for(;++a<s;)(h||a<o)&&(d[n[a]]=e[a]);for(;u--;)d[l++]=e[a++];return d}function Di(e,t,n,i){for(var a=-1,o=e.length,s=-1,l=n.length,c=-1,u=t.length,d=En(o-l,0),h=r(d+u),p=!i;++a<d;)h[a]=e[a];for(var f=a;++c<u;)h[f+c]=t[c];for(;++s<l;)(p||a<o)&&(h[f+n[s]]=e[a++]);return h}function Pi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function wi(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var l=t[o],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),a?or(n,l,c):nr(n,l,c)}return n}function ki(e,t){return function(n,r){var i=zo(n)?xt:ir,a=t?t():{};return i(n,e,ca(r,2),a)}}function Ai(e){return Zr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&ba(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Ce(t);++r<a;){var l=n[r];l&&e(t,l,r,o)}return t}))}function Li(e,t){return function(n,r){if(null==n)return n;if(!Yo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Ce(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Ni(e){return function(t,n,r){for(var i=-1,a=Ce(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}function ji(e){return function(t){var n=ln(t=Es(t))?mn(t):i,r=n?n[0]:t.charAt(0),a=n?Ti(n,1).join(""):t.slice(1);return r[e]()+a}}function Mi(e){return function(t){return Mt(Xs(Vs(t).replace(et,"")),e,"")}}function Fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$n(e.prototype),r=e.apply(n,t);return ts(r)?r:n}}function Ui(e){return function(t,n,r){var a=Ce(t);if(!Yo(t)){var o=ca(n,3);t=ks(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function Bi(e){return ra((function(t){var n=t.length,r=n,o=Vn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Pe(a);if(o&&!l&&"wrapper"==sa(s))var l=new Vn([],!0)}for(r=l?r:n;++r<n;){var c=sa(s=t[r]),u="wrapper"==c?oa(s):i;l=u&&Ta(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[sa(u[0])].apply(l,u[3]):1==s.length&&Ta(s)?l[c]():l.thru(s)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&zo(r))return l.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Hi(e,t,n,a,o,s,l,c,u,h){var p=t&d,f=1&t,m=2&t,g=24&t,v=512&t,y=m?i:Fi(e);return function d(){for(var E=arguments.length,b=r(E),S=E;S--;)b[S]=arguments[S];if(g)var T=la(d),R=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,T);if(a&&(b=xi(b,a,o,g)),s&&(b=Di(b,s,l,g)),E-=R,g&&E<h){var _=dn(b,T);return qi(e,t,Hi,d.placeholder,n,b,_,c,u,h-E)}var O=f?n:this,I=m?O[e]:e;return E=b.length,c?b=function(e,t){var n=e.length,r=bn(t.length,n),a=Pi(e);for(;r--;){var o=t[r];e[r]=Ea(o,n)?a[o]:i}return e}(b,c):v&&E>1&&b.reverse(),p&&u<E&&(b.length=u),this&&this!==mt&&this instanceof d&&(I=y||Fi(I)),I.apply(O,b)}}function $i(e,t){return function(n,r){return function(e,t,n,r){return Sr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Gi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ui(n),r=ui(r)):(n=ci(n),r=ci(r)),a=e(n,r)}return a}}function Vi(e){return ra((function(t){return t=Nt(t,Jt(ca())),Zr((function(n){var r=this;return e(t,(function(e){return Ct(e,r,n)}))}))}))}function zi(e,t){var n=(t=t===i?" ":ui(t)).length;if(n<2)return n?Qr(t,e):t;var r=Qr(t,ft(e/fn(t)));return ln(t)?Ti(mn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,n,a){return a&&"number"!=typeof a&&ba(t,n,a)&&(n=a=i),t=fs(t),n===i?(n=t,t=0):n=fs(n),function(e,t,n,i){for(var a=-1,o=En(ft((t-e)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=e,e+=n;return s}(t,n,a=a===i?t<n?1:-1:fs(a),e)}}function Yi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vs(t),n=vs(n)),e(t,n)}}function qi(e,t,n,r,a,o,s,l,d,h){var p=8&t;t|=p?c:u,4&(t&=~(p?u:c))||(t&=-4);var f=[e,t,a,p?o:i,p?s:i,p?i:o,p?i:s,l,d,h],m=n.apply(i,f);return Ta(e)&&Pa(m,f),m.placeholder=r,Aa(m,e,t)}function Ki(e){var t=Ie[e];return function(e,n){if(e=vs(e),(n=null==n?0:bn(ms(n),292))&&bt(e)){var r=(Es(e)+"e").split("e");return+((r=(Es(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Qi=xn&&1/hn(new xn([,-0]))[1]==p?function(e){return new xn(e)}:cl;function Zi(e){return function(t){var n=ma(t);return n==O?cn(t):n==P?pn(t):function(e,t){return Nt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,n,o,p,f,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Pe(a);var y=o?o.length:0;if(y||(t&=-97,o=p=i),m=m===i?m:En(ms(m),0),g=g===i?g:ms(g),y-=p?p.length:0,t&u){var E=o,b=p;o=p=i}var S=v?i:oa(e),T=[e,t,n,o,p,E,b,f,m,g];if(S&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==d&&8==n||r==d&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?xi(c,l,t[4]):l,e[4]=c?dn(e[3],s):t[4]}(l=t[5])&&(c=e[5],e[5]=c?Di(c,l,t[6]):l,e[6]=c?dn(e[5],s):t[6]);(l=t[7])&&(e[7]=l);r&d&&(e[8]=null==e[8]?t[8]:bn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(T,S),e=T[0],t=T[1],n=T[2],o=T[3],p=T[4],!(g=T[9]=T[9]===i?v?0:e.length:En(T[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)R=8==t||t==l?function(e,t,n){var a=Fi(e);return function o(){for(var s=arguments.length,l=r(s),c=s,u=la(o);c--;)l[c]=arguments[c];var d=s<3&&l[0]!==u&&l[s-1]!==u?[]:dn(l,u);return(s-=d.length)<n?qi(e,t,Hi,o.placeholder,i,l,d,i,i,n-s):Ct(this&&this!==mt&&this instanceof o?a:e,this,l)}}(e,t,g):t!=c&&33!=t||p.length?Hi.apply(i,T):function(e,t,n,i){var a=1&t,o=Fi(e);return function t(){for(var s=-1,l=arguments.length,c=-1,u=i.length,d=r(u+l),h=this&&this!==mt&&this instanceof t?o:e;++c<u;)d[c]=i[c];for(;l--;)d[c++]=arguments[++s];return Ct(h,a?n:this,d)}}(e,t,n,o);else var R=function(e,t,n){var r=1&t,i=Fi(e);return function t(){return(this&&this!==mt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Aa((S?ti:Pa)(R,T),e,t)}function Ji(e,t,n,r){return e===i||Ho(e,Ae[n])&&!je.call(r,n)?t:e}function ea(e,t,n,r,a,o){return ts(e)&&ts(t)&&(o.set(t,e),Gr(e,t,i,ea,o),o.delete(t)),e}function ta(e){return as(e)?i:e}function na(e,t,n,r,a,o){var s=1&n,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=o.get(e),d=o.get(t);if(u&&d)return u==t&&d==e;var h=-1,p=!0,f=2&n?new Kn:i;for(o.set(e,t),o.set(t,e);++h<l;){var m=e[h],g=t[h];if(r)var v=s?r(g,m,h,t,e,o):r(m,g,h,e,t,o);if(v!==i){if(v)continue;p=!1;break}if(f){if(!Ut(t,(function(e,t){if(!tn(f,t)&&(m===e||a(m,e,n,r,o)))return f.push(t)}))){p=!1;break}}else if(m!==g&&!a(m,g,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p}function ra(e){return ka(Ca(e,i,za),e+"")}function ia(e){return Or(e,ks,pa)}function aa(e){return Or(e,As,fa)}var oa=wn?function(e){return wn.get(e)}:cl;function sa(e){for(var t=e.name+"",n=kn[t],r=je.call(kn,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function la(e){return(je.call(Hn,"placeholder")?Hn:e).placeholder}function ca(){var e=Hn.iteratee||al;return e=e===al?jr:e,arguments.length?e(arguments[0],arguments[1]):e}function ua(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function da(e){for(var t=ks(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Oa(i)]}return t}function ha(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Nr(n)?n:i}var pa=vt?function(e){return null==e?[]:(e=Ce(e),kt(vt(e),(function(t){return Ke.call(e,t)})))}:gl,fa=vt?function(e){for(var t=[];e;)jt(t,pa(e)),e=Ye(e);return t}:gl,ma=Ir;function ga(e,t,n){for(var r=-1,i=(t=bi(t,e)).length,a=!1;++r<i;){var o=Ma(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&es(i)&&Ea(o,i)&&(zo(e)||Vo(e))}function va(e){return"function"!=typeof e.constructor||_a(e)?{}:$n(Ye(e))}function ya(e){return zo(e)||Vo(e)||!!(Ze&&e&&e[Ze])}function Ea(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function ba(e,t,n){if(!ts(n))return!1;var r=typeof t;return!!("number"==r?Yo(n)&&Ea(t,n.length):"string"==r&&t in n)&&Ho(n[t],e)}function Sa(e,t){if(zo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ce(t))}function Ta(e){var t=sa(e),n=Hn[t];if("function"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var r=oa(n);return!!r&&e===r[0]}(On&&ma(new On(new ArrayBuffer(1)))!=N||In&&ma(new In)!=O||Cn&&ma(Cn.resolve())!=x||xn&&ma(new xn)!=P||Dn&&ma(new Dn)!=A)&&(ma=function(e){var t=Ir(e),n=t==C?e.constructor:i,r=n?Fa(n):"";if(r)switch(r){case An:return N;case Ln:return O;case Nn:return x;case jn:return P;case Mn:return A}return t});var Ra=Le?Xo:vl;function _a(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)}function Oa(e){return e==e&&!ts(e)}function Ia(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Ce(n)))}}function Ca(e,t,n){return t=En(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=En(i.length-t,0),s=r(o);++a<o;)s[a]=i[t+a];a=-1;for(var l=r(t+1);++a<t;)l[a]=i[a];return l[t]=n(s),Ct(e,this,l)}}function xa(e,t){return t.length<2?e:_r(e,ii(t,0,-1))}function Da(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Pa=La(ti),wa=pt||function(e,t){return mt.setTimeout(e,t)},ka=La(ni);function Aa(e,t,n){var r=t+"";return ka(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Dt(v,(function(n){var r="_."+n[0];t&n[1]&&!At(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function La(e){var t=0,n=0;return function(){var r=Sn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Na(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Kr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var ja=function(e){var t=No(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(pe,"$1"):n||e)})),t}));function Ma(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Fa(e){if(null!=e){try{return Ne.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ua(e){if(e instanceof zn)return e.clone();var t=new Vn(e.__wrapped__,e.__chain__);return t.__actions__=Pi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ba=Zr((function(e,t){return qo(e)?hr(e,yr(t,1,qo,!0)):[]})),Ha=Zr((function(e,t){var n=Qa(t);return qo(n)&&(n=i),qo(e)?hr(e,yr(t,1,qo,!0),ca(n,2)):[]})),$a=Zr((function(e,t){var n=Qa(t);return qo(n)&&(n=i),qo(e)?hr(e,yr(t,1,qo,!0),i,n):[]}));function Ga(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=En(r+i,0)),$t(e,ca(t,3),i)}function Va(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ms(n),a=n<0?En(r+a,0):bn(a,r-1)),$t(e,ca(t,3),a,!0)}function za(e){return(null==e?0:e.length)?yr(e,1):[]}function Wa(e){return e&&e.length?e[0]:i}var Ya=Zr((function(e){var t=Nt(e,yi);return t.length&&t[0]===e[0]?Pr(t):[]})),qa=Zr((function(e){var t=Qa(e),n=Nt(e,yi);return t===Qa(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Pr(n,ca(t,2)):[]})),Ka=Zr((function(e){var t=Qa(e),n=Nt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Pr(n,i,t):[]}));function Qa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Za=Zr(Xa);function Xa(e,t){return e&&e.length&&t&&t.length?Yr(e,t):e}var Ja=ra((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return qr(e,Nt(t,(function(e){return Ea(e,n)?+e:e})).sort(Ci)),r}));function eo(e){return null==e?e:_n.call(e)}var to=Zr((function(e){return di(yr(e,1,qo,!0))})),no=Zr((function(e){var t=Qa(e);return qo(t)&&(t=i),di(yr(e,1,qo,!0),ca(t,2))})),ro=Zr((function(e){var t=Qa(e);return t="function"==typeof t?t:i,di(yr(e,1,qo,!0),i,t)}));function io(e){if(!e||!e.length)return[];var t=0;return e=kt(e,(function(e){if(qo(e))return t=En(e.length,t),!0})),Zt(t,(function(t){return Nt(e,Yt(t))}))}function ao(e,t){if(!e||!e.length)return[];var n=io(e);return null==t?n:Nt(n,(function(e){return Ct(t,i,e)}))}var oo=Zr((function(e,t){return qo(e)?hr(e,t):[]})),so=Zr((function(e){return gi(kt(e,qo))})),lo=Zr((function(e){var t=Qa(e);return qo(t)&&(t=i),gi(kt(e,qo),ca(t,2))})),co=Zr((function(e){var t=Qa(e);return t="function"==typeof t?t:i,gi(kt(e,qo),i,t)})),uo=Zr(io);var ho=Zr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ao(e,n)}));function po(e){var t=Hn(e);return t.__chain__=!0,t}function fo(e,t){return t(e)}var mo=ra((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof zn&&Ea(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:fo,args:[a],thisArg:i}),new Vn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var go=ki((function(e,t,n){je.call(e,n)?++e[n]:or(e,n,1)}));var vo=Ui(Ga),yo=Ui(Va);function Eo(e,t){return(zo(e)?Dt:pr)(e,ca(t,3))}function bo(e,t){return(zo(e)?Pt:fr)(e,ca(t,3))}var So=ki((function(e,t,n){je.call(e,n)?e[n].push(t):or(e,n,[t])}));var To=Zr((function(e,t,n){var i=-1,a="function"==typeof t,o=Yo(e)?r(e.length):[];return pr(e,(function(e){o[++i]=a?Ct(t,e,n):wr(e,t,n)})),o})),Ro=ki((function(e,t,n){or(e,n,t)}));function _o(e,t){return(zo(e)?Nt:Br)(e,ca(t,3))}var Oo=ki((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Io=Zr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ba(e,t[0],t[1])?t=[]:n>2&&ba(t[0],t[1],t[2])&&(t=[t[0]]),zr(e,yr(t,1),[])})),Co=ut||function(){return mt.Date.now()};function xo(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Xi(e,d,i,i,i,i,t)}function Do(e,t){var n;if("function"!=typeof t)throw new Pe(a);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Po=Zr((function(e,t,n){var r=1;if(n.length){var i=dn(n,la(Po));r|=c}return Xi(e,r,t,n,i)})),wo=Zr((function(e,t,n){var r=3;if(n.length){var i=dn(n,la(wo));r|=c}return Xi(t,r,e,n,i)}));function ko(e,t,n){var r,o,s,l,c,u,d=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new Pe(a);function m(t){var n=r,a=o;return r=o=i,d=t,l=e.apply(a,n)}function g(e){var n=e-u;return u===i||n>=t||n<0||p&&e-d>=s}function v(){var e=Co();if(g(e))return y(e);c=wa(v,function(e){var n=t-(e-u);return p?bn(n,s-(e-d)):n}(e))}function y(e){return c=i,f&&r?m(e):(r=o=i,l)}function E(){var e=Co(),n=g(e);if(r=arguments,o=this,u=e,n){if(c===i)return function(e){return d=e,c=wa(v,t),h?m(e):l}(u);if(p)return Ri(c),c=wa(v,t),m(u)}return c===i&&(c=wa(v,t)),l}return t=vs(t)||0,ts(n)&&(h=!!n.leading,s=(p="maxWait"in n)?En(vs(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f),E.cancel=function(){c!==i&&Ri(c),d=0,r=u=o=c=i},E.flush=function(){return c===i?l:y(Co())},E}var Ao=Zr((function(e,t){return dr(e,1,t)})),Lo=Zr((function(e,t,n){return dr(e,vs(t)||0,n)}));function No(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(No.Cache||qn),n}function jo(e){if("function"!=typeof e)throw new Pe(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}No.Cache=qn;var Mo=Si((function(e,t){var n=(t=1==t.length&&zo(t[0])?Nt(t[0],Jt(ca())):Nt(yr(t,1),Jt(ca()))).length;return Zr((function(r){for(var i=-1,a=bn(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Ct(e,this,r)}))})),Fo=Zr((function(e,t){var n=dn(t,la(Fo));return Xi(e,c,i,t,n)})),Uo=Zr((function(e,t){var n=dn(t,la(Uo));return Xi(e,u,i,t,n)})),Bo=ra((function(e,t){return Xi(e,h,i,i,i,t)}));function Ho(e,t){return e===t||e!=e&&t!=t}var $o=Yi(Cr),Go=Yi((function(e,t){return e>=t})),Vo=kr(function(){return arguments}())?kr:function(e){return ns(e)&&je.call(e,"callee")&&!Ke.call(e,"callee")},zo=r.isArray,Wo=St?Jt(St):function(e){return ns(e)&&Ir(e)==L};function Yo(e){return null!=e&&es(e.length)&&!Xo(e)}function qo(e){return ns(e)&&Yo(e)}var Ko=Et||vl,Qo=Tt?Jt(Tt):function(e){return ns(e)&&Ir(e)==S};function Zo(e){if(!ns(e))return!1;var t=Ir(e);return t==T||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Xo(e){if(!ts(e))return!1;var t=Ir(e);return t==R||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Jo(e){return"number"==typeof e&&e==ms(e)}function es(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ns(e){return null!=e&&"object"==typeof e}var rs=Rt?Jt(Rt):function(e){return ns(e)&&ma(e)==O};function is(e){return"number"==typeof e||ns(e)&&Ir(e)==I}function as(e){if(!ns(e)||Ir(e)!=C)return!1;var t=Ye(e);if(null===t)return!0;var n=je.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==Be}var os=_t?Jt(_t):function(e){return ns(e)&&Ir(e)==D};var ss=Ot?Jt(Ot):function(e){return ns(e)&&ma(e)==P};function ls(e){return"string"==typeof e||!zo(e)&&ns(e)&&Ir(e)==w}function cs(e){return"symbol"==typeof e||ns(e)&&Ir(e)==k}var us=It?Jt(It):function(e){return ns(e)&&es(e.length)&&!!lt[Ir(e)]};var ds=Yi(Ur),hs=Yi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Yo(e))return ls(e)?mn(e):Pi(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=ma(e);return(t==O?cn:t==P?hn:Hs)(e)}function fs(e){return e?(e=vs(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ms(e){var t=fs(e),n=t%1;return t==t?n?t-n:t:0}function gs(e){return e?lr(ms(e),0,g):0}function vs(e){if("number"==typeof e)return e;if(cs(e))return m;if(ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=ve.test(e);return n||Ee.test(e)?ht(e.slice(2),n?2:8):ge.test(e)?m:+e}function ys(e){return wi(e,As(e))}function Es(e){return null==e?"":ui(e)}var bs=Ai((function(e,t){if(_a(t)||Yo(t))wi(t,ks(t),e);else for(var n in t)je.call(t,n)&&nr(e,n,t[n])})),Ss=Ai((function(e,t){wi(t,As(t),e)})),Ts=Ai((function(e,t,n,r){wi(t,As(t),e,r)})),Rs=Ai((function(e,t,n,r){wi(t,ks(t),e,r)})),_s=ra(sr);var Os=Zr((function(e,t){e=Ce(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&ba(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=As(o),l=-1,c=s.length;++l<c;){var u=s[l],d=e[u];(d===i||Ho(d,Ae[u])&&!je.call(e,u))&&(e[u]=o[u])}return e})),Is=Zr((function(e){return e.push(i,ea),Ct(Ns,i,e)}));function Cs(e,t,n){var r=null==e?i:_r(e,t);return r===i?n:r}function xs(e,t){return null!=e&&ga(e,t,Dr)}var Ds=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=n}),tl(il)),Ps=$i((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),je.call(e,t)?e[t].push(n):e[t]=[n]}),ca),ws=Zr(wr);function ks(e){return Yo(e)?Zn(e):Mr(e)}function As(e){return Yo(e)?Zn(e,!0):Fr(e)}var Ls=Ai((function(e,t,n){Gr(e,t,n)})),Ns=Ai((function(e,t,n,r){Gr(e,t,n,r)})),js=ra((function(e,t){var n={};if(null==e)return n;var r=!1;t=Nt(t,(function(t){return t=bi(t,e),r||(r=t.length>1),t})),wi(e,aa(e),n),r&&(n=cr(n,7,ta));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Ms=ra((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return xs(e,n)}))}(e,t)}));function Fs(e,t){if(null==e)return{};var n=Nt(aa(e),(function(e){return[e]}));return t=ca(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var Us=Zi(ks),Bs=Zi(As);function Hs(e){return null==e?[]:en(e,ks(e))}var $s=Mi((function(e,t,n){return t=t.toLowerCase(),e+(n?Gs(t):t)}));function Gs(e){return Zs(Es(e).toLowerCase())}function Vs(e){return(e=Es(e))&&e.replace(Se,an).replace(tt,"")}var zs=Mi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ws=Mi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ys=ji("toLowerCase");var qs=Mi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ks=Mi((function(e,t,n){return e+(n?" ":"")+Zs(t)}));var Qs=Mi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Zs=ji("toUpperCase");function Xs(e,t,n){return e=Es(e),(t=n?i:t)===i?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var Js=Zr((function(e,t){try{return Ct(e,i,t)}catch(n){return Zo(n)?n:new _e(n)}})),el=ra((function(e,t){return Dt(t,(function(t){t=Ma(t),or(e,t,Po(e[t],e))})),e}));function tl(e){return function(){return e}}var nl=Bi(),rl=Bi(!0);function il(e){return e}function al(e){return jr("function"==typeof e?e:cr(e,1))}var ol=Zr((function(e,t){return function(n){return wr(n,e,t)}})),sl=Zr((function(e,t){return function(n){return wr(e,n,t)}}));function ll(e,t,n){var r=ks(t),i=Rr(t,r);null!=n||ts(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Rr(t,ks(t)));var a=!(ts(n)&&"chain"in n&&!n.chain),o=Xo(e);return Dt(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Pi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,jt([this.value()],arguments))})})),e}function cl(){}var ul=Vi(Nt),dl=Vi(wt),hl=Vi(Ut);function pl(e){return Sa(e)?Yt(Ma(e)):function(e){return function(t){return _r(t,e)}}(e)}var fl=Wi(),ml=Wi(!0);function gl(){return[]}function vl(){return!1}var yl=Gi((function(e,t){return e+t}),0),El=Ki("ceil"),bl=Gi((function(e,t){return e/t}),1),Sl=Ki("floor");var Tl,Rl=Gi((function(e,t){return e*t}),1),_l=Ki("round"),Ol=Gi((function(e,t){return e-t}),0);return Hn.after=function(e,t){if("function"!=typeof t)throw new Pe(a);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},Hn.ary=xo,Hn.assign=bs,Hn.assignIn=Ss,Hn.assignInWith=Ts,Hn.assignWith=Rs,Hn.at=_s,Hn.before=Do,Hn.bind=Po,Hn.bindAll=el,Hn.bindKey=wo,Hn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return zo(e)?e:[e]},Hn.chain=po,Hn.chunk=function(e,t,n){t=(n?ba(e,t,n):t===i)?1:En(ms(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,l=r(ft(a/t));o<a;)l[s++]=ii(e,o,o+=t);return l},Hn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Hn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return jt(zo(n)?Pi(n):[n],yr(t,1))},Hn.cond=function(e){var t=null==e?0:e.length,n=ca();return e=t?Nt(e,(function(e){if("function"!=typeof e[1])throw new Pe(a);return[n(e[0]),e[1]]})):[],Zr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Ct(i[0],this,n))return Ct(i[1],this,n)}}))},Hn.conforms=function(e){return function(e){var t=ks(e);return function(n){return ur(n,e,t)}}(cr(e,1))},Hn.constant=tl,Hn.countBy=go,Hn.create=function(e,t){var n=$n(e);return null==t?n:ar(n,t)},Hn.curry=function e(t,n,r){var a=Xi(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Hn.curryRight=function e(t,n,r){var a=Xi(t,l,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Hn.debounce=ko,Hn.defaults=Os,Hn.defaultsDeep=Is,Hn.defer=Ao,Hn.delay=Lo,Hn.difference=Ba,Hn.differenceBy=Ha,Hn.differenceWith=$a,Hn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ms(t))<0?0:t,r):[]},Hn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ms(t)))<0?0:t):[]},Hn.dropRightWhile=function(e,t){return e&&e.length?fi(e,ca(t,3),!0,!0):[]},Hn.dropWhile=function(e,t){return e&&e.length?fi(e,ca(t,3),!0):[]},Hn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&ba(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ms(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ms(r))<0&&(r+=a),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Hn.filter=function(e,t){return(zo(e)?kt:vr)(e,ca(t,3))},Hn.flatMap=function(e,t){return yr(_o(e,t),1)},Hn.flatMapDeep=function(e,t){return yr(_o(e,t),p)},Hn.flatMapDepth=function(e,t,n){return n=n===i?1:ms(n),yr(_o(e,t),n)},Hn.flatten=za,Hn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,p):[]},Hn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:ms(t)):[]},Hn.flip=function(e){return Xi(e,512)},Hn.flow=nl,Hn.flowRight=rl,Hn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Hn.functions=function(e){return null==e?[]:Rr(e,ks(e))},Hn.functionsIn=function(e){return null==e?[]:Rr(e,As(e))},Hn.groupBy=So,Hn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Hn.intersection=Ya,Hn.intersectionBy=qa,Hn.intersectionWith=Ka,Hn.invert=Ds,Hn.invertBy=Ps,Hn.invokeMap=To,Hn.iteratee=al,Hn.keyBy=Ro,Hn.keys=ks,Hn.keysIn=As,Hn.map=_o,Hn.mapKeys=function(e,t){var n={};return t=ca(t,3),Sr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Hn.mapValues=function(e,t){var n={};return t=ca(t,3),Sr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Hn.matches=function(e){return Hr(cr(e,1))},Hn.matchesProperty=function(e,t){return $r(e,cr(t,1))},Hn.memoize=No,Hn.merge=Ls,Hn.mergeWith=Ns,Hn.method=ol,Hn.methodOf=sl,Hn.mixin=ll,Hn.negate=jo,Hn.nthArg=function(e){return e=ms(e),Zr((function(t){return Vr(t,e)}))},Hn.omit=js,Hn.omitBy=function(e,t){return Fs(e,jo(ca(t)))},Hn.once=function(e){return Do(2,e)},Hn.orderBy=function(e,t,n,r){return null==e?[]:(zo(t)||(t=null==t?[]:[t]),zo(n=r?i:n)||(n=null==n?[]:[n]),zr(e,t,n))},Hn.over=ul,Hn.overArgs=Mo,Hn.overEvery=dl,Hn.overSome=hl,Hn.partial=Fo,Hn.partialRight=Uo,Hn.partition=Oo,Hn.pick=Ms,Hn.pickBy=Fs,Hn.property=pl,Hn.propertyOf=function(e){return function(t){return null==e?i:_r(e,t)}},Hn.pull=Za,Hn.pullAll=Xa,Hn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,ca(n,2)):e},Hn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Yr(e,t,i,n):e},Hn.pullAt=Ja,Hn.range=fl,Hn.rangeRight=ml,Hn.rearg=Bo,Hn.reject=function(e,t){return(zo(e)?kt:vr)(e,jo(ca(t,3)))},Hn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ca(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return qr(e,i),n},Hn.rest=function(e,t){if("function"!=typeof e)throw new Pe(a);return Zr(e,t=t===i?t:ms(t))},Hn.reverse=eo,Hn.sampleSize=function(e,t,n){return t=(n?ba(e,t,n):t===i)?1:ms(t),(zo(e)?Jn:Jr)(e,t)},Hn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Hn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Hn.shuffle=function(e){return(zo(e)?er:ri)(e)},Hn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&ba(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===i?r:ms(n)),ii(e,t,n)):[]},Hn.sortBy=Io,Hn.sortedUniq=function(e){return e&&e.length?li(e):[]},Hn.sortedUniqBy=function(e,t){return e&&e.length?li(e,ca(t,2)):[]},Hn.split=function(e,t,n){return n&&"number"!=typeof n&&ba(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=Es(e))&&("string"==typeof t||null!=t&&!os(t))&&!(t=ui(t))&&ln(e)?Ti(mn(e),0,n):e.split(t,n):[]},Hn.spread=function(e,t){if("function"!=typeof e)throw new Pe(a);return t=null==t?0:En(ms(t),0),Zr((function(n){var r=n[t],i=Ti(n,0,t);return r&&jt(i,r),Ct(e,this,i)}))},Hn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Hn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ms(t))<0?0:t):[]},Hn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ms(t)))<0?0:t,r):[]},Hn.takeRightWhile=function(e,t){return e&&e.length?fi(e,ca(t,3),!1,!0):[]},Hn.takeWhile=function(e,t){return e&&e.length?fi(e,ca(t,3)):[]},Hn.tap=function(e,t){return t(e),e},Hn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Pe(a);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ko(e,t,{leading:r,maxWait:t,trailing:i})},Hn.thru=fo,Hn.toArray=ps,Hn.toPairs=Us,Hn.toPairsIn=Bs,Hn.toPath=function(e){return zo(e)?Nt(e,Ma):cs(e)?[e]:Pi(ja(Es(e)))},Hn.toPlainObject=ys,Hn.transform=function(e,t,n){var r=zo(e),i=r||Ko(e)||us(e);if(t=ca(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:ts(e)&&Xo(a)?$n(Ye(e)):{}}return(i?Dt:Sr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Hn.unary=function(e){return xo(e,1)},Hn.union=to,Hn.unionBy=no,Hn.unionWith=ro,Hn.uniq=function(e){return e&&e.length?di(e):[]},Hn.uniqBy=function(e,t){return e&&e.length?di(e,ca(t,2)):[]},Hn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?di(e,i,t):[]},Hn.unset=function(e,t){return null==e||hi(e,t)},Hn.unzip=io,Hn.unzipWith=ao,Hn.update=function(e,t,n){return null==e?e:pi(e,t,Ei(n))},Hn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:pi(e,t,Ei(n),r)},Hn.values=Hs,Hn.valuesIn=function(e){return null==e?[]:en(e,As(e))},Hn.without=oo,Hn.words=Xs,Hn.wrap=function(e,t){return Fo(Ei(t),e)},Hn.xor=so,Hn.xorBy=lo,Hn.xorWith=co,Hn.zip=uo,Hn.zipObject=function(e,t){return vi(e||[],t||[],nr)},Hn.zipObjectDeep=function(e,t){return vi(e||[],t||[],ei)},Hn.zipWith=ho,Hn.entries=Us,Hn.entriesIn=Bs,Hn.extend=Ss,Hn.extendWith=Ts,ll(Hn,Hn),Hn.add=yl,Hn.attempt=Js,Hn.camelCase=$s,Hn.capitalize=Gs,Hn.ceil=El,Hn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=vs(n))==n?n:0),t!==i&&(t=(t=vs(t))==t?t:0),lr(vs(e),t,n)},Hn.clone=function(e){return cr(e,4)},Hn.cloneDeep=function(e){return cr(e,5)},Hn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:i)},Hn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:i)},Hn.conformsTo=function(e,t){return null==t||ur(e,t,ks(t))},Hn.deburr=Vs,Hn.defaultTo=function(e,t){return null==e||e!=e?t:e},Hn.divide=bl,Hn.endsWith=function(e,t,n){e=Es(e),t=ui(t);var r=e.length,a=n=n===i?r:lr(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Hn.eq=Ho,Hn.escape=function(e){return(e=Es(e))&&Z.test(e)?e.replace(K,on):e},Hn.escapeRegExp=function(e){return(e=Es(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Hn.every=function(e,t,n){var r=zo(e)?wt:mr;return n&&ba(e,t,n)&&(t=i),r(e,ca(t,3))},Hn.find=vo,Hn.findIndex=Ga,Hn.findKey=function(e,t){return Ht(e,ca(t,3),Sr)},Hn.findLast=yo,Hn.findLastIndex=Va,Hn.findLastKey=function(e,t){return Ht(e,ca(t,3),Tr)},Hn.floor=Sl,Hn.forEach=Eo,Hn.forEachRight=bo,Hn.forIn=function(e,t){return null==e?e:Er(e,ca(t,3),As)},Hn.forInRight=function(e,t){return null==e?e:br(e,ca(t,3),As)},Hn.forOwn=function(e,t){return e&&Sr(e,ca(t,3))},Hn.forOwnRight=function(e,t){return e&&Tr(e,ca(t,3))},Hn.get=Cs,Hn.gt=$o,Hn.gte=Go,Hn.has=function(e,t){return null!=e&&ga(e,t,xr)},Hn.hasIn=xs,Hn.head=Wa,Hn.identity=il,Hn.includes=function(e,t,n,r){e=Yo(e)?e:Hs(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=En(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Gt(e,t,n)>-1},Hn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=En(r+i,0)),Gt(e,t,i)},Hn.inRange=function(e,t,n){return t=fs(t),n===i?(n=t,t=0):n=fs(n),function(e,t,n){return e>=bn(t,n)&&e<En(t,n)}(e=vs(e),t,n)},Hn.invoke=ws,Hn.isArguments=Vo,Hn.isArray=zo,Hn.isArrayBuffer=Wo,Hn.isArrayLike=Yo,Hn.isArrayLikeObject=qo,Hn.isBoolean=function(e){return!0===e||!1===e||ns(e)&&Ir(e)==b},Hn.isBuffer=Ko,Hn.isDate=Qo,Hn.isElement=function(e){return ns(e)&&1===e.nodeType&&!as(e)},Hn.isEmpty=function(e){if(null==e)return!0;if(Yo(e)&&(zo(e)||"string"==typeof e||"function"==typeof e.splice||Ko(e)||us(e)||Vo(e)))return!e.length;var t=ma(e);if(t==O||t==P)return!e.size;if(_a(e))return!Mr(e).length;for(var n in e)if(je.call(e,n))return!1;return!0},Hn.isEqual=function(e,t){return Ar(e,t)},Hn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Ar(e,t,i,n):!!r},Hn.isError=Zo,Hn.isFinite=function(e){return"number"==typeof e&&bt(e)},Hn.isFunction=Xo,Hn.isInteger=Jo,Hn.isLength=es,Hn.isMap=rs,Hn.isMatch=function(e,t){return e===t||Lr(e,t,da(t))},Hn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Lr(e,t,da(t),n)},Hn.isNaN=function(e){return is(e)&&e!=+e},Hn.isNative=function(e){if(Ra(e))throw new _e("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Hn.isNil=function(e){return null==e},Hn.isNull=function(e){return null===e},Hn.isNumber=is,Hn.isObject=ts,Hn.isObjectLike=ns,Hn.isPlainObject=as,Hn.isRegExp=os,Hn.isSafeInteger=function(e){return Jo(e)&&e>=-9007199254740991&&e<=f},Hn.isSet=ss,Hn.isString=ls,Hn.isSymbol=cs,Hn.isTypedArray=us,Hn.isUndefined=function(e){return e===i},Hn.isWeakMap=function(e){return ns(e)&&ma(e)==A},Hn.isWeakSet=function(e){return ns(e)&&"[object WeakSet]"==Ir(e)},Hn.join=function(e,t){return null==e?"":Bt.call(e,t)},Hn.kebabCase=zs,Hn.last=Qa,Hn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ms(n))<0?En(r+a,0):bn(a,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):$t(e,zt,a,!0)},Hn.lowerCase=Ws,Hn.lowerFirst=Ys,Hn.lt=ds,Hn.lte=hs,Hn.max=function(e){return e&&e.length?gr(e,il,Cr):i},Hn.maxBy=function(e,t){return e&&e.length?gr(e,ca(t,2),Cr):i},Hn.mean=function(e){return Wt(e,il)},Hn.meanBy=function(e,t){return Wt(e,ca(t,2))},Hn.min=function(e){return e&&e.length?gr(e,il,Ur):i},Hn.minBy=function(e,t){return e&&e.length?gr(e,ca(t,2),Ur):i},Hn.stubArray=gl,Hn.stubFalse=vl,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=Rl,Hn.nth=function(e,t){return e&&e.length?Vr(e,ms(t)):i},Hn.noConflict=function(){return mt._===this&&(mt._=He),this},Hn.noop=cl,Hn.now=Co,Hn.pad=function(e,t,n){e=Es(e);var r=(t=ms(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return zi(gt(i),n)+e+zi(ft(i),n)},Hn.padEnd=function(e,t,n){e=Es(e);var r=(t=ms(t))?fn(e):0;return t&&r<t?e+zi(t-r,n):e},Hn.padStart=function(e,t,n){e=Es(e);var r=(t=ms(t))?fn(e):0;return t&&r<t?zi(t-r,n)+e:e},Hn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Tn(Es(e).replace(oe,""),t||0)},Hn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ba(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=fs(e),t===i?(t=e,e=0):t=fs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=Rn();return bn(e+a*(t-e+dt("1e-"+((a+"").length-1))),t)}return Kr(e,t)},Hn.reduce=function(e,t,n){var r=zo(e)?Mt:Kt,i=arguments.length<3;return r(e,ca(t,4),n,i,pr)},Hn.reduceRight=function(e,t,n){var r=zo(e)?Ft:Kt,i=arguments.length<3;return r(e,ca(t,4),n,i,fr)},Hn.repeat=function(e,t,n){return t=(n?ba(e,t,n):t===i)?1:ms(t),Qr(Es(e),t)},Hn.replace=function(){var e=arguments,t=Es(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Hn.result=function(e,t,n){var r=-1,a=(t=bi(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Ma(t[r])];o===i&&(r=a,o=n),e=Xo(o)?o.call(e):o}return e},Hn.round=_l,Hn.runInContext=e,Hn.sample=function(e){return(zo(e)?Xn:Xr)(e)},Hn.size=function(e){if(null==e)return 0;if(Yo(e))return ls(e)?fn(e):e.length;var t=ma(e);return t==O||t==P?e.size:Mr(e).length},Hn.snakeCase=qs,Hn.some=function(e,t,n){var r=zo(e)?Ut:ai;return n&&ba(e,t,n)&&(t=i),r(e,ca(t,3))},Hn.sortedIndex=function(e,t){return oi(e,t)},Hn.sortedIndexBy=function(e,t,n){return si(e,t,ca(n,2))},Hn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&Ho(e[r],t))return r}return-1},Hn.sortedLastIndex=function(e,t){return oi(e,t,!0)},Hn.sortedLastIndexBy=function(e,t,n){return si(e,t,ca(n,2),!0)},Hn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(Ho(e[n],t))return n}return-1},Hn.startCase=Ks,Hn.startsWith=function(e,t,n){return e=Es(e),n=null==n?0:lr(ms(n),0,e.length),t=ui(t),e.slice(n,n+t.length)==t},Hn.subtract=Ol,Hn.sum=function(e){return e&&e.length?Qt(e,il):0},Hn.sumBy=function(e,t){return e&&e.length?Qt(e,ca(t,2)):0},Hn.template=function(e,t,n){var r=Hn.templateSettings;n&&ba(e,t,n)&&(t=i),e=Es(e),t=Ts({},t,r,Ji);var a,o,s=Ts({},t.imports,r.imports,Ji),l=ks(s),c=en(s,l),u=0,d=t.interpolate||Te,h="__p += '",p=xe((t.escape||Te).source+"|"+d.source+"|"+(d===ee?fe:Te).source+"|"+(t.evaluate||Te).source+"|$","g"),f="//# sourceURL="+(je.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(p,(function(t,n,r,i,s,l){return r||(r=i),h+=e.slice(u,l).replace(Re,sn),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),h+="';\n";var m=je.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new _e("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(z,""):h).replace(W,"$1").replace(Y,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Js((function(){return Oe(l,f+"return "+h).apply(i,c)}));if(g.source=h,Zo(g))throw g;return g},Hn.times=function(e,t){if((e=ms(e))<1||e>f)return[];var n=g,r=bn(e,g);t=ca(t),e-=g;for(var i=Zt(r,t);++n<e;)t(n);return i},Hn.toFinite=fs,Hn.toInteger=ms,Hn.toLength=gs,Hn.toLower=function(e){return Es(e).toLowerCase()},Hn.toNumber=vs,Hn.toSafeInteger=function(e){return e?lr(ms(e),-9007199254740991,f):0===e?e:0},Hn.toString=Es,Hn.toUpper=function(e){return Es(e).toUpperCase()},Hn.trim=function(e,t,n){if((e=Es(e))&&(n||t===i))return Xt(e);if(!e||!(t=ui(t)))return e;var r=mn(e),a=mn(t);return Ti(r,nn(r,a),rn(r,a)+1).join("")},Hn.trimEnd=function(e,t,n){if((e=Es(e))&&(n||t===i))return e.slice(0,gn(e)+1);if(!e||!(t=ui(t)))return e;var r=mn(e);return Ti(r,0,rn(r,mn(t))+1).join("")},Hn.trimStart=function(e,t,n){if((e=Es(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ui(t)))return e;var r=mn(e);return Ti(r,nn(r,mn(t))).join("")},Hn.truncate=function(e,t){var n=30,r="...";if(ts(t)){var a="separator"in t?t.separator:a;n="length"in t?ms(t.length):n,r="omission"in t?ui(t.omission):r}var o=(e=Es(e)).length;if(ln(e)){var s=mn(e);o=s.length}if(n>=o)return e;var l=n-fn(r);if(l<1)return r;var c=s?Ti(s,0,l).join(""):e.slice(0,l);if(a===i)return c+r;if(s&&(l+=c.length-l),os(a)){if(e.slice(l).search(a)){var u,d=c;for(a.global||(a=xe(a.source,Es(me.exec(a))+"g")),a.lastIndex=0;u=a.exec(d);)var h=u.index;c=c.slice(0,h===i?l:h)}}else if(e.indexOf(ui(a),l)!=l){var p=c.lastIndexOf(a);p>-1&&(c=c.slice(0,p))}return c+r},Hn.unescape=function(e){return(e=Es(e))&&Q.test(e)?e.replace(q,vn):e},Hn.uniqueId=function(e){var t=++Me;return Es(e)+t},Hn.upperCase=Qs,Hn.upperFirst=Zs,Hn.each=Eo,Hn.eachRight=bo,Hn.first=Wa,ll(Hn,(Tl={},Sr(Hn,(function(e,t){je.call(Hn.prototype,t)||(Tl[t]=e)})),Tl),{chain:!1}),Hn.VERSION="4.17.21",Dt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Hn[e].placeholder=Hn})),Dt(["drop","take"],(function(e,t){zn.prototype[e]=function(n){n=n===i?1:En(ms(n),0);var r=this.__filtered__&&!t?new zn(this):this.clone();return r.__filtered__?r.__takeCount__=bn(n,r.__takeCount__):r.__views__.push({size:bn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},zn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Dt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ca(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Dt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");zn.prototype[e]=function(){return this[n](1).value()[0]}})),Dt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(il)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=Zr((function(e,t){return"function"==typeof e?new zn(this):this.map((function(n){return wr(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(jo(ca(e)))},zn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(g)},Sr(zn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Hn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Hn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,l=t instanceof zn,c=s[0],u=l||zo(t),d=function(e){var t=a.apply(Hn,jt([e],s));return r&&h?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=o&&!h,m=l&&!p;if(!o&&u){t=m?t:new zn(this);var g=e.apply(t,s);return g.__actions__.push({func:fo,args:[d],thisArg:i}),new Vn(g,h)}return f&&m?e.apply(this,s):(g=this.thru(d),f?r?g.value()[0]:g.value():g)})})),Dt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=we[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Hn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(zo(i)?i:[],e)}return this[n]((function(n){return t.apply(zo(n)?n:[],e)}))}})),Sr(zn.prototype,(function(e,t){var n=Hn[t];if(n){var r=n.name+"";je.call(kn,r)||(kn[r]=[]),kn[r].push({name:t,func:n})}})),kn[Hi(i,2).name]=[{name:"wrapper",func:i}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=Pi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Pi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Pi(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=zo(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=bn(t,e+o);break;case"takeRight":e=En(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,l=s-o,c=r?s:o-1,u=this.__iteratees__,d=u.length,h=0,p=bn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return mi(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var m=-1,g=e[c+=t];++m<d;){var v=u[m],y=v.iteratee,E=v.type,b=y(g);if(2==E)g=b;else if(!b){if(1==E)continue e;break e}}f[h++]=g}return f},Hn.prototype.at=mo,Hn.prototype.chain=function(){return po(this)},Hn.prototype.commit=function(){return new Vn(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Hn.prototype.plant=function(e){for(var t,n=this;n instanceof Gn;){var r=Ua(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Hn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zn){var t=e;return this.__actions__.length&&(t=new zn(this)),(t=t.reverse()).__actions__.push({func:fo,args:[eo],thisArg:i}),new Vn(t,this.__chain__)}return this.thru(eo)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,Xe&&(Hn.prototype[Xe]=function(){return this}),Hn}();mt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},85961:function(e,t,n){t.be=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(38972),a=d(i),o=d(n(39013)),s=n(97287),l=d(n(62486)),c=d(n(58002)),u=d(n(68476));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=0,g=0,v=0,y=0,E="data-lazyload-listened",b=[],S=[],T=!1;try{var R=Object.defineProperty({},"passive",{get:function(){T=!0}});window.addEventListener("test",null,R)}catch(w){}var _=!!T&&{capture:!1,passive:!0},O=function(e){var t=e.ref;if(t instanceof HTMLElement){var n=(0,l.default)(t),r=e.props.overflow&&n!==t.ownerDocument&&n!==document&&n!==document.documentElement?function(e,t){var n=e.ref,r=void 0,i=void 0,a=void 0,o=void 0;try{var s=t.getBoundingClientRect();r=s.top,i=s.left,a=s.height,o=s.width}catch(w){r=m,i=g,a=y,o=v}var l=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,u=Math.max(r,0),d=Math.max(i,0),h=Math.min(l,r+a)-u,p=Math.min(c,i+o)-d,f=void 0,E=void 0,b=void 0,S=void 0;try{var T=n.getBoundingClientRect();f=T.top,E=T.left,b=T.height,S=T.width}catch(w){f=m,E=g,b=y,S=v}var R=f-u,_=E-d,O=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return R-O[0]<=h&&R+b+O[1]>=0&&_-O[0]<=p&&_+S+O[1]>=0}(e,n):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var n=void 0,r=void 0;try{var i=t.getBoundingClientRect();n=i.top,r=i.height}catch(w){n=m,r=y}var a=window.innerHeight||document.documentElement.clientHeight,o=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return n-o[0]<=a&&n+r+o[1]>=0}(e);r?e.visible||(e.props.once&&S.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},I=function(){S.forEach((function(e){var t=b.indexOf(e);-1!==t&&b.splice(t,1)})),S=[]},C=function(){for(var e=0;e<b.length;++e){var t=b[e];O(t)}I()},x=void 0,D=null,P=function(e){function t(e){h(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.visible=!1,n.setRef=n.setRef.bind(n),n}return f(t,e),r(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var n=void 0!==this.props.debounce&&"throttle"===x||"debounce"===x&&void 0===this.props.debounce;if(n&&((0,s.off)(e,"scroll",D,_),(0,s.off)(window,"resize",D,_),D=null),D||(void 0!==this.props.debounce?(D=(0,c.default)(C,"number"==typeof this.props.debounce?this.props.debounce:300),x="debounce"):void 0!==this.props.throttle?(D=(0,u.default)(C,"number"==typeof this.props.throttle?this.props.throttle:300),x="throttle"):D=C),this.props.overflow){var r=(0,l.default)(this.ref);if(r&&"function"==typeof r.getAttribute){var i=+r.getAttribute(E)+1;1===i&&r.addEventListener("scroll",D,_),r.setAttribute(E,i)}}else if(0===b.length||n){var a=this.props,o=a.scroll,d=a.resize;o&&(0,s.on)(e,"scroll",D,_),d&&(0,s.on)(window,"resize",D,_)}b.push(this),O(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,l.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(E)-1;0===t?(e.removeEventListener("scroll",D,_),e.removeAttribute(E)):e.setAttribute(E,t)}}var n=b.indexOf(this);-1!==n&&b.splice(n,1),0===b.length&&((0,s.off)(window,"resize",D,_),(0,s.off)(window,"scroll",D,_))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.children,r=e.placeholder,i=e.className,o=e.classNamePrefix,s=e.style;return a.default.createElement("div",{className:o+"-wrapper "+i,ref:this.setRef,style:s},this.visible?n:r||a.default.createElement("div",{style:{height:t},className:o+"-placeholder"}))}}]),t}(i.Component);P.propTypes={className:o.default.string,classNamePrefix:o.default.string,once:o.default.bool,height:o.default.oneOfType([o.default.number,o.default.string]),offset:o.default.oneOfType([o.default.number,o.default.arrayOf(o.default.number)]),overflow:o.default.bool,resize:o.default.bool,scroll:o.default.bool,children:o.default.node,throttle:o.default.oneOfType([o.default.number,o.default.bool]),debounce:o.default.oneOfType([o.default.number,o.default.bool]),placeholder:o.default.node,scrollContainer:o.default.oneOfType([o.default.string,o.default.object]),unmountIfInvisible:o.default.bool,style:o.default.object},P.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.ZP=P,t.be=C},58002:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,l=function l(){var c=+new Date-o;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(a,i),r||(a=null,i=null)))};return function(){a=this,i=arguments,o=+new Date;var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(a,i),a=null,i=null),s}}},97287:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n,r){r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,(function(t){n.call(e,t||window.event)}))},t.off=function(e,t,n,r){r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}},62486:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,n=/(scroll|auto)/,r=e;r;){if(!r.parentNode)return e.ownerDocument||document.documentElement;var i=window.getComputedStyle(r),a=i.position,o=i.overflow,s=i["overflow-x"],l=i["overflow-y"];if("static"===a&&t)r=r.parentNode;else{if(n.test(o)&&n.test(s)&&n.test(l))return r;r=r.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},68476:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,i;return t||(t=250),function(){var a=n||this,o=+new Date,s=arguments;r&&o<r+t?(clearTimeout(i),i=setTimeout((function(){r=o,e.apply(a,s)}),t)):(r=o,e.apply(a,s))}}},89956:function(e,t,n){n.d(t,{t:function(){return c}});var r=n(38972),i=n(78096),a=n(52011),o=n(64572),s=n(79900);const l=(e,t)=>n=>{(0,a.updateSearch)({history:e,location:t,newParams:{useRewards:String(n)},replace:!0})},c=r.memo((e=>{var t;const{page:n,context:a,searchResults:c}=(0,o.m)(),{location:u,regionId:d,startDate:h,endDate:p,spacingProps:f}=e,m=(0,i.useLocation)(),g=(0,i.useHistory)(),v=g.location,y=null==c?void 0:c.searchCriteria,E=Boolean(y&&"true"===y.useRewards),b=r.useMemo((()=>Number(d)?{notificationLocation:u,xPageId:n.pageId,optionalContext:{journeyCriterias:[{destination:{regionId:d},dateRange:{start:h,end:p}}]}}:{notificationLocation:u,xPageId:n.pageId}),[u,n.pageId,d,h,p]);if(!n||!n.pageId)return null;let S;if(null===(t=null==a?void 0:a.site)||void 0===t?void 0:t.domain){const{domain:e}=a.site,t=m.search||"";S=`https://${e}${m.pathname||""}${t}`}return u===s.OD.IN_PAGE?r.createElement("div",{"data-stid":"one-key-customer-notification"},r.createElement(s.Yx,{inputs:{xPageId:n.pageId,notificationLocation:u,optionalContext:{referer:S}},skipSsr:!0,switchHandler:l(g,v),useRewards:E,spacingProps:f})):r.createElement("div",{"data-stid":"customer-notification"},r.createElement(s.Yx,{inputs:b,spacingProps:{margin:{blockstart:"two"}}}))}))},81810:function(e,t,n){n.d(t,{H:function(){return s}});var r=n(38972),i=n(85961),a=n(32173),o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const s=r.forwardRef(((e,t)=>{var{children:n,placeholder:s=r.createElement(a.s,null)}=e,l=o(e,["children","placeholder"]);return r.createElement(i.ZP,Object.assign({once:!0,placeholder:s},l,{ref:t}),n)}))},90902:function(e,t,n){n.d(t,{v:function(){return g}});var r=n(38972),i=n(78096),a=n(52011),o=n(26246),s=n(63188),l=n(10309),c=n(64572),u=n(61438),d=n(13498),h=n(55025),p=n(85221),f=n(28711),m=n(19046);const g=r.memo((({analyticsSearch:e,analytics:t,experiment:n})=>{var g;const{multiItem:v,searchResults:y}=(0,c.m)(),E=(0,i.useHistory)(),b=(0,i.useLocation)(),S=(0,p.useLocalization)(),T=null==y?void 0:y.searchCriteria,R=r.useCallback((r=>{e.withPublishingAnalyticsPayload(a.updateSearch,t,n)({history:E,location:b,newParams:{useRewards:String(r)},replace:!0}),setTimeout((()=>(0,s.liveAnnounce)(S.formatText(r?"common.pointsApplied":"common.pointsRemoved"),s.Level.POLITE)),500)}),[t,e,n,E,S,b]);if(!T)return null;const _=(0,l.parse)(E.location.search),O=null==v?void 0:v.getPackageType(),I=(0,d.H9)(_),{mdpdtl:C,gclid:x,mdpcid:D}=I,P=Object.assign(Object.assign(Object.assign({},C&&{metaDistributionPartnersDetails:C}),x&&{googleClickIdentifier:x}),D&&{metaDistributionPartnersChannelIdentifier:D}),w={useLoyaltyCurrency:"true"===T.useRewards,pageLocation:f.Qd.SEARCH_RESULTS,packageType:O&&m.EO[O]||null,packageLOB:O?f.Ko.LODGING:null,marketing:P,lineOfBusiness:O?f.Ko.PACKAGES:f.Ko.LODGING,searchContext:(0,m.__)(T)},k=(null===(g=null==y?void 0:y.propertySearchListings)||void 0===g?void 0:g.some((e=>"TotalPriceReassuranceCard"===e.__typename)))||(0,u.Vf)(y);return r.createElement(h.Experiment,{name:(null==v?void 0:v.isPackageShoppingPath())?"TSDP_OneKey_PB_SRP_Web":"eg_one_key_client"},r.createElement(h.ExperimentControl,null),r.createElement(h.ExperimentVariant,{bucket:1},r.createElement(o.b,{padding:{blockstart:"two"}},r.createElement("div",{"data-stid":"onekeybanner-toggle"},r.createElement(f.nF,{inputs:w,switchHandler:R,showBorder:!0,skipSsr:!0,shouldDisableOneKeyMessagingCard:k})))))}));g.displayName="OneKeyBannerToggle"},56810:function(e,t,n){n.d(t,{UI:function(){return Ze},MS:function(){return Qe}});var r=n(38972),i=n(38591),a=n(55183),o=n(6616),s=n(1415),l=n(52011),c=n(79420),u=n(15954),d=n(83028),h=n(49006),p=n(23783),f=n(51204),m=n(49970),g=n(11474),v=n(54531),y=n(55025),E=n(85221),b=n(93648),S=n(26676),T=n(78096),R=n(59594),_=n(10309),O=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function I(e){var{handleChange:t,onSubmit:n,replace:i,wrappedFormRef:a,"data-stid":o,children:s}=e,l=O(e,["handleChange","onSubmit","replace","wrappedFormRef","data-stid","children"]);const c=(0,T.useHistory)(),u=(e,t,n)=>{const{action:r}=l,i=R(e.target);if(d(i),t&&t(e,i),e.defaultPrevented)return;e.preventDefault();const a=(0,_.stringify)(i),o=(0,_.parse)(c.location.search),s=`${r}?${a}${o.pwaOverlay?`&pwaOverlay=${o.pwaOverlay}`:""}`;n?c.replace(s):c.push(s)},d=e=>{[{key:"infantsInSeats"}].forEach((({key:t})=>{var n,r;const i=e[t];Array.isArray(i)&&(null===(n=e[t])||void 0===n?void 0:n[0])&&(e[t]=null===(r=e[t])||void 0===r?void 0:r[0])}))};return r.createElement("form",Object.assign({},l,{onChange:e=>{"function"==typeof t&&t(e)},onSubmit:e=>{u(e,n,i)},ref:a,"data-stid":o}),s)}I.displayName="Form";var C=n(25652),x=n(26246);function D(e){var t;return t=class extends r.Component{constructor(){super(...arguments),this.updateModel=e=>{const{model:t,updateModelCallback:n}=this.props,r=e&&e.target,i=r&&r.name,a=r&&r.value,o=r&&r.userHistory,s=t&&t[i];t&&i&&(t[i]=a),"function"==typeof n&&n(e),r&&!0===r.track&&this.trackUpdate(i,a,s,o)},this.registerValidator=e=>{const{validators:t}=this.props;t&&t.push(e)}}trackUpdate(e,t,n,r){const{analytics:i}=this.props,a=t===n?".(pristine)":"",o="destination"===e&&r;i&&"function"==typeof i.trackEvent&&(o?i.trackEvent(":RecentSearches",`${e} has changed from Typeahead Recent Searches`,null):i.trackEvent(`.${e}.${t}${a}`,`${e} has changed`,null))}render(){return r.createElement(e,Object.assign({updateModel:this.updateModel,registerValidator:this.registerValidator},this.props))}},t.wrappedComponent=e,t}var P=n(43787),w=n(87251);const k=r.memo((({l10n:e})=>r.createElement(r.Fragment,null,P.MO.map((([,t])=>r.createElement("option",{value:t,key:t},e.formatText(`multiItem.searchWizard.timeSelect.${t}`))))))),A=r.memo((({label:e,id:t,invalid:n,value:i,formattedDate:a=" ",onChange:o,l10n:s,domRef:l=null})=>r.createElement("div",{id:`${t}-label`,className:"multi-item-time-select"},r.createElement(x.b,{padding:{block:"two"}},r.createElement("div",null,r.createElement(m.c,{align:"left",size:300},a))),r.createElement(w.i,{"aria-labelledby":`${t}-label`,icon:"access_time",name:t,label:e,value:i,invalid:n,domRef:l,onChange:o,id:t},r.createElement(k,{l10n:s})))));var L=n(64406);const N=(e="")=>{const t=(0,P.tZ)(e);return 60*t.hour+t.minute},j=D((({updateModel:e,updateModelCallback:t,model:n,validators:i,modelKey:a,registerValidator:o})=>{const s=(0,E.useLocalization)(),l=r.createRef(),[c,u]=r.useState(!1),[d,h]=r.useState(!1),{pickUpTime:p,dropOffTime:g,startDate:v,endDate:y}=n,S=s.formatText("multiItem.searchWizard.dropOffErrorMsg"),T=r.useMemo((()=>new L.E(s)),[s]),R=()=>{const e=_();u(e)};r.useEffect((()=>(R(),()=>R())),[e,v,y,p,g]),r.useEffect((()=>{if(o){o((()=>{const e=_();return u(e),e?{invalidDropOffErrorMessage:S,focus:()=>{var e;return null===(e=null==l?void 0:l.current)||void 0===e?void 0:e.focus()}}:null}))}}),[o]);const _=()=>!(!n.startDate||!n.endDate)&&(!n.pickUpTime||!n.dropOffTime||(n.startDate&&n.endDate?1440*T.getDaysBetween(n.startDate,n.endDate)+N(n.dropOffTime):0)-N(n.pickUpTime)<120),O=e=>{try{return s.formatDateString(e,{skeleton:"MMMd"})||""}catch(t){return""}},I={updateModelCallback:t,model:n,modelKey:a,validators:i,onChange:e,l10n:s},D=r.createElement(f.E,{columns:2,space:"two"},r.createElement(f.a,null,r.createElement(A,Object.assign({label:s.formatText("multiItem.searchWizard.pickUpTime"),id:"pickUpTime",value:null!=p?p:"",formattedDate:O(null!=v?v:"")},I))),r.createElement(f.a,null,r.createElement(A,Object.assign({label:s.formatText("multiItem.searchWizard.dropOffTime"),id:"dropOffTime",invalid:c?S:"",value:null!=g?g:"",formattedDate:O(null!=y?y:""),domRef:l},I))));return r.createElement(f.a,{colSpan:{small:1,medium:3}},r.createElement("div",null,r.createElement(b.l_,null,r.createElement(b.Vk,null,r.createElement(r.Fragment,null,r.createElement(x.b,{margin:{block:"three"}},r.createElement("hr",null)),r.createElement(m.E,{tag:"h4",size:6},r.createElement(E.LocalizedText,{message:"multiItem.searchWizard.mobile.carLabel"})),D)),r.createElement(b.N2,null,r.createElement(C.b,{size:"medium",expandoTitle:s.formatText("multiItem.searchWizard.pickUpDropOffToggle"),isVisible:d,"data-stid":"expand-multiitem-search-wizard-car-fields",onToggle:()=>h(!d)},D)))))}));var M=n(21738);const F=D((({modelKey:e,model:t,updateModel:n})=>{const{formatText:i}=(0,E.useLocalization)();return r.createElement(f.a,{colSpan:"all"},r.createElement("div",null,r.createElement(M.E,{id:e,name:e,value:t.directFlights,checked:"true"===t.directFlights,onChange:t=>{if("function"==typeof n){const{checked:r}=t.target;n({target:{name:e,value:String(r),track:!0}})}}},i("multiItem.searchWizard.directFlightsOnly"))))})),U=(0,u.ClickTracker)(w.i),B=D((0,a.inject)("context")((0,a.observer)((({context:e,modelKey:t,model:n,updateModel:i})=>{var a;const{formatText:o}=(0,E.useLocalization)(),s=r.useMemo((()=>{var t;switch(null===(t=null==e?void 0:e.site)||void 0===t?void 0:t.id){case 500053:return[{label:o("hotels.preferredClass.multiitem.dialog.economy.label"),value:"COACH"},{label:o("hotels.preferredClass.multiitem.dialog.firstClass.label"),value:"FIRST"}];case 500081:case 500084:case 500083:return[{label:o("hotels.preferredClass.multiitem.dialog.economy.label"),value:"COACH"},{label:o("hotels.preferredClass.multiitem.dialog.premiumEconomy.label"),value:"PREMIUM_ECONOMY"},{label:o("hotels.preferredClass.multiitem.dialog.business.label"),value:"BUSINESS"}];default:return[{label:o("hotels.preferredClass.multiitem.dialog.economy.label"),value:"COACH"},{label:o("hotels.preferredClass.multiitem.dialog.premiumEconomy.label"),value:"PREMIUM_ECONOMY"},{label:o("hotels.preferredClass.multiitem.dialog.business.label"),value:"BUSINESS"},{label:o("hotels.preferredClass.multiitem.dialog.firstClass.label"),value:"FIRST"}]}}),[null===(a=null==e?void 0:e.site)||void 0===a?void 0:a.id,o]);return r.createElement(f.a,{colSpan:1},r.createElement("div",null,r.createElement(U,{id:t,name:t,label:o("hotels.preferredClass.multiitem.label"),icon:"airline_seat_recline_extra",onChange:i,value:n.cabinClass,rfrr:"CabinClass",linkName:"Select flight cabin class"},s.map((e=>r.createElement("option",{value:e.value,key:e.label},e.label))))))}))));var H=n(8169),$=n(67684);const G=D((0,a.inject)("analytics","context","multiItem")((0,a.observer)((({context:e,model:t,multiItem:n,maxTypeaheadResults:i=10,analytics:a,essAnalyticsLogger:o,registerValidator:s,updateModel:c})=>{var u;const d=(0,T.useHistory)(),h=(0,T.useLocation)(),{formatText:p}=(0,E.useLocalization)();let m=!0;const g=r.createRef(),v=e=>{a&&"function"==typeof a.trackEvent&&a.trackEvent("DismissOriginTypeahead","Origin Typeahead Modal Dismissed",void 0),e===$.i.DIALOG&&d.goBack(),(null==g?void 0:g.current)&&"function"==typeof g.current.focusTypeaheadInput&&g.current.focusTypeaheadInput()},b=()=>(m=!1,S()),S=()=>{if(m)return;const e=t&&t.origin,n=(null==g?void 0:g.current)&&"function"==typeof g.current.focusTypeaheadInput&&g.current.focusTypeaheadInput;return e?void 0:{text:p("hotels.searchWizard.multiitem.validation.invalidOrigin"),focus:n}};s&&s(b);const R={dest:!1,essLogger:o,guid:e&&e.deviceId,inputId:"hotels-origin",locale:e&&e.locale,maxResults:i,siteId:e&&e.site&&e.site.id,client:"Packages.Search",features:"nearby_airport|ta_hierarchy|consistent_display",lob:"PACKAGES",subLob:null==n?void 0:n.getPackageType(),personalize:!1,regionType:863,packageType:null==n?void 0:n.getPackageType()},_={allowExactMatch:!0,label:p("hotels.searchWizard.multiitem.origin"),icon:"place",invalid:null===(u=S())||void 0===u?void 0:u.text,name:"origin",onClick:e=>{e===$.i.DIALOG&&(0,l.updateSearch)({history:d,location:h,newParams:{pwaDialog:"typeahead"}}),a&&"function"==typeof a.trackEvent&&a.trackEvent(":ChangeOrigin","User searching Origin",{})},onDismiss:v,renderDialog:e=>r.createElement(l.QueryRoute,{query:{pwaDialog:"typeahead"}},r.createElement(H.Layer,{id:"home-typeahead",onDismiss:v},e)),renderType:$.i.ADAPTIVE,stid:"trip-origin",value:t&&t.origin,ref:g,onUpdate:e=>{const{data:t,term:n}=e,r=t&&"USERHISTORY"===t.category;"function"==typeof c&&(m=!1,c({target:{name:"origin",value:n,track:!0,userHistory:r}}))}};return r.createElement(H.ErrorBoundary,{label:"Origin.typeahead"},r.createElement(f.a,null,r.createElement("div",null,r.createElement(y.Experiment,{name:"Remove_POI_and_Neighborhood_from_flight_and_package_typeahead"},r.createElement(y.ExperimentControl,null,r.createElement($.j,Object.assign({},_,{adapter:new $.E(Object.assign({},R))}))),r.createElement(y.ExperimentVariant,{bucket:1},r.createElement($.j,Object.assign({},_,{adapter:new $.E(Object.assign(Object.assign({},R),{regionType:839}))})))))))}))));var V=n(94170),z=n(31158),W=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let Y=class extends r.Component{constructor(e){super(e),this.state={mounted:!1,footerText:void 0,showDatePicker:!1},this.datePickerAnalytics={},this.focusButton=r.createRef(),this.focusDateFieldInput=this.focusDateFieldInput.bind(this),this.onMount=this.onMount.bind(this),this.dismiss=this.dismiss.bind(this),this.open=this.open.bind(this),this.save=this.save.bind(this)}componentDidMount(){const{registerFocusMethod:e,uiPage:t}=this.props;null==e||e("endDate",this.focusDateFieldInput),this.setState({mounted:!0}),this.disposerUiPageOpenDatePickerEvent=(0,i.reaction)((()=>null==t?void 0:t.openNewDatePickerEvent),(e=>{e&&this.setState({showDatePicker:!0})}),{delay:200})}componentWillUnmount(){this.disposerUiPageOpenDatePickerEvent&&this.disposerUiPageOpenDatePickerEvent()}open(e,t){const{history:n,location:r}=this.props;t&&n&&r?(0,l.updateSearch)({history:n,location:r,newParams:{pwaDialog:`datepicker-${e}`}}):(0,z.V)({scrollTo:0}),this.setState({showDatePicker:!0})}save(e,t,n){const{endDate:r,l10n:i,startDate:a,updateModels:o}=this.props,{formatDate:s}=i,l=s(t,{raw:"yyyy-MM-dd"}),c=s(e,{raw:"yyyy-MM-dd"});r===l&&a===c||o(c,l),this.dismiss(n,!1)}focusDateFieldInput(){const{dateFieldProps:e}=this.props,{endInvalid:t,startInvalid:n}=e;n&&(this.focusButton=this.startRef&&this.startRef.current),t&&(this.focusButton=this.endRef&&this.endRef.current),this.focusButton&&"function"==typeof this.focusButton.focus&&this.focusButton.focus()}dismiss(e,t){var n;e&&(null===(n=this.props.history)||void 0===n||n.goBack()),t||this.setState({showDatePicker:!1})}onMount(e,t){this.startRef=e,this.endRef=t}render(){const{analytics:e,buttonText:t,context:n,dateFieldProps:i,endDate:a,midnightBookingOffsetHours:o,numDaysBookableInAdvance:s,startDate:c,l10n:u}=this.props,{mounted:d,showDatePicker:h}=this.state,p=parseInt(V.j[u.getWeekData().firstDay.toUpperCase()],10);this.datePickerAnalytics={closeAnalytics:e.setupTracker(":ChangeDatesClose","Close Date Picker",null),doneAnalytics:e.setupTracker(":ChangeDatesDone","Apply Date Picker",null),nextPageAnalytics:e.setupTracker(":NextMonthClick","Next Month Click",null),previousPageAnalytics:e.setupTracker(":PreviousMonthClick","Previous Month Click",null)};let f=Object.assign(Object.assign({},i),{showDatePicker:h,endAnalytics:e.setupTracker(":ChangeDatesCheckOut","Open Date Picker"),startAnalytics:e.setupTracker(":ChangeDatesCheckIn","Open Date Picker")});d||(f=Object.assign(Object.assign({},f),{endPlaceholder:null==n?void 0:n.localDateFormat,startPlaceholder:null==n?void 0:n.localDateFormat}));const m={analytics:this.datePickerAnalytics,buttonText:t,dateFieldProps:f,daysBookableInAdvance:s,dialogWrapper:(e,t)=>r.createElement(l.QueryRoute,{query:{pwaDialog:`datepicker-${t}`}},r.createElement(H.Layer,{id:`home-datepicker-${t}`,onDismiss:this.dismiss},e)),doubleMonths:!0,endDate:a,footerText:this.state.footerText,midnightBookingOffset:o,onDismissCB:this.dismiss,onMountCB:this.onMount,onOpenCB:this.open,onSubmitCB:this.save,startDate:c,firstDayOfWeek:p};return r.createElement(V.i,Object.assign({},m))}};Y.defaultProps={endDate:"",startDate:"",l10n:null},Y=W([T.withRouter,E.withLocalization,(0,a.inject)("analytics","context","currentHotel","uiPage"),a.observer],Y);var q=n(27490),K=n(7342);const Q=s.ClientLogger.getLoggerWithIdentifier("pwa.component.searchform"),Z=e=>e&&"Invalid Date"!==e.toString(),X=D((({model:e,updateModel:t,registerValidator:n})=>{const{formatText:i}=(0,E.useLocalization)(),[a,o]=r.useState(void 0),[s,l]=r.useState(void 0);null==n||n((()=>g("startDate"))),null==n||n((()=>g("endDate")));const u=e.partialStayStartDate&&Z(new Date(e.partialStayStartDate)),d=e.partialStayEndDate&&Z(new Date(e.partialStayEndDate)),h=u?e.partialStayStartDate:e.startDate,p=d?e.partialStayEndDate:e.endDate,m=e=>{"function"==typeof t&&t(e)},g=t=>{const{partialStayStartDate:n,partialStayEndDate:r,startDate:o,endDate:l,isPartialStay:c}=e;if(!c)return;const u=n||o,d=r||o;if("startDate"===t&&u&&o){const t=new Date(u),n=new Date(o),r="hotels.search.validation.invalidFromDate.text";if(!Z(t)&&!e.isDateless)return{text:i(r),focus:s};if(n.setHours(0,0,0,0),t.setHours(0,0,0,0),t<n)return{text:i("hotels.search.validation.invalidPartialDates.text"),focus:a}}if("endDate"===t&&u&&d&&l){const t=new Date(l),n=new Date(u),r=new Date(d),o="hotels.search.validation.invalidToDate.text";if(!Z(r)&&!e.isDateless)return{text:i(o),focus:a};if(Z(n)){if(r<n)return{text:i("hotels.search.validation.invalidDateRange.text"),focus:a};if(t.setHours(0,0,0,0),r.setHours(0,0,0,0),n.setHours(0,0,0,0),r>t)return{text:i("hotels.search.validation.invalidPartialDates.text"),focus:a}}}},v=g("startDate"),y=g("endDate");Q&&"function"==typeof Q.logEvent&&(v||y)&&h&&p&&((e,t,n,r)=>{Q.logEvent(new c.SystemEvent(c.SystemEventLevel.ERROR,"SEARCH_FORM_PARTIAL_STAY_DATE_RANGE_ERROR"),`${e} | ${t}`,`partialStayStartDate=${n} partialStayEndDate=${r}`,{escalation:K.w.CUSTOMER})})(v,y,h,p);const S={startDate:h,endDate:p,onChange:m,placeholder:i("hotels.search.form.toDate.placeholder"),numDaysBookableInAdvance:q.iA.NUM_OF_DAYS_BOOKABLE_IN_ADVANCE,midnightBookingOffsetHours:q.iA.MIDNIGHT_BOOKING_OFFSET_IN_HOURS,buttonText:i("hotels.roomPicker.doneButton.label"),registerFocusMethod:(e,t)=>{"startDate"===e?l(t):o(t)},isDateless:!1,updateModels:(e,t)=>{m({target:{name:"partialStayStartDate",value:e}}),m({target:{name:"partialStayEndDate",value:t}})}},T={endId:"hotels-partial-stay-check-out",endInvalid:y&&y.text,endLabel:i("hotels.search.form.toDateHyphen.label"),endName:"partialStayEndDate",endPlaceholder:i("hotels.search.form.toDate.placeholder"),onChange:S.onChange,routerLinkWrapper:e=>r.createElement(r.Fragment,null,e),startId:"hotels-partial-stay-check-in",startInvalid:v&&v.text,startLabel:i("hotels.search.form.fromDateHyphen.label"),startName:"partialStayStartDate",startPlaceholder:i("hotels.search.form.toDate.placeholder")};return e.isPartialStay?r.createElement(r.Fragment,null,r.createElement(f.a,{colSpan:{small:1,medium:2}},r.createElement("div",null,r.createElement(Y,Object.assign({rfrr:{end:":ChangePartialDatesCheckOut",start:":ChangePartialDatesCheckIn"},dateFieldProps:T},S)))),r.createElement(b.l_,null,r.createElement(b.N0,null,r.createElement(f.a,null,r.createElement("div",null))))):null})),J=D((({updateModel:e,model:t,modelKey:n})=>{const{formatText:i}=(0,E.useLocalization)();return r.createElement(f.a,{colSpan:"all"},r.createElement("div",null,r.createElement(M.E,{id:n,name:n,value:String(t.isPartialStay),checked:t.isPartialStay,onChange:t=>{if("function"==typeof e){const{checked:n}=t.target;e({target:{name:"partialStay",value:String(n),track:!0}})}}},i("multiItem.searchWizard.partialStay.text"))))})),ee=(e,t)=>{if(te(re(t)))return"dateRange"===e?{colSpan:{small:1,medium:2}}:{colSpan:1};if(ne(re(t)))switch(e){case"dateRange":return{colSpan:{small:1,medium:2}};case"location":return{colSpan:{small:"all",medium:4,large:2}};default:return{}}},te=e=>e&&[g.yR.FH,g.yR.FHC].includes(e),ne=e=>e&&e===g.yR.HC,re=e=>{var t;return null===(t=null==e?void 0:e.multiItemContext)||void 0===t?void 0:t.packageType};var ie=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const ae=s.ClientLogger.getLoggerWithIdentifier("pwa.component.searchform");let oe=class extends r.Component{constructor(e){super(e),this.state={endDateFocus:void 0,startDateFocus:void 0},this.handleChange=this.handleChange.bind(this),this.registerFocusMethod=this.registerFocusMethod.bind(this),this.validate=this.validate.bind(this);const{registerValidator:t}=e;t((()=>this.validate("startDate"))),t((()=>this.validate("endDate")))}handleChange(e){const{updateModel:t}=this.props;"function"==typeof t&&t(e)}logDateRangeError(e,t,n,r){ae.logEvent(new c.SystemEvent(c.SystemEventLevel.ERROR,"SEARCH_FORM_DATE_RANGE_ERROR"),`${JSON.stringify(e)} | ${JSON.stringify(t)}`,`startDate=${n} endDate=${r}`,{escalation:K.w.CUSTOMER})}updateModels(e,t){this.handleChange({target:{name:"startDate",value:e}}),this.handleChange({target:{name:"endDate",value:t}})}render(){const{l10n:e,model:t,fetchDatePickerRates:n,multiItem:i}=this.props,{formatText:a}=e,o=t.startDate&&this.isValidDate(new Date(t.startDate))?t.startDate:void 0,s=t.endDate&&this.isValidDate(new Date(t.endDate))?t.endDate:void 0,l=a("hotels.roomPicker.doneButton.label"),c=this.validate("startDate"),u=this.validate("endDate"),d={startDate:o,endDate:s,placeholder:a("hotels.search.form.toDate.placeholder"),numDaysBookableInAdvance:S.i.NUM_OF_DAYS_BOOKABLE_IN_ADVANCE,midnightBookingOffsetHours:S.i.MIDNIGHT_BOOKING_OFFSET_IN_HOURS,buttonText:l,registerFocusMethod:this.registerFocusMethod,updateModels:this.updateModels.bind(this)};ae&&"function"==typeof ae.logEvent&&(c||u)&&this.logDateRangeError(c,u,o,s);const h=i&&i.getPackageType()&&i.getPackageType()!==g.yR.HC,{startDateLabel:p,endDateLabel:m}=h?{startDateLabel:a("hotels.searchWizard.multiitem.departing.date"),endDateLabel:a("hotels.searchWizard.multiitem.returning.date")}:{startDateLabel:a("hotels.search.form.fromDateHyphen.label"),endDateLabel:a("hotels.search.form.toDateHyphen.label")},v={endId:"hotels-check-out",endInvalid:u&&u.text,endLabel:m,endName:"endDate",endPlaceholder:a("hotels.search.form.toDate.placeholder"),routerLinkWrapper:e=>r.createElement(r.Fragment,null,e),startId:"hotels-check-in",startInvalid:c&&c.text,startLabel:p,startName:"startDate",startPlaceholder:a("hotels.search.form.toDate.placeholder")};return r.createElement(x.b,{margin:{small:{block:"half"},medium:{block:"unset"}}},r.createElement(f.a,Object.assign({},ee("dateRange",i)),r.createElement("div",null,r.createElement(Y,Object.assign({rfrr:{end:":ChangeDatesCheckOut",start:":ChangeDatesCheckIn"},dateFieldProps:v,fetchDatePickerRates:n},d)))))}registerFocusMethod(e,t){this.setState({[`${e}Focus`]:t})}validate(e){const{l10n:t,model:n}=this.props,{startDateFocus:r,endDateFocus:i}=this.state,{formatText:a}=t,{endDate:o,startDate:s}=n;if("startDate"===e){const e=s&&new Date(s),t="hotels.search.validation.invalidFromDate.text";if(!(e&&this.isValidDate(e)||n.isDateless))return{text:a(t),focus:r}}if("endDate"===e){const e=s?new Date(s):void 0,t=o?new Date(o):void 0,r="hotels.search.validation.invalidToDate.text";if(!(t&&this.isValidDate(t)||n.isDateless))return{text:a(r),focus:i};if(e&&this.isValidDate(e)){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()+28);if(e&&t&&t<e)return{text:a("hotels.search.validation.invalidDateRange.text"),focus:i};if(n&&n.setHours(0,0,0,0),null==t||t.setHours(0,0,0,0),null!==n&&t&&t>n)return{text:a("hotels.search.validation.invalidDateDateRangeLength.text"),focus:i}}}}isValidDate(e){return"Invalid Date"!==e.toString()}};oe=ie([E.withLocalization,D,(0,a.inject)("currentHotel","multiItem","experiment")],oe);var se=n(64425),le=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const ce=["poi","hotelName","group","neighborhood"];let ue=class extends r.Component{constructor(e){super(e),this.pristine=!0,this.timestamp=this.getCurrentTimestampInSeconds(),this.dismissTypeahead=this.dismissTypeahead.bind(this),this.openTypeahead=this.openTypeahead.bind(this),this.handleUpdate=this.handleUpdate.bind(this),this.validate=this.validate.bind(this),this.formValidator=this.formValidator.bind(this),this.renderTypeaheadDialog=this.renderTypeaheadDialog.bind(this),this.fieldRef=r.createRef(),e.registerValidator&&e.registerValidator(this.formValidator)}renderTypeaheadDialog(e){return r.createElement(l.QueryRoute,{query:{pwaDialog:"typeahead"}},r.createElement(H.Layer,{id:"home-typeahead",onDismiss:this.dismissTypeahead},e))}dismissTypeahead(e){const{analytics:t,history:n}=this.props;t&&"function"==typeof t.trackEvent&&t.trackEvent("DismissDestinationTypeahead","Destination Typeahead Modal Dismissed",null),e===$.i.DIALOG&&n.goBack(),this.fieldRef&&this.fieldRef.current&&"function"==typeof this.fieldRef.current.focusTypeaheadInput&&this.fieldRef.current.focusTypeaheadInput()}openTypeahead(e){const{analytics:t,history:n,location:r}=this.props;e===$.i.DIALOG&&(0,l.updateSearch)({history:n,location:r,newParams:{pwaDialog:"typeahead"}}),t&&"function"==typeof t.trackEvent&&t.trackEvent(":ChangeDestination","User searching Destination",null)}handleUpdate(){return e=>{var t,n,r,i,a,o,s;const{updateModel:l,l10n:c,multiItem:u}=this.props,{formatDate:d}=c,{data:h,term:p}=e,f=h&&"USERHISTORY"===h.category,m=u&&u.isPackageShoppingPath(),g=null!==(t=null==h?void 0:h.regionId)&&void 0!==t?t:"",v=null!==(i=null===(r=null===(n=null==h?void 0:h.hierarchyInfo)||void 0===n?void 0:n.airport)||void 0===r?void 0:r.multicity)&&void 0!==i?i:"",y=null!==(s=null===(o=null===(a=null==h?void 0:h.hierarchyInfo)||void 0===a?void 0:a.airport)||void 0===o?void 0:o.airportCode)&&void 0!==s?s:"";this.timestamp=this.getCurrentTimestampInSeconds(),"function"==typeof l&&(this.pristine=!1,l({target:{name:"destination",value:p,track:!0,userHistory:f}}),l({target:{name:"latLong",value:h&&h.location?`${h.location.lat},${h.location.long}`:""}}),l({target:{name:"regionId",value:m&&!g?v:g}}),y&&m&&(null==u||u.setTtla(y)),l({target:{name:"selected",value:h&&h.selected?h.selected:""}}),h&&h.startDate&&h.endDate&&(l({target:{name:"startDate",value:d(new Date(h.startDate),{raw:"yyyy-MM-dd"})}}),l({target:{name:"endDate",value:d(new Date(h.endDate),{raw:"yyyy-MM-dd"})}})),ce.forEach((e=>l({target:{name:e,value:void 0}}))))}}render(){var e,t,n,i,a,o;const{context:s,l10n:l,model:c,multiItem:u,maxTypeaheadResults:d,experiment:h,page:p}=this.props,{formatText:m}=l,g=m("hotels.search.form.destination.label"),v=u&&u.isPackageShoppingPath(),y=v&&1===(0,se.lF)("PWA_Packages_Exclude_MultiRegion_Destination_Search",s,h,p),E={client:"shopping-pwa-lodging",dest:!0,essLogger:this.props.essAnalyticsLogger,features:"ta_hierarchy|postal_code|contextual_ta|google|consistent_display",guid:null!==(e=null==s?void 0:s.deviceId)&&void 0!==e?e:"",inputId:"hotels-destination",lob:"HOTELS",locale:null!==(t=null==s?void 0:s.locale)&&void 0!==t?t:"",maxResults:d,personalize:!0,regionType:2047,siteId:(null===(n=null==s?void 0:s.site)||void 0===n?void 0:n.id)||null,lastSearchLatLong:null==c?void 0:c.latLong,lastSearchRegionId:null==c?void 0:c.regionId,lastSearchElapseTime:this.timestamp?this.getCurrentTimestampInSeconds()-this.timestamp:void 0},b=Object.assign(Object.assign({},E),{client:"shopping-pwa-packages",features:"nearby_airport|ta_hierarchy|consistent_display",lob:"PACKAGES",subLob:v?null===(i=null==u?void 0:u.multiItemContext)||void 0===i?void 0:i.packageType:"",personalize:!1,regionType:(null==c?void 0:c.typeaheadRegionType)||(y?735:991),packageType:v?null===(a=null==u?void 0:u.multiItemContext)||void 0===a?void 0:a.packageType:""}),S={allowExactMatch:!0,label:g,icon:"place",invalid:this.validate()&&(null===(o=this.validate())||void 0===o?void 0:o.text),name:"destination",onClick:this.openTypeahead,onDismiss:this.dismissTypeahead,renderDialog:this.renderTypeaheadDialog,renderType:$.i.ADAPTIVE,stid:"hotels-destination",value:c&&c.destination,ref:this.fieldRef,onUpdate:this.handleUpdate()},T=v?new $.E(Object.assign(Object.assign({},b),{maxResults:b.maxResults||0})):new $.E(Object.assign(Object.assign({},E),{maxResults:E.maxResults||0}));return r.createElement(H.ErrorBoundary,{label:"location.typeahead"},r.createElement(f.a,Object.assign({},ee("location",u)),r.createElement("div",null,r.createElement($.j,Object.assign({},S,{adapter:T})))))}getCurrentTimestampInSeconds(){return Math.floor(Date.now()/1e3)}formValidator(){return this.pristine=!1,this.validate()}validate(){const{l10n:e,model:t}=this.props,{formatText:n}=e;if(this.pristine)return;const r=t&&t.destination,i=this.fieldRef&&this.fieldRef.current&&"function"==typeof this.fieldRef.current.focusTypeaheadInput&&this.fieldRef.current.focusTypeaheadInput;return r?void 0:{text:n("hotels.search.validation.invalidDestination.text"),focus:i}}};ue.defaultProps={maxTypeaheadResults:10},ue=le([E.withLocalization,T.withRouter,D,(0,a.inject)("analytics","context","multiItem","experiment","page")],ue);var de=n(47751),he=n(39828),pe=n(85690),fe=n(5402),me=n(37092),ge=n(28243),ve=n(8684),ye=n(10225),Ee=n(32671),be=n(70027),Se=n(93519),Te=n(63188),Re=n(82258),_e=n(20113),Oe=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};class Ie{constructor({adults:e,children:t}={},n,r,i=!1,a=!1){this.rooms=[],this.l10n=n,this.context=r,this.isPackageShoppingPath=i,this.petsIncluded=a,this.setupRooms(e,t)}get initialProps(){return{adults:this.initAdults,children:this.initChildren}}get finalProps(){return{adults:this.rooms.map((e=>e.adults)).filter((e=>e>0)).join(","),children:this.rooms.map(((e,t)=>(0,_e.Hv)(t+1,e.children))).filter((e=>""!==e)).join(",")}}get counts(){return this.rooms.reduce(((e,t)=>(e.guests+=t.adults+t.children.length,e)),{guests:0,rooms:this.rooms.length})}get displaySummary(){const{rooms:e,guests:t}=this.counts,n=t>Ie.MAX_GUESTS?Ie.MAX_GUESTS:t;return this.l10n.formatText(this.displaySummaryKey,e,n)}get displaySummaryKey(){return(0,pe.d)(this.context)?this.petsIncluded?Ie.VRBO_DISPLAY_SUMMARY_KEY_WITH_PETS:Ie.VRBO_DISPLAY_SUMMARY_KEY:Ie.DISPLAY_SUMMARY_KEY}get roomCount(){return this.rooms.length}get disableAddRoom(){return!!(this.isPackageShoppingPath&&this.counts.guests>=6)||!(this.initialRoomCount&&this.rooms.length<this.initialRoomCount)&&(this.rooms.length>=Ie.MAX_ROOM_COUNT||this.counts.guests>=Ie.MAX_GUESTS)}get enableInfantSeatSelection(){return this.rooms.some((e=>e.children.some((e=>e<=1))))}includePets(){this.petsIncluded=!0}excludePets(){this.petsIncluded=!1}addRoom(){this.rooms.push({adults:1,children:[]})}removeRoom(e){this.rooms=this.rooms.filter((t=>t!==e))}changeAdultsForRoom(e,t){const n=e.adults;e.adults=t,this.counts.guests>Ie.MAX_GUESTS&&(e.adults=n)}changeChildrenForRoom(e,t,n=!1){let r=this.infantAwareDiff(e,t,n);if(r>0)for(;r>0;r--){const t=n||!this.isPackageShoppingPath?Ie.DEFAULT_SA_CHILD_AGE:Ie.DEFAULT_MULTI_ITEM_CHILD_AGE;e.children.push(t)}else r<0&&this.infantAwareSplice(e,r,n);this.counts.guests>Ie.MAX_GUESTS&&e.children.pop()}changeChildAge(e,t,n,r=!1){this.rooms=(0,i.observable)(this.rooms.map(((i,a)=>{if(t>-1&&t<i.children.length&&a===e){let e=-1;for(let a=0;a<i.children.length;a++){const o=i.children[a];if((void 0!==o&&(r&&o<2||!r&&o>=2)||!this.isPackageShoppingPath)&&e++,e===t){i.children[a]=n;break}}}return i})))}reset(){this.setupRooms(this.initAdults,this.initChildren)}setupRooms(e,t){var n;const r=e&&e.length>0?e.split(","):[],i=this.convertChildrenTextToRooms(t),a=Math.max(r.length,i.length),o=[];for(let s=0;s<a;s++){const e=s<r.length?parseInt(null!==(n=r[s])&&void 0!==n?n:"",10):0,t=i[s]?i[s]:[];o.push({adults:isNaN(e)?0:e,children:null!=t?t:[]})}this.initAdults=null!=e?e:"",this.initChildren=null!=t?t:"",this.rooms.replace(o),this.initialRoomCount=o.length}infantAwareDiff(e,t,n){if(this.isPackageShoppingPath){return t-e.children.filter((e=>n?e<2:e>=2)).length}return t-e.children.length}infantAwareSplice(e,t,n){if(this.isPackageShoppingPath)for(let r=e.children.length-1;r>-1;r--){const i=e.children[r];if((i<2&&n||i>=2&&!n)&&(e.children.splice(r,1),t++),0===t)break}else e.children.splice(e.children.length+t,-t)}convertChildrenTextToRooms(e){return(e&&e.length>0?e.split(","):[]).reduce(((e,t)=>{var n;const r=t.split("_");if(!r[0]||!r[1])return e;let i=parseInt(r[0],10);const a=parseInt(r[1],10);return isNaN(i)||isNaN(a)||(i-=1,e[i]?null===(n=e[i])||void 0===n||n.push(a):e[i]=[a]),e}),[])}}Ie.DISPLAY_SUMMARY_KEY="hotels.roomPicker.roomSummary",Ie.VRBO_DISPLAY_SUMMARY_KEY="hotels.roomPicker.roomSummary.singleUnit",Ie.VRBO_DISPLAY_SUMMARY_KEY_WITH_PETS="hotels.roomPicker.roomSummary.singleUnit.withPets",Ie.DEFAULT_SA_CHILD_AGE=0,Ie.DEFAULT_MULTI_ITEM_CHILD_AGE=2,Ie.MAX_ROOM_COUNT=8,Ie.MAX_GUESTS=14,Ie.determineMaxGuests=(e,t)=>e+6-t,Oe([i.observable],Ie.prototype,"rooms",void 0),Oe([i.observable],Ie.prototype,"petsIncluded",void 0),Oe([i.computed],Ie.prototype,"finalProps",null),Oe([i.computed],Ie.prototype,"counts",null),Oe([i.computed],Ie.prototype,"displaySummary",null),Oe([i.computed],Ie.prototype,"displaySummaryKey",null),Oe([i.computed],Ie.prototype,"roomCount",null),Oe([i.computed],Ie.prototype,"disableAddRoom",null),Oe([i.computed],Ie.prototype,"enableInfantSeatSelection",null),Oe([i.action],Ie.prototype,"includePets",null),Oe([i.action],Ie.prototype,"excludePets",null),Oe([i.action],Ie.prototype,"addRoom",null),Oe([i.action],Ie.prototype,"removeRoom",null),Oe([i.action],Ie.prototype,"changeAdultsForRoom",null),Oe([i.action],Ie.prototype,"changeChildrenForRoom",null),Oe([i.action],Ie.prototype,"changeChildAge",null),Oe([i.action],Ie.prototype,"reset",null);const Ce=({minChildAge:e,maxChildAge:t,childAge:n,childIndex:i,l10n:a,onChildAgeUpdated:o,roomIndex:s,selectLabel:l,isInfant:c})=>{const u=xe(e,t,a),d=c?`infant-${s}-${i}`:`child-${s}-${i}`,h=c?`infant-age-${i}`:`age-${i}`;return r.createElement(f.a,{colSpan:1},r.createElement("div",null,r.createElement(w.i,{label:l,id:h,name:d,value:n.toString(),onChange:e=>o(i,e.target)},u.map((e=>r.createElement("option",{key:e.value,value:e.value},e.name))))))},xe=(e,t,n)=>{const r=[];for(let i=e;i<=t;i++){const e=0===i?n.formatText("hotels.roomPicker.youngestChildAge.text"):i;r.push({value:`${i}`,name:`${e}`})}return r},De=(0,u.ClickTracker)(ve.E),Pe=({analytics:e,roomIndex:t,headerRef:n,l10n:i,onChildAgeUpdated:a,onRoomAdultsChanged:o,onRoomChildrenChanged:s,onRemoveRoom:l,room:c,selection:u,onInfantAgeUpdated:d,onRoomInfantsChanged:h})=>{const{roomCount:p}=u,g=null==e?void 0:e.setupTracker(":Guest","Adjust guest count in change search"),v=(e,n)=>a(t,e,n),y=(e,n)=>d(t,e,n),E=t+1,b=u.roomCount===E,S=u.counts.guests,T=c.children.filter((e=>e<2)),R=c.children.filter((e=>e>=2));return r.createElement(x.b,{padding:{blockstart:"three"}},r.createElement("div",{key:`room-${p}-${t}`,"data-stid":"room-count"},r.createElement(m.E,{tag:"h3",domRef:b?n:void 0},r.createElement(m.c,{size:200,weight:"medium"},r.createElement("span",{"aria-hidden":"true"},i.formatText("hotels.roomPicker.room.title",E)))),r.createElement(Re.a,{label:i.formatText("hotels.roomPicker.adults.text"),incrementText:i.formatText("hotels.roomPicker.increaseAdults.text",p),incrementId:`room-${p}-${t}-adults-increase`,decrementText:i.formatText("hotels.roomPicker.decreaseAdults.text",p),max:Ie.determineMaxGuests(c.adults,S),decrementId:`room-${p}-${t}-adults-decrease`,min:1,value:c.adults,onChange:e=>o(c,e),analytics:g,id:`room-${p}-${t}-adults`}),r.createElement(Re.a,{label:i.formatText("hotels.roomPicker.children.text"),incrementText:i.formatText("hotels.roomPicker.increaseChildren.text",p),incrementId:`room-${p}-${t}-children-increase`,decrementText:i.formatText("hotels.roomPicker.decreaseChildren.text",p),decrementId:`room-${p}-${t}-children-decrease`,description:i.formatText("hotels.roomPicker.multiitem.children.caption"),max:Ie.determineMaxGuests(R.length,S),min:0,value:R.length,onChange:e=>s(c,e),analytics:g,id:`room-${p}-${t}-children`}),R.length>0&&r.createElement(f.E,{columns:2,space:"two"},r.createElement("div",null,R.map(((e,n)=>r.createElement(Ce,{childAge:e,childIndex:n,key:n,l10n:i,onChildAgeUpdated:v,room:c,roomIndex:t,selectLabel:i.formatText("hotels.roomPicker.childAgeInput.label",n+1),isInfant:!1,minChildAge:2,maxChildAge:17}))))),r.createElement(Re.a,{label:i.formatText("hotels.roomPicker.multiitem.infants.text"),incrementText:i.formatText("hotels.roomPicker.multiitem.increaseInfants",p),incrementId:`room-${p}-${t}-infants-increase`,decrementText:i.formatText("hotels.roomPicker.multiitem.decreaseInfants",p),decrementId:`room-${p}-${t}-infants-decrease`,description:i.formatText("hotels.roomPicker.multiitem.infants.caption"),max:Ie.determineMaxGuests(T.length,S),min:0,value:T.length,onChange:e=>h(c,e),analytics:g,id:`room-${p}-${t}-infants`}),T.length>0&&r.createElement(f.E,{columns:2,space:"two"},r.createElement("div",null,T.map(((e,n)=>r.createElement(Ce,{childAge:e,childIndex:n,key:n,l10n:i,onChildAgeUpdated:y,room:c,roomIndex:t,selectLabel:i.formatText("hotels.roomPicker.multiitem.infantAgeInput.label",n+1),isInfant:!0,minChildAge:0,maxChildAge:1}))))),0!==t&&r.createElement(x.b,{padding:{blockstart:"four"}},r.createElement(m.c,{align:"right"},r.createElement("div",null,r.createElement(De,{"data-stid":"remove-room",linkName:"Remove room",onClick:()=>l(c),rfrr:":RemoveRoom","aria-label":i.formatText("hotels.roomPicker.removeRoomButton.a11yLabel",E,p)},i.formatText("hotels.roomPicker.removeRoomButton.label"))))),r.createElement(x.c,null)))};var we=n(25738),ke=n(92061);const Ae="EXCLUDE_PETS",Le="INCLUDE_PETS",Ne=({enabled:e,onEnable:t,onDisable:n})=>{const i=(0,E.useLocalization)(),a=(0,ke.Gv)(),[o,s]=r.useState(e?Le:Ae);return r.createElement(x.b,{padding:{blockend:"twelve"}},r.createElement("div",null,r.createElement(Ee.a,{legendLabel:i.formatText("hotels.roomPicker.pets.label"),onChange:e=>{const r=e.target.value;s(r),a(`HOT.SR.TravelersField.${r}`,`Travelers Field ${r}`),r===Le?t():n()},group:"petsIncluded",selected:o},r.createElement(we.i,{justifyContent:"space-between",alignItems:"center"},r.createElement(we.j,null,r.createElement(m.c,null,i.formatText("hotels.roomPicker.pets.title"))),r.createElement(we.j,null,r.createElement(we.i,null,r.createElement(we.j,null,r.createElement(Ee.E,{id:Ae,value:Ae},i.formatText("hotels.roomPicker.pets.exclude"))),r.createElement(we.j,null,r.createElement(Ee.E,{id:Le,value:Le},i.formatText("hotels.roomPicker.pets.include")))))))))},je=(0,u.ClickTracker)(ve.E),Me=({context:e,analytics:t,roomIndex:n,headerRef:i,l10n:a,onChildAgeUpdated:o,onRoomAdultsChanged:s,onRoomChildrenChanged:l,onRemoveRoom:c,room:u,selection:d})=>{const{roomCount:h}=d,p=null==t?void 0:t.setupTracker(":Guest","Adjust guest count in change search"),g=(e,t)=>o(n,e,t),v=n+1,y=d.roomCount===v;return r.createElement(x.b,{padding:{blockstart:"three"}},r.createElement("div",{key:`room-${h}-${n}`,"data-stid":"room-count"},!(0,pe.d)(e)&&r.createElement(m.c,{size:200,weight:"medium"},r.createElement("h3",{tabIndex:0,className:"no-outline",ref:y?i:null,"aria-label":a.formatText("hotels.roomPicker.room.a11yLabelRoom",v,h)},r.createElement("span",{"aria-hidden":"true"},a.formatText("hotels.roomPicker.room.title",v)))),r.createElement(Re.a,{label:a.formatText("hotels.roomPicker.adults.text"),incrementText:a.formatText("hotels.roomPicker.increaseAdults.text",v),incrementId:`room-${h}-${n}-adults-increase`,decrementText:a.formatText("hotels.roomPicker.decreaseAdults.text",v),decrementId:`room-${h}-${n}-adults-decrease`,max:14,min:1,value:u.adults,onChange:e=>s(u,e),analytics:p,id:`room-${h}-${n}-adults`}),r.createElement(Re.a,{label:a.formatText("hotels.roomPicker.children.text"),incrementText:a.formatText("hotels.roomPicker.increaseChildren.text",v),incrementId:`room-${h}-${n}-children-increase`,decrementText:a.formatText("hotels.roomPicker.decreaseChildren.text",v),decrementId:`room-${h}-${n}-children-decrease`,description:a.formatText("hotels.roomPicker.children.caption"),max:6,min:0,value:u.children.length,onChange:e=>l(u,e),analytics:p,id:`room-${h}-${n}-children`}),u.children.length>0&&r.createElement(f.E,{columns:2,space:"two"},r.createElement("div",null,u.children.map(((e,t)=>r.createElement(Ce,{childAge:e,childIndex:t,key:t,l10n:a,onChildAgeUpdated:g,room:u,roomIndex:n,selectLabel:a.formatText("hotels.roomPicker.childAgeInput.label",t+1),isInfant:!1,minChildAge:0,maxChildAge:17}))))),0!==n&&r.createElement(x.b,{padding:{blockstart:"four"}},r.createElement("div",null,r.createElement(m.c,{align:"right"},r.createElement(je,{"data-stid":"remove-room",linkName:"Remove room",onClick:()=>c(u),rfrr:":RemoveRoom","aria-label":a.formatText("hotels.roomPicker.removeRoomButton.a11yLabel",v,h)},a.formatText("hotels.roomPicker.removeRoomButton.label"))))),r.createElement(x.c,null)))};var Fe=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Ue=(0,u.ClickTracker)(ge.E),Be=(0,u.ClickTracker)(ve.E);var He;!function(e){e.IN_SEAT="seat",e.ON_LAP="lap"}(He||(He={}));let $e=class extends r.Component{constructor(e){super(e),this.focusOnOpen=r.createRef(),this.lastRoomHeader=r.createRef();const{l10n:t,context:n,isPackageShoppingPath:i,petsIncluded:a,infantsInSeats:o}=e;this.state={dialogShow:!1,selection:new Ie(e,t,n,i,a),justAddedRoom:!1,justRemovedRoom:!1,infantsInSeats:o},this.onIncludePets=this.onIncludePets.bind(this),this.onExcludePets=this.onExcludePets.bind(this),this.onAddRoom=this.onAddRoom.bind(this),this.onChildAgeUpdated=this.onChildAgeUpdated.bind(this),this.onRemoveRoom=this.onRemoveRoom.bind(this),this.onRoomAdultsChanged=this.onRoomAdultsChanged.bind(this),this.onRoomChildrenChanged=this.onRoomChildrenChanged.bind(this),this.onRoomInfantsChanged=this.onRoomInfantsChanged.bind(this),this.onInfantAgeUpdated=this.onInfantAgeUpdated.bind(this),this.onDismiss=this.onDismiss.bind(this),this.onSubmit=this.onSubmit.bind(this),this.resetLiveAnnounce=this.resetLiveAnnounce.bind(this)}componentWillMount(){this.updateStateWithProps(this.props)}componentWillReceiveProps(e){this.updateStateWithProps(e)}componentDidMount(){this.setState({dialogShow:!0})}componentDidUpdate(){const{l10n:e}=this.props,{selection:t}=this.state,{roomCount:n}=t;this.state.justAddedRoom&&((0,Te.liveAnnounce)(e.formatText("hotels.roomPicker.roomAdded.liveAnnounce",n)),this.setFocusOnLastRoomHeader(),this.setState({justAddedRoom:!1})),this.state.justRemovedRoom&&((0,Te.liveAnnounce)(e.formatText("hotels.roomPicker.roomRemoved.liveAnnounce",n)),this.setFocusOnLastRoomHeader(),this.setState({justRemovedRoom:!1}))}setFocusOnLastRoomHeader(){this.lastRoomHeader.current&&"function"==typeof this.lastRoomHeader.current.focus&&this.lastRoomHeader.current.focus()}updateStateWithProps(e){const{adults:t,children:n}=this.state.selection.initialProps;t===e.adultsString&&n===e.childrenString||this.state.selection.setupRooms(e.adultsString,e.childrenString)}render(){var e,t;const{l10n:n,context:i}=this.props,{dialogShow:a,selection:o}=this.state,{disableAddRoom:s,displaySummary:l,rooms:c,enableInfantSeatSelection:u}=o,d=this.props.isPackageShoppingPath?n.formatText("hotels.travelers.multiitem.dialog.label"):n.formatText("hotels.roomPicker.title"),f=null===(e=this.props.analytics)||void 0===e?void 0:e.setupTracker(":ChangeRoomGuest","Close Room Picker"),g=this.props.buttonText?this.props.buttonText:n.formatText("hotels.roomPicker.doneButton.label"),v=r.createElement(r.Fragment,null,g,r.createElement("span",{className:"is-visually-hidden"},n.formatText("hotels.roomPicker.doneButton.a11yLabel"))),y=this.props.isPackageShoppingPath&&(null===(t=this.props.multiItem)||void 0===t?void 0:t.isFlightPackage())&&u;return r.createElement(de.e,{type:"centered",isVisible:a,triggerRef:null},r.createElement(Se.b,{toolbarTitle:d,navigationContent:{onClick:this.onDismiss,navIconLabel:n.formatText("hotels.roomPicker.cancelButton.a11yLabel"),onClickAnalytics:f,navButtonRef:this.focusOnOpen}}),r.createElement(de.f,null,r.createElement("section",{className:"uitk-scroll-vertical"},r.createElement(x.b,{padding:{blockstart:"half",blockend:"twelve",inline:"four"}},r.createElement("div",null,c.map(((e,t)=>this.getRoomComponent(t,e,o))),!(0,pe.d)(i)&&r.createElement(x.b,{padding:{blockstart:"four",blockend:"twelve"}},r.createElement("div",null,r.createElement(m.c,{align:"right"},r.createElement(Be,{"data-stid":"add-room",linkName:"Add room",onClick:this.onAddRoom,disabled:s,rfrr:":AddRoom"},n.formatText("hotels.roomPicker.addRoomButton.label"))))),y&&r.createElement("div",{className:"airlineChildSeating"},r.createElement("fieldset",null,r.createElement("legend",null,r.createElement(m.c,{size:300,weight:"bold"},n.formatText("hotels.roomPicker.multiitem.infantSeating.label"))),r.createElement(Ee.a,{group:"ChildSeating",onChange:e=>this.onInfantSeatingChanged(e),selected:"1"===this.state.infantsInSeats?He.IN_SEAT:He.ON_LAP},r.createElement(x.b,{padding:{inlineend:"six"}},r.createElement("div",null,r.createElement(Ee.E,{id:"ChildOnLap",value:"lap"},n.formatText("hotels.roomPicker.multiitem.infantSeating.inlap.label")))),r.createElement(x.b,{padding:{inlineend:"six"}},r.createElement("div",null,r.createElement(Ee.E,{id:"ChildInSeat",value:"seat"},n.formatText("hotels.roomPicker.multiitem.infantSeating.inseat.label"))))))),y&&r.createElement("div",null,r.createElement(ye.E,{size:"small",className:"airlineAgeRules"},r.createElement("a",{href:"/p/info-main/h_fw_default?rhtx=HTX_FLTSRCH_RT#travs",id:"airline-age-rules",target:"_blank",rel:"noopener"},n.formatText("hotels.roomPicker.multiitem.airlineRules.text"),r.createElement(p.a,{id:"airline-age-rules-opens-in-new",name:"open_in_new",title:"Opens in a new window"})))),(0,pe.d)(i)&&r.createElement(Ne,{enabled:this.state.selection.petsIncluded,onEnable:this.onIncludePets,onDisable:this.onExcludePets}),r.createElement(x.b,{padding:{blockstart:"two",blockend:"six"}},r.createElement("div",null)))))),r.createElement(be.E,{type:be.a.BUTTON},r.createElement(Ue,{isFullWidth:!0,size:h.E.LARGE,"data-stid":"apply-room-picker",linkName:"Apply Room Picker",onClick:this.onSubmit,rfrr:":ChangeRoomGuestDone",subText:l},v)))}onIncludePets(){this.state.selection.includePets()}onExcludePets(){this.state.selection.excludePets()}onRoomAdultsChanged(e,t){const n=parseInt(t.target.value,10);isNaN(n)||this.state.selection.changeAdultsForRoom(e,n)}onRoomChildrenChanged(e,t){const n=parseInt(t.target.value,10);isNaN(n)||this.state.selection.changeChildrenForRoom(e,n)}onRoomInfantsChanged(e,t){const n=parseInt(t.target.value,10);isNaN(n)||this.state.selection.changeChildrenForRoom(e,n,!0)}onAddRoom(){this.state.selection.addRoom(),this.setState({justAddedRoom:!0})}onRemoveRoom(e){this.state.selection.removeRoom(e),this.setState({justRemovedRoom:!0})}onChildAgeUpdated(e,t,n){const{analytics:r,l10n:i}=this.props,a=n.value;if(this.state.selection.changeChildAge(e,t,a),n.focus(),(0,Te.liveAnnounce)(i.formatText("hotels.roomPicker.childUpdated.liveAnnounce",t,a),Te.Level.POLITE),r&&"function"==typeof r.trackEvent){const n=e+1,i=t+1;r.trackEvent(`:ROOM.${n}.Child.${i}.AGE.${a}`,"Child age update",null)}}onInfantAgeUpdated(e,t,n){const{analytics:r,l10n:i}=this.props,a=n.value;if(this.state.selection.changeChildAge(e,t,a,!0),n.focus(),(0,Te.liveAnnounce)(i.formatText("hotels.roomPicker.childUpdated.liveAnnounce",t,a),Te.Level.POLITE),r&&"function"==typeof r.trackEvent){const n=e+1,i=t+1;r.trackEvent(`:ROOM.${n}.Infant.${i}.AGE.${a}`,"Infant age update",null)}}onInfantSeatingChanged(e){const{analytics:t}=this.props,n=e.target.value;this.setState({infantsInSeats:n===He.ON_LAP?"0":"1"}),t&&"function"==typeof t.trackEvent&&t.trackEvent(`:Infant.Seating.${n}`,"Infant seating update",null)}resetLiveAnnounce(){(0,Te.liveAnnounce)("",Te.Level.ASSERTIVE)}onDismiss(){const{onDismiss:e}=this.props;this.state.selection.reset(),this.resetLiveAnnounce(),e&&e()}onSubmit(){const{onSave:e}=this.props;if(e){const{finalProps:t,displaySummary:n,petsIncluded:r}=this.state.selection;e(t.adults,t.children,n,r,this.state.infantsInSeats)}this.onDismiss()}getRoomComponent(e,t,n){return this.props.isPackageShoppingPath?r.createElement(Pe,{analytics:this.props.analytics,key:e,l10n:this.props.l10n,headerRef:this.lastRoomHeader,onChildAgeUpdated:this.onChildAgeUpdated,onRoomAdultsChanged:this.onRoomAdultsChanged,onRoomChildrenChanged:this.onRoomChildrenChanged,onRoomInfantsChanged:this.onRoomInfantsChanged,onInfantAgeUpdated:this.onInfantAgeUpdated,onRemoveRoom:this.onRemoveRoom,room:t,roomIndex:e,selection:n}):r.createElement(Me,{context:this.props.context,analytics:this.props.analytics,key:e,l10n:this.props.l10n,headerRef:this.lastRoomHeader,onChildAgeUpdated:this.onChildAgeUpdated,onRoomAdultsChanged:this.onRoomAdultsChanged,onRoomChildrenChanged:this.onRoomChildrenChanged,onRemoveRoom:this.onRemoveRoom,room:t,roomIndex:e,selection:n})}};$e.defaultRoomProps={adultsString:"2",childrenString:""},Fe([i.action],$e.prototype,"onIncludePets",null),Fe([i.action],$e.prototype,"onExcludePets",null),Fe([i.action],$e.prototype,"onRoomAdultsChanged",null),Fe([i.action],$e.prototype,"onRoomChildrenChanged",null),Fe([i.action],$e.prototype,"onRoomInfantsChanged",null),Fe([i.action],$e.prototype,"onAddRoom",null),Fe([i.action],$e.prototype,"onRemoveRoom",null),Fe([i.action],$e.prototype,"onChildAgeUpdated",null),Fe([i.action],$e.prototype,"onInfantAgeUpdated",null),Fe([i.action],$e.prototype,"onInfantSeatingChanged",null),$e=Fe([E.withLocalization,(0,a.inject)("currentHotel","context","multiItem"),a.observer],$e);var Ge=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};let Ve=class extends r.Component{constructor(e){var t,n;super(e),this.focusButton=r.createRef(),this.fieldValues=e=>{const{adults:t,children:n,infantsInSeats:i}=e;return r.createElement(r.Fragment,null,t&&r.createElement("input",{type:"hidden",name:"adults",value:t,readOnly:!0}),n&&r.createElement("input",{type:"hidden",name:"children",value:n,readOnly:!0}),i&&r.createElement("input",{type:"hidden",name:"infantsInSeats",value:i,readOnly:!0}))};const i=null===(n=null===(t=this.props.model)||void 0===t?void 0:t.guestCount)||void 0===n?void 0:n.toString();this.state={adults:i,children:"",mounted:!1,value:""},this.isPackageShoppingPath=e.multiItem&&e.multiItem.isPackageShoppingPath(),this.roomPickerModel=new Ie({adults:"",children:""},e.l10n,e.context,this.isPackageShoppingPath),this.convertRoomConfigToRoomModel=this.convertRoomConfigToRoomModel.bind(this),this.convertRoomModelToRoomConfig=this.convertRoomModelToRoomConfig.bind(this),this.dismiss=this.dismiss.bind(this),this.open=this.open.bind(this),this.openDatepicker=this.openDatepicker.bind(this),this.save=this.save.bind(this),this.validate=this.validate.bind(this),this.parseRooms=this.parseRooms.bind(this),this.updatePetsSelection=this.updatePetsSelection.bind(this),e.registerValidator&&e.registerValidator((()=>this.validate("children"))),e.registerValidator&&e.registerValidator((()=>this.validate("adults")))}open(){const{analytics:e,history:t,location:n}=this.props;(0,l.updateSearch)({history:t,location:n,newParams:{pwaDialog:"travelerPicks"}}),e&&"function"==typeof e.trackEvent&&e.trackEvent(":ChangeRoomGuest","Open Room Picker",null)}openDatepicker(){const{analytics:e,history:t,location:n}=this.props;(0,l.updateSearch)({history:t,location:n,newParams:{pwaDialog:"datepicker-start"}}),e&&"function"==typeof e.trackEvent&&e.trackEvent(":OpenDatepickerRoomGuest","Open Datepicker from Room Guest",null)}save(e,t,n,r,i){const{context:a,model:o,updateModel:s}=this.props;this.roomPickerModel.setupRooms(e,t);const{finalProps:l,rooms:c}=this.roomPickerModel;if("function"==typeof s&&(s({target:{name:"rooms",value:this.convertRoomConfigToRoomModel(c)}}),i&&s({target:{name:"infantsInSeats",value:i}}),(0,pe.d)(a))){let e=[...o.amenities];const t=e.indexOf(he.k9C.PETS);r&&t<0?e.push(he.k9C.PETS):!r&&t>-1&&(e=e.filter((e=>e!==he.k9C.PETS))),s({target:{name:"amenities",value:e}})}l.adults&&l.children&&this.setState({adults:l.adults,children:l.children,value:n,infantsInSeats:i})}dismiss(){this.props.history.goBack();const e=this.focusButton;e.current&&"function"==typeof e.current.focus&&e.current.focus()}convertRoomModelToRoomConfig(e){return e.map((e=>{var t;return{adults:e.adults,children:null===(t=e.children)||void 0===t?void 0:t.map((e=>e.age))}}))}convertRoomConfigToRoomModel(e){return e.map((e=>new me.r({adults:e.adults,children:e.children.map((e=>new fe.p({age:e})))})))}parseRooms(e){if(!e)return;this.roomPickerModel.rooms=this.convertRoomModelToRoomConfig(e);const{displaySummary:t,finalProps:n}=this.roomPickerModel;return{adults:n.adults,children:n.children,value:t}}get petsIncluded(){var e,t;return(null===(t=null===(e=this.props.model)||void 0===e?void 0:e.amenities)||void 0===t?void 0:t.includes(he.k9C.PETS))||!1}updatePetsSelection(){this.petsIncluded?this.roomPickerModel.includePets():this.roomPickerModel.excludePets()}componentDidMount(){const{rooms:e,infantsInSeats:t}=this.props.model;this.updatePetsSelection(),this.setState(Object.assign(Object.assign({},this.parseRooms(e)),{mounted:!0,infantsInSeats:t}))}componentDidUpdate(){this.updatePetsSelection()}componentWillReceiveProps(e){const{rooms:t,infantsInSeats:n}=e.model;this.setState(Object.assign(Object.assign({},this.parseRooms(t)),{infantsInSeats:n}))}getLabel(){return this.isPackageShoppingPath?"hotels.travelers.multiitem.dialog.label":"hotels.search.form.travelers.label"}render(){const{id:e,name:t,placeholder:n,updateModel:i,hidden:a}=this.props,{adults:o,mounted:s,value:c}=this.state,u=`${e}__btn`,d=parseInt(o,10)>Ie.MAX_GUESTS?Ie.MAX_GUESTS.toString():o,h=s?c:d,p=this.props.buttonText,m=[];return a?this.fieldValues(this.state):(s&&m.push("is-hidden"),r.createElement(r.Fragment,null,r.createElement(f.a,null,r.createElement("div",null,r.createElement(w.b,{id:e,name:s?t:"adults",className:m.join(" "),label:(()=>r.createElement(r.Fragment,null,r.createElement(E.LocalizedText,{message:this.getLabel()}),r.createElement("span",{className:"is-visually-hidden"},h)))(),placeholder:n,value:h,onChange:i,"data-stid":"input-date",icon:"person",invalid:s&&(this.validate("adults")||this.validate("children"))},s&&r.createElement(w.a,{domRef:this.focusButton,id:u,type:"button","data-stid":"open-room-picker",onClick:this.open},r.createElement("span",{className:"is-visually-hidden"},r.createElement(E.LocalizedText,{message:this.getLabel()})," "),h)))),s&&this.fieldValues(this.state),r.createElement(l.QueryRoute,{query:{pwaDialog:"travelerPicks"}},r.createElement(de.h,{isVisible:!0},r.createElement(H.Layer,{id:"home-travelerpicks",onDismiss:this.dismiss},r.createElement($e,{adultsString:this.state.adults,childrenString:this.state.children,petsIncluded:this.petsIncluded,infantsInSeats:this.state.infantsInSeats,onSave:this.save,onDismiss:this.dismiss,analytics:this.props.analytics,buttonText:p,isPackageShoppingPath:this.isPackageShoppingPath}))))))}validate(e){const{l10n:t}=this.props,{adults:n,children:r}=this.state,{formatText:i}=t,a=n.split(",").map(parseInt).reduce(((e,t)=>e+t));if("adults"===e){if(!n)return i("hotels.search.validation.invalidGuests.text");if(a<=0)return i("hotels.search.validation.invalidGuests.text")}if("children"===e){if(!r)return;const e=r.split(","),t=e.filter((e=>{var t;return parseInt(null!==(t=e.split("_")[1])&&void 0!==t?t:"",10)<2}));let n=1===e.length?i("hotels.search.validation.missingChildAge.text"):i("hotels.search.validation.missingChildrenAges.text"),o=!1;const s=[];e.forEach((e=>{e.match(/\d{1,2}_\d{1,2}/)||(o=!0);const t=e.split("_")[1];t&&s.push(parseInt(t,10))}));const l=s.filter((e=>e>=6)).length+a;return this.isPackageShoppingPath&&t.length>l&&(o=!0,n=i("hotels.travelers.multiitem.validation.maxInfants")),o?n:void 0}}};Ge([i.computed],Ve.prototype,"petsIncluded",null),Ve=Ge([T.withRouter,E.withLocalization,D,(0,a.inject)("analytics","context","multiItem"),a.observer],Ve);const ze={origin:e=>r.createElement(y.Experiment,{name:"Optimize_Number_Of_Typeahead_Suggestion"},r.createElement(y.ExperimentControl,null,r.createElement(G,Object.assign({},e,{maxTypeaheadResults:10}))),r.createElement(y.ExperimentVariant,{bucket:1},r.createElement(G,Object.assign({},e,{maxTypeaheadResults:5}))),r.createElement(y.ExperimentVariant,{bucket:2},r.createElement(G,Object.assign({},e,{maxTypeaheadResults:6})))),destination:e=>r.createElement(y.Experiment,{name:"Optimize_Number_Of_Typeahead_Suggestion"},r.createElement(y.ExperimentControl,null,r.createElement(ue,Object.assign({},e,{maxTypeaheadResults:10}))),r.createElement(y.ExperimentVariant,{bucket:1},r.createElement(ue,Object.assign({},e,{maxTypeaheadResults:5}))),r.createElement(y.ExperimentVariant,{bucket:2},r.createElement(ue,Object.assign({},e,{maxTypeaheadResults:6})))),dateRange:oe,rooms:Ve,cabinClass:B,directFlights:F,partialStayCheckbox:J,partialStayDateRange:X};var We=function(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o};const Ye=s.ClientLogger.getLoggerWithIdentifier("pwa.component.searchform"),{withoutKeys:qe}=l.merge,Ke=(0,u.ClickTracker)(d.E),Qe=["changedFilters","logger","comparePropertyIds","compareDialog"];let Ze=class extends r.Component{constructor(e){var t,n,r,i;super(e),this.validators=[];const a=e.model?e.model.clone():new S.i({},this.props.l10n);this.state={model:a,submitDisabled:!1,mounted:!1},this.handleSubmit=this.handleSubmit.bind(this),this.handleChange=this.handleChange.bind(this),this.getFormRef=this.getFormRef.bind(this),this.dispatchSubmitEvent=o(this.dispatchSubmitEvent.bind(this),(null===(n=null===(t=this.props.multiItem)||void 0===t?void 0:t.multiItemContext)||void 0===n?void 0:n.packageType)&&!e.isMobile?2e3:200,{trailing:!0}),this.essAnalyticsLogger=new v.EssClientLogger(e.analytics,s.ClientLogger,(a||{}).destination,null===(i=null===(r=this.props.l10n)||void 0===r?void 0:r.experimentStore)||void 0===i?void 0:i.exposures)}componentWillReceiveProps(e){e.model!==this.props.model&&this.setState({model:e.model?e.model.clone():new S.i({},this.props.l10n)})}componentDidMount(){this.setState({mounted:!0})}get hiddenFields(){const{displayFields:e,ignoreFields:t}=this.props,{model:n,mounted:r}=this.state,i=[];return r||i.push("latLong","regionId"),Object.keys(qe([...Qe,...null!=t?t:[],...null!=e?e:[],...i]).merge({},n))}get modelDefaults(){return S.i&&S.i.DEFAULTS||{}}get displayFieldsActive(){const{model:e}=this.state,{displayFields:t}=this.props;return null==t?void 0:t.reduce(((t,n)=>{const r=e&&e[n],a=this.modelDefaults[n];return i.comparer.structural(r,a)||t.push(n),t}),[])}get displayFieldsActiveLength(){return this.displayFieldsActive&&this.displayFieldsActive.length}clearDisplayfields(){var e;const t=this.state.model;null===(e=this.displayFieldsActive)||void 0===e||e.forEach((e=>{const n=this.modelDefaults[e];t&&e&&(t[e]=n),"hotelName"===e&&(t.selected="")}))}handleChange(e){document&&document.dispatchEvent&&"function"==typeof document.dispatchEvent&&CustomEvent&&document.dispatchEvent(new CustomEvent("mesoSlotFilterUpdate",{detail:{type:"slotFilter",editType:"adding",filterData:null==e?void 0:e.target}})),this.setState({submitDisabled:!1})}dispatchSubmitEvent(){var e;const t=new Event("submit",{cancelable:!0});null===(e=this.formRef)||void 0===e||e.dispatchEvent(t)}handleSubmit(e){var t;const{onUpdateResults:n}=this.props;this.essAnalyticsLogger&&this.essAnalyticsLogger.logWizardSubmitEvent(),this.setState({submitDisabled:!0});const r=[];if(this.validators.forEach((e=>{const t=e();t&&r.push(t)})),r.length>0){e&&"function"==typeof e.preventDefault&&e.preventDefault();const t=r.find((e=>e.focus));t&&t.focus(),this.setState({submitDisabled:!1}),Ye&&"function"==typeof Ye.logEvent&&Ye.logEvent(new c.SystemEvent(c.SystemEventLevel.ERROR,"SEARCH_FORM_HANDLE_SUBMIT_ERROR"),JSON.stringify(r),{escalation:K.w.CUSTOMER})}else null===(t=this.props.analytics)||void 0===t||t.resetAnalyticsForNewPage(),"function"==typeof n&&n(e,this.state.model)}render(){var e;const{displayFields:t,multiItem:n}=this.props,{model:i,submitDisabled:a}=this.state,o=null===(e=null==n?void 0:n.multiItemContext)||void 0===e?void 0:e.packageType,s={submitDisabled:a};return r.createElement(I,{method:"GET",action:"/Hotel-Search","data-stid":"sidebar-search-form",noValidate:!0,wrappedFormRef:this.getFormRef,onSubmit:this.handleSubmit},r.createElement(y.Experiment,{name:"HoB_SQM_AA_TEST_1"},r.createElement(y.ExperimentControl,null),r.createElement(y.ExperimentVariant,{bucket:1})),r.createElement(y.Experiment,{name:"HoB_SQM_AA_Test_2"},r.createElement(y.ExperimentControl,null),r.createElement(y.ExperimentVariant,{bucket:1})),r.createElement(f.E,Object.assign({},(e=>te(re(e))?{columns:{small:1,medium:2,large:3},space:"two"}:ne(re(e))?{columns:{small:1,medium:4,large:6},space:"two"}:void 0)(n)),t&&t.length>0&&t.map((e=>r.createElement(et,{key:`displayField-${e}`,field:e,model:i,validators:this.validators,handleChange:this.handleChange}))),this.hiddenFields&&this.hiddenFields.length>0&&this.hiddenFields.map((e=>r.createElement(Je,{key:`hidden_${e}`,field:e,model:i,validators:this.validators,handleChange:this.handleChange}))),r.createElement(b.l_,null,r.createElement(b.Vk,null,r.createElement(r.Fragment,null,o===g.yR.HC&&r.createElement(j,{model:this.state.model,modelKey:"multiItemCarTimeRange",updateModelCallback:this.handleChange,validators:this.validators}),r.createElement(Xe,Object.assign({},s)))),r.createElement(b.N2,null,r.createElement(r.Fragment,null,r.createElement(Xe,Object.assign({},s)),o===g.yR.HC&&r.createElement(j,{model:this.state.model,modelKey:"multiItemCarTimeRange",updateModelCallback:this.handleChange,validators:this.validators}))))))}getFormRef(e){this.formRef=e}};Ze.defaultProps={displayFields:[],ignoreFields:[],provideDefaultSubmitButton:!0,l10n:{}},We([i.computed],Ze.prototype,"displayFieldsActive",null),We([i.computed],Ze.prototype,"displayFieldsActiveLength",null),Ze=We([E.withLocalization,(0,a.inject)("analytics","multiItem"),a.observer],Ze);const Xe=({submitDisabled:e,packageType:t,showSubmitButtonIcon:n})=>{const i={type:"submit",rfrr:"FORM.SUBMIT",linkName:"Submit search form",isFullWidth:!0,size:h.E.LARGE,"data-stid":"submit-hotel-search"},a=n?r.createElement(p.a,{name:"search"}):r.createElement(E.LocalizedText,{message:"hotels.search.form.submit.label"}),o=[r.createElement(b.N2,{key:"medium"},r.createElement(f.a,null,r.createElement("div",null,r.createElement(m.c,{align:"right"},r.createElement(Ke,Object.assign({},i),a)))))];return o.push(r.createElement(b.Vk,{key:"small"},r.createElement(f.a,null,r.createElement("div",null,r.createElement(Ke,Object.assign({},i,{disabled:e}),a))))),t!==g.yR.FH&&t!==g.yR.FHC||o.push(r.createElement(b.N0,{key:"large"},r.createElement(f.a,null,r.createElement("div",null,r.createElement(Ke,Object.assign({},i),a))))),r.createElement(b.l_,null,o)};Xe.displayName="DefaultSubmitButton";const Je=({field:e,model:t,validators:n,handleChange:i})=>{if(["rooms"].includes(e))return r.createElement(et,{key:`displayField-${e}`,field:e,model:t,hidden:!0,validators:n,handleChange:i});const a={type:"hidden",name:e,value:t[e]||"",disabled:!1};return(""===a.value||"number"==typeof a.value.length&&0===a.value.length)&&(a.disabled=!0),r.createElement("input",Object.assign({},a))};Je.displayName="HiddenField";const et=({field:e,model:t,validators:n,handleChange:i,isSubmitted:a,fetchDatePickerRates:o,essAnalyticsLogger:s,hidden:l=!1})=>{const c=ze[e];return c?r.createElement(c,{model:t,modelKey:e,validators:n,updateModelCallback:i,isSubmitted:a,fetchDatePickerRates:o,essAnalyticsLogger:s,hidden:l}):null};et.displayName="DisplayField"},36008:function(e,t,n){n.d(t,{n:function(){return s}});var r=n(38972),i=n(63188),a=n(64572),o=n(71516);const s=({children:e})=>{const{uiPage:t}=(0,a.m)();return r.createElement(o.bq,{dispatchHandler:({message:e})=>{null==t||t.showNotification(e),(0,i.liveAnnounce)(e,i.Level.POLITE)}},e)}},48525:function(e,t,n){n.d(t,{Y:function(){return f}});var r=n(38972),i=n(78096),a=n(10309),o=n(73592),s=n(19046),l=n(64572),c=n(55025),u=n(72470),d=n(87516),h=n(95263);const p=(e,t)=>{const n=e.split(/[-/]/);return n[0]&&n[1]&&n[2]?/^dd?\/mm?\/yyyy$/i.test(t)&&/^(0?[1-9]|[12][0-9]|3[01])\/(0?[1-9]|1[0-2])\/\d{4}$/.test(e)?{year:parseInt(n[2],10),month:parseInt(n[1],10),day:parseInt(n[0],10)}:/^mm?\/dd?\/yyyy$/i.test(t)&&/^(0?[1-9]|1[0-2])\/(0?[1-9]|[12][0-9]|3[01])\/\d{4}$/.test(e)?{year:parseInt(n[2],10),month:parseInt(n[0],10),day:parseInt(n[1],10)}:/^\d{4}[-/](0?[1-9]|1[0-2])[-/](0?[1-9]|[12][0-9]|3[01])$/.test(e)?{year:parseInt(n[0],10),month:parseInt(n[1],10),day:parseInt(n[2],10)}:null:null},f=({handleSubmit:e,showDatePicker:t,toggleDatePicker:n,autoOpenPlayback:f,includePlayback:m,dateLocalFormat:g,queryParamStartDate:v,queryParamEndDate:y,isVrboPastDateSearch:E,queryParamLatLong:b,alternateDestination:S,dateFieldInitialFocus:T,redirectToSearchResultOnSubmit:R,autoSubmitOnFieldChange:_,queryParamDaysInFuture:O,queryParamStayLength:I,queryRooms:C})=>{var x,D,P,w,k,A,L,N,j,M;const{page:F}=(0,l.m)(),U=(0,i.useHistory)(),B=(0,h.IJ)(),H=p(v,null!=g?g:""),$=p(y,null!=g?g:""),G=!H&&O?(0,s.mH)(O,I):{checkInDate:H,checkOutDate:$},V=null===(x=null==B?void 0:B.secondaryCriteria)||void 0===x?void 0:x.selections,z=(null==G?void 0:G.checkInDate)&&(null==G?void 0:G.checkOutDate)||V?((e,t,n,r)=>{var i;return(null==e?void 0:e.primarySearchCriteria.property)?t&&n?Object.assign(Object.assign({},e),{primarySearchCriteria:Object.assign(Object.assign({},null==e?void 0:e.primarySearchCriteria),{property:Object.assign(Object.assign({},e.primarySearchCriteria.property),{dateRange:Object.assign(Object.assign({},null===(i=null==e?void 0:e.primarySearchCriteria)||void 0===i?void 0:i.property.dateRange),{checkInDate:t,checkOutDate:n})})}),secondaryCriteria:Object.assign(Object.assign({},e.secondaryCriteria),{selections:[]})}):r?Object.assign(Object.assign({},e),{primarySearchCriteria:Object.assign(Object.assign({},null==e?void 0:e.primarySearchCriteria),{property:Object.assign(Object.assign({},e.primarySearchCriteria.property),{dateRange:null})}),secondaryCriteria:Object.assign(Object.assign({},e.secondaryCriteria),{selections:[]})}):Object.assign(Object.assign({},e),{primarySearchCriteria:Object.assign(Object.assign({},null==e?void 0:e.primarySearchCriteria),{property:Object.assign({},e.primarySearchCriteria.property),secondaryCriteria:Object.assign(Object.assign({},e.secondaryCriteria),{selections:[]})})}):e})(B,null!==(D=null==G?void 0:G.checkInDate)&&void 0!==D?D:null,null!==(P=null==G?void 0:G.checkOutDate)&&void 0!==P?P:null,E):B,[W,Y]=r.useState(!1),q=null===(k=null===(w=null==B?void 0:B.secondaryCriteria)||void 0===w?void 0:w.selections)||void 0===k?void 0:k.some((e=>e.value===o.X.PETS_ALLOWED)),[K,Q]=r.useState(!1);r.useEffect((()=>{const e=(0,a.parse)(U.location.search).pwaDialog,t=Boolean(e)||""===e;"PUSH"===U.action&&t&&Q(!0),"POP"===U.action&&K?(Y(!0),Q(!1)):"POP"===U.action&&Y(!1)}),[U.action]),r.useEffect((()=>{B&&!W&&Y(!0)}),[B,W]);const{exposure:Z,logExperiment:X}=(0,c.useExperiment)("VRBO_Web_Alternative_Destinations_in_Typeahead_Lodging_SRP"),J=r.useCallback((()=>{try{X(Z)}catch(x){}}),[Z,X]),ee=1===Z.bucket,te=S||ee,ne=""+(te?"search-form-with-alternateDestination":""),re={popularFilter:!0,xPageId:F.pageId},ie=(null===(L=null===(A=null==z?void 0:z.primarySearchCriteria)||void 0===A?void 0:A.property)||void 0===L?void 0:L.rooms)||[],ae={propertySearchCriteriaInput:{primary:Object.assign(Object.assign({},null===(N=null==z?void 0:z.primarySearchCriteria)||void 0===N?void 0:N.property),{destination:Object.assign({},null===(M=null===(j=null==z?void 0:z.primarySearchCriteria)||void 0===j?void 0:j.property)||void 0===M?void 0:M.destination),rooms:[...C.length>0?C:ie]}),secondary:null==z?void 0:z.secondaryCriteria}};return r.createElement(u.TS,{name:"SearchForm",dataStid:ne},r.createElement(d.Vm,{inputs:null!=ae?ae:{},onSubmit:e,includePlayback:m,autoOpenPlayback:f,skipQuery:W,showCalendar:t,toggleCalendar:n,autoSubmitOnFieldChange:_,isAnyPetAllowed:q,updateLatLongOnSelection:te,additionalAdapterFields:te?Object.assign({alternate:!0,lastSearchLatLong:b,drivable:""},re):Object.assign({},re),onOpenLocationField:J,dateFieldInitialFocus:T,features:[d.jd.PREFILL_PROPERTY_NAME],includeFlexibleCalendarContent:!0,includeFlexibleDatesContent:!0,redirectToSearchResultOnSubmit:R}))};f.displayName="SearchFormWrapping"},21159:function(e,t,n){n.d(t,{M:function(){return N}});var r=n(38972),i=n(78096),a=n(903),o=n(43270),s=n(8169),l=n(12455),c=n(26659),u=n(64572),d=n(43463),h=n(55025),p=n(85221),f=n(99839),m=n(30164),g=n(55183),v=n(14761);const y=(0,g.inject)("uiPage")((0,g.observer)((({uiPage:e})=>(r.useEffect((()=>()=>null==e?void 0:e.hideProgressIndicator()),[e]),r.createElement(s.ErrorBoundary,{label:"animatedProgressIndicator.shopping-pwa"},r.createElement(v.a,{visible:e&&e.displayProgressIndicator}))))));var E=n(18095),b=n(69870),S=n(13624);const T=({className:e})=>{const t=(0,m.Zt)(),n=(0,c.t)();return r.createElement(s.ErrorBoundary,{label:"hotel.bernie.header"},r.createElement(l.h4,{className:e,lineOfBusiness:E.Y_A.HOTEL,customJourneyCriterias:R(t),marketing:_(n,t)}))};T.displayName="Header";const R=e=>{let t;const{regionId:n,startDate:r,endDate:i}=e||{};return Number(n)&&(t=[{destination:{regionId:n},dateRange:{startDate:r,endDate:i}}]),t},_=(e,t)=>{var n,r,i,a,o,s;const l=e&&t&&(null===(r=null===(n=(0,b.R)(e,t))||void 0===n?void 0:n.secondary)||void 0===r?void 0:r.selections),c=null===(i=null==l?void 0:l.find((e=>"gclid"===e.id.toLowerCase())))||void 0===i?void 0:i.value,u=null===(a=null==l?void 0:l.find((e=>"mdpdtl"===e.id.toLowerCase())))||void 0===a?void 0:a.value,d=null===(o=null==l?void 0:l.find((e=>"icmdtl"===e.id.toLowerCase())))||void 0===o?void 0:o.value,h=null===(s=null==l?void 0:l.find((e=>"semcid"===e.id.toLowerCase())))||void 0===s?void 0:s.value;let p=u;return u&&(p=`${S.H.mdpdtl}=${u}`),d&&(p=`${S.H.icmdtl}=${d}`),h&&(p=`${S.H.semcid}=${h}`),{metaDistributionPartnersDetails:p,googleClickIdentifier:c}};var O=n(59039);const I=(0,g.inject)("uiPage")((0,g.observer)((({uiPage:e})=>(r.useEffect((()=>()=>null==e?void 0:e.resetNotification()),[e]),e&&e.notifications?r.createElement(r.Fragment,null,r.createElement(s.ErrorBoundary,{label:"notifications.shopping-pwa"},e.notifications.show&&r.createElement(O.E,{show:e.notifications.show},e.notifications.message))):null))));var C=n(14030),x=n(81810),D=n(26246),P=n(86852),w=n(33184);const k=({pageHeader:e,templateContent:t,inlineMargin:n="six"})=>{const{multiItem:i,page:a}=(0,u.m)(),o=!(null==i?void 0:i.isPackageShoppingPath())&&(null==a?void 0:a.pageName)===w.zz.SA,l=e&&r.createElement("header",null,r.createElement("h1",{className:"is-visually-hidden"},e)),c=r.createElement("div",null,o?r.createElement(P.S,null):l,r.createElement("div",{className:"main-region"},r.createElement(s.ErrorBoundary,{label:"hotel.masterPage.template"},t)));return r.createElement(D.b,{margin:{medium:{inline:n}}},c)};k.displayName="BodyRegion";const A=r.memo(T),L=r.memo(l.$_),N=(0,i.withRouter)((({"data-stid":e="master-page",inlineMargin:t,pageHeader:n,route:i,templateContent:l})=>{const g=(0,p.useLocalization)(),v=(0,a.x)(),{analytics:E,context:b,page:S,searchCriteria:T}=(0,u.m)(),R=(0,h.useExperiment)("Lodging_Shopping_PWA_EGTNL_AA_Test");E&&i&&i.routeData&&(E.setPageNamespace(i.routeData.rfrrNamespace||""),S&&!S.pageName&&(S.pageName=i.routeData.pageName||"page.unknown"));const _=(0,d.getProductHeaderLink)((null==S?void 0:S.pageName)||"");v.setLink(o.i.from([_,v.link])),r.useEffect((()=>{document.title=(null==S?void 0:S.title)||g.formatText("common.defaultPageTitle")}),[null==S?void 0:S.title,g]),r.useEffect((()=>{R.logExperiment(R.exposure)}),[R]);const O=[{context:c.X,value:b},{context:m.mU,value:T}];return r.createElement(m.oj,{contextPairs:O},r.createElement(s.ErrorBoundary,{label:"lodging.masterPage.egtnlServerStressTest"},r.createElement(h.Experiment,{name:"stress_load_server_side_exposure_logging_in_shopping_pwa"},r.createElement(h.ExperimentControl,null),r.createElement(h.ExperimentVariant,{bucket:1}))),r.createElement("div",{"data-stid":e},r.createElement(h.Experiment,{name:"Lodging_Shopping_PWA_EGTNL_AA_Test"},r.createElement(h.ExperimentControl,null),r.createElement(h.ExperimentVariant,{bucket:1})),r.createElement(s.ErrorBoundary,{label:"lodging.masterPage.header"},r.createElement(A,null)),r.createElement(s.ErrorBoundary,{label:"onekey.onboarding.shopping-pwa"},r.createElement(f.L,null)),r.createElement("main",null,r.createElement(k,{templateContent:l,pageHeader:n,inlineMargin:t})),r.createElement(s.ErrorBoundary,{label:"lodging.masterPage.footer"},r.createElement(x.H,null,r.createElement(L,{skipSsr:!0}))),r.createElement(y,null),r.createElement(I,null)),r.createElement(s.ErrorBoundary,{label:"meso.scripts.errorboundary"},r.createElement(C.U,null)))}))},86852:function(e,t,n){n.d(t,{S:function(){return p}});var r=n(38972),i=n(8169),a=n(64572),o=n(38109),s=n(95263),l=n(19046),c=n(78096),u=n(48570);const d=({criteriaChanged:e,isHiddenFromScreenReader:t})=>{var n;const{context:i,experiment:o,searchCriteria:d,searchResults:h,analyticsSearch:p,pageLayout:f}=(0,a.m)(),m=(0,c.useLocation)(),g=(0,s.IJ)(),v=g?(0,l.M5)(g,i,p,m,f,d,o):void 0,[y,E]=(0,r.useState)(v);if((0,r.useEffect)((()=>{e&&E(v)}),[e]),!(i&&d&&h&&p))return null;const b={summary:{resultsHeading:null===(n=h.resultsHeading)||void 0===n?void 0:n.split("|")[0]}};return y?r.createElement(u.FT,{data:b,propertySearchListingsPwa:null==h?void 0:h.propertySearchListings,inputs:y,isHiddenFromScreenReader:t}):null};d.displayName="ResultsAccessibilityHeading";var h=n(33184);const p=({isHiddenFromScreenReader:e})=>{const{context:t,searchResults:n,multiItem:c,searchCriteria:u,page:p}=(0,a.m)(),f=!(null==c?void 0:c.isPackageShoppingPath())&&(null==p?void 0:p.pageName)===h.zz.SA,m=!!(t&&u&&n)&&(0,l.or)(t,u,n);return f&&r.createElement(o.lS,{productType:o.kv.Lodging},r.createElement(s.rO,null,r.createElement(i.ErrorBoundary,{label:"hotel.masterPage.results.accessibility.heading"},r.createElement(d,{criteriaChanged:m,isHiddenFromScreenReader:e}))))||null};p.displayName="ResultsAccessibilityHeadingRegion"},14030:function(e,t,n){n.d(t,{U:function(){return p}});var r=n(38972),i=n(38591),a=n(55183),o=n(64425),s=n(95263),l=n(26676),c=n(33184);const u=e=>{var t,n,r,i,a;if(e instanceof l.i)return e;const o=null===(t=null==e?void 0:e.primarySearchCriteria)||void 0===t?void 0:t.cruise,s=null!==(n=null==o?void 0:o.adultCount)&&void 0!==n?n:2,c=null!==(r=null==o?void 0:o.childCount)&&void 0!==r?r:0,u=null!==(i=null==o?void 0:o.destinations)&&void 0!==i?i:null,{end:d,start:h}=null!==(a=null==o?void 0:o.departureDateRange)&&void 0!==a?a:{end:{},start:{}};return{regionId:"",startDate:`${null==h?void 0:h.year}-${null==h?void 0:h.month}-${null==h?void 0:h.day}`,endDate:`${null==d?void 0:d.year}-${null==d?void 0:d.month}-${null==d?void 0:d.day}`,adults:s,children:c,star:"",amenities:"",lodging:"",origin:"",cruiseDest:u}},d=e=>{var t;return Object.assign(Object.assign({},e),{targeting:Object.assign(Object.assign({},null!==(t=null==e?void 0:e.targeting)&&void 0!==t?t:{}),{sr:""})})},h=e=>{window.meso=window.meso||{},window.meso.targeting=window.meso.targeting||[],window.meso.targeting.push(e)},p=(0,a.inject)("advertising","page","experiment","context","searchResults","currentHotel")((({advertising:e,page:t,experiment:n,context:a,searchResults:l,currentHotel:p})=>{const[f,m]=(0,r.useState)(null),g=(0,s.IJ)(),v=e=>{const t=(e=>{var t,n,r;const{regionId:i,startDate:a,endDate:o,adults:s,children:l,star:c,amenities:d,lodging:h,origin:p,cruiseDest:f}=u(e);return{type:"update",targeting:Object.assign(Object.assign(Object.assign(Object.assign({dateEnd:null!=o?o:"",dateStart:null!=a?a:"",adults:s,kids:l},f&&{cruiseDest:f}),i&&{dest:i}),p&&{origin:p}),{locResolver:"gaia",ha:null!==(t=null==d?void 0:d.toString())&&void 0!==t?t:"",hpt:null!==(n=null==h?void 0:h.toString())&&void 0!==n?n:"",sr:null!==(r=null==c?void 0:c.toString())&&void 0!==r?r:""})}})(e);((e,t)=>{var n,r;return(null===(r=null===(n=null===window||void 0===window?void 0:window.meso)||void 0===n?void 0:n.adblock)||void 0===r?void 0:r.acceptableads)?!i.comparer.structural(d(e),d(t)):!i.comparer.structural(e,t)})(f,t)&&(m(t),h(t))},y=(0,r.useMemo)((()=>!!(null==e?void 0:e.triggeredPageName)&&(h({type:"clear"}),Object.values(c.A3).some((t=>t===(null==e?void 0:e.triggeredPageName))))),[null==e?void 0:e.triggeredPageName]);return(0,r.useEffect)((()=>{((e,t,n)=>{window.meso=window.meso||{},window.meso.experiments=window.meso.experiments||[];const r=(0,o.lF)("MeSo_HSR_Holdout_Feature_Gate",e,t,n),i=r?(0,o.lF)("MeSo_HSR_Display_Ad_Hold_Out_AB_Test",e,t,n):0;window.meso.experiments.push({type:"update",experiments:{MeSo_HSR_Holdout_Feature_Gate:r||0,MeSo_HSR_Display_Ad_Hold_Out_AB_Test:i||0}})})(a,n,t)}),[a,n,t]),"page.Cruise-Search"===(null==t?void 0:t.pageName)?(0,r.useEffect)((()=>{g&&v(g)}),[g]):(0,r.useEffect)((()=>{y&&(null==p?void 0:p.searchCriteria)?v(p.searchCriteria):(null==l?void 0:l.searchCriteria)&&v(null==l?void 0:l.searchCriteria)}),[y,null==l?void 0:l.searchCriteria,null==p?void 0:p.searchCriteria]),null}));p.displayName="MesoScripts"},42793:function(e,t,n){n.d(t,{E:function(){return u}});var r=n(38972),i=n(8169),a=n(36182),o=n(63188),s=n(18533),l=n(55025),c=n(84989);const u=e=>{(0,l.useExperiment)("MeSo_Remove_Eager_Fetch_on_client_side_ads_Web",!0);let t="meso-display-ad";(null==e?void 0:e.uci)&&(t+=`-${e.uci}`);const[n]=(0,s.F)(t),u=r.useMemo((()=>{var t;return r.createElement(c.d,{uci:null!==(t=e.uci)&&void 0!==t?t:"",displayAdRef:n})}),[]),d=r.useMemo((()=>{var t;return r.createElement(c.d,{uci:null!==(t=e.uci)&&void 0!==t?t:"",displayAdRef:n,adSwapEnabled:e.adSwapEnabled,isEnabled:e.isEnabled})}),[n,e.isEnabled,e.adSwapEnabled,e.uci]),h=(0,o.classNames)("ad-div","display-ad",e.className&&{[e.className]:e.className});return r.createElement(i.ErrorBoundary,{label:"meso.display.ad"},r.createElement(a.d,{type:"relative",className:h},e.adSwapEnabled?d:u))};u.displayName="MesoDisplayAd"},53199:function(e,t,n){n.d(t,{y:function(){return h}});var r=n(38972),i=n(55183),a=n(8169),o=n(51204),s=n(26246),l=n(11474),c=n(42793),u=n(7611),d=n(33184);const h=(0,i.inject)("advertising")((0,i.observer)((({advertising:e})=>Object.values(d.A3).some((t=>t===(null==e?void 0:e.triggeredPageName)))?r.createElement((({pageName:e})=>r.createElement(a.ErrorBoundary,{label:"meso.footer"},r.createElement(s.b,{padding:{block:"four"}},r.createElement(o.E,{justifyItems:"center"},r.createElement(o.a,null,r.createElement(c.E,Object.assign({},u.DC.FOOTER_CM1))),r.createElement(o.a,null,r.createElement(c.E,Object.assign({},u.DC.FOOTER_CM2))),r.createElement(o.a,null,r.createElement(c.E,Object.assign({},u.DC.FOOTER_CM3))),r.createElement(o.a,null,(e=>!!e&&Object.values(l.yR).some((t=>d.A3[t]===e)))(e)?r.createElement(c.E,Object.assign({},u.DC.FOOTER_CM4)):r.createElement(c.E,Object.assign({},u.DC.FOOTER_CM6))))))),{pageName:null==e?void 0:e.triggeredPageName}):r.createElement((()=>r.createElement(a.ErrorBoundary,{label:"meso.footer"},r.createElement(s.b,{padding:{blockstart:"six"}},r.createElement(o.E,{justifyItems:"center"},r.createElement(o.a,null,r.createElement(c.E,Object.assign({},u.DC.FOOTER_CM1))),r.createElement(o.a,null,r.createElement(c.E,Object.assign({},u.DC.FOOTER_CM2))),r.createElement(o.a,null,r.createElement(c.E,Object.assign({},u.DC.FOOTER_CM3))))))),null))))},40828:function(e,t,n){n.d(t,{d:function(){return o}});var r=n(38972),i=n(42793),a=n(7611);const o=r.memo((()=>r.createElement(r.Fragment,null,r.createElement(i.E,Object.assign({},a.DC.SIDERAIL_R1)),r.createElement(i.E,Object.assign({},a.DC.SIDERAIL_R2)))));o.displayName="MesoSideRail"},86415:function(e,t,n){n.d(t,{g:function(){return l}});var r=n(38972),i=n(55183),a=n(8169),o=n(26246),s=n(30524);const l=(0,i.inject)("multiItem","analytics","page")((0,i.observer)((({multiItem:e,analytics:t,page:n})=>{var i;if(!(null==e?void 0:e.isPackageShoppingPath()))return null;let l=null;-1===(null===(i=null==n?void 0:n.pageName)||void 0===i?void 0:i.toUpperCase().indexOf("INFOSITE"))&&(l="");const c=e.multiItemSessionId;return r.createElement(a.ErrorBoundary,{label:"progress-indicator"},r.createElement(o.b,{padding:{small:{blockstart:"three",inlinestart:"three"},medium:{blockstart:"one"},large:{blockstart:"three"}}},r.createElement("div",null,r.createElement(s.Y,{inputs:{multiItemSessionId:c||null,journeyContinuationId:null,multiItemPriceToken:l,lockupPrice:null,savingsPrice:null,originalBookingId:null,additionalChangeQueryParams:null},scrimColor:"PRIMARY",showLoadingState:!0,changeLinkClickCallback:(e,n,r)=>{null==t||t.trackEvent(e,n,t.omnitureData,r,!0)},errorCallback:()=>{null==t||t.trackEvent("MIT.PROGRESS.INDICATOR.ERROR","RFRR Action Event",t.omnitureData,null,!0)}}))))})));l.displayName="MitHeader"},40536:function(e,t,n){n.d(t,{N:function(){return h}});var r=n(38972),i=n(78096),a=n(15017),o=n(36364),s=n(92061),l=n(44922),c=n(93648),u=n(84502),d=n(58439);const h=({templateComponent:e})=>{var t;const n=(0,o.jt)((0,o.Ry)({view:(0,o.jt)((0,o.jb)(l.oT)),bexQuickFiltersEnabled:(0,o.jt)((0,o.O7)()),filterBarSpacing:(0,o.jt)((0,o.Yj)()),carouselEdgeItemsPadding:(0,o.jt)((0,o.Yj)())})),i=(0,o.As)(n,e.config);if(!i.success)return null;const{view:a,bexQuickFiltersEnabled:s,filterBarSpacing:u,carouselEdgeItemsPadding:d}=null!==(t=i.output)&&void 0!==t?t:{},h={dialogView:a,bexQuickFiltersEnabled:s};return r.createElement(c.l_,null,r.createElement(c.Vk,null,r.createElement(p,Object.assign({withMapButton:!0},h,{filterBarSpacing:u,carouselEdgeItemsPadding:d}))),r.createElement(c.N0,null,r.createElement(p,Object.assign({withMapButton:!1},h,{filterBarSpacing:u,carouselEdgeItemsPadding:d}))))};h.displayName="Filterbar";const p=({withMapButton:e,dialogView:t,bexQuickFiltersEnabled:n,filterBarSpacing:o,carouselEdgeItemsPadding:c})=>{const h=(0,a.MH)(),p=(0,s.xB)(),f=e&&r.createElement("div",{"data-stid":"map-trigger"},r.createElement(u.r,{viewTracker:h,tracker:p,dialogView:t,bexQuickFiltersEnabled:n})),m=new URLSearchParams((0,i.useLocation)().search);return r.createElement(r.Fragment,null,"map"!==m.get("pwaOverlay")&&r.createElement("div",{"data-stid":"filterbar"},r.createElement(d.t,{view:l.oT.FILTER_BAR,filterBarSpacing:o,carouselEdgeItemsPadding:c})),f)}},74344:function(e,t,n){n.d(t,{K:function(){return g}});var r=n(38972),i=n(83028),a=n(8684),o=n(23783),s=n(25738),l=n(92061),c=n(55025),u=n(85221),d=n(48570),h=n(27247),p=n(64572),f=n(73232);const m=({l10n:e,onClick:t,toggled:n,iconName:s,name:l})=>n?r.createElement(i.E,{type:"button",id:`${l}-toggle`,"aria-label":e.formatText("gridView.toggle.selected.a11yLabel",l)},r.createElement(o.a,{name:s})):r.createElement(a.E,{type:"button",onClick:t,id:`${l}-toggle`,"aria-label":e.formatText("gridView.toggle.unselected.a11yLabel",l)},r.createElement(o.a,{name:s})),g=({alignment:e="end"})=>{const{multiItem:t,pageLayout:n,analyticsSearch:i}=(0,p.m)(),a=(0,u.useLocalization)(),o=(0,l.m_)(),{isGridView:g,toggleGridView:v}=(0,d.Yy)(),{exposure:y}=(0,c.useExperiment)("SRP_Grid_view_web",!1),E=()=>{var e;null==v||v(),null==n||n.setProductCardAdaptiveViewType(g?h.Rv.LIST:h.Rv.GRID,!0),e=!g,o(Object.assign({},(0,f.M)(e,null==i?void 0:i.searchId)))};return(0,f.t)(y)&&!(null==t?void 0:t.isPackageShoppingPath())?r.createElement(s.i,{direction:"row",justifyContent:e,space:"one",alignItems:"center"},r.createElement(s.j,null,r.createElement(m,{l10n:a,onClick:E,toggled:!g,iconName:"view_list",name:a.formatText("gridView.toggle.flavour.list")})),r.createElement(s.j,null,r.createElement(m,{l10n:a,onClick:E,toggled:g,iconName:"view_grid_large",name:a.formatText("gridView.toggle.flavour.grid")}))):null}},73232:function(e,t,n){n.d(t,{M:function(){return r},t:function(){return i}});const r=(e,t)=>({event:{event_name:e?"grid_view.selected":"list_view.selected",event_type:"Interaction",event_version:"1.0.0"},search_request:{search_id:t}}),i=e=>1===(null==e?void 0:e.bucket)||2===(null==e?void 0:e.bucket)},10051:function(e,t,n){n.d(t,{i:function(){return w}});var r=n(38972),i=n(78096),a=n(38591),o=n(52011),s=n(8169),l=n(39828),c=n(82913),u=n(27247),d=n(64572),h=n(50806),p=n(4007),f=n(71173),m=n(92061),g=n(55025),v=n(85221),y=n(14555),E=n(93648),b=n(19046),S=n(85690),T=n(91733),R=n(45550),_=n(61243);const{withoutKeys:O,flattenFields:I,allKeys:C}=o.merge,x=["criteria_primary_destination_regionName","criteria_primary_destination_regionId","criteria_primary_destination_coordinates","criteria_primary_destination_pinnedPropertyId","criteria_primary_destination_propertyIds","criteria_primary_destination_mapBounds","criteria_primary_destination_coordinates_latitude","criteria_primary_destination_coordinates_longitude"];var D=n(33184),P=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const w=({cfg:e,clientPadding:t,onMapDialogClosed:n,filterComponent:w,fullscreenOptions:k,onInit:A,setViewportToApplyOnMapExpandChange:L,mapFocusHolderDisabled:N})=>{var j,M,F,U,B,H,$,G,V,z;const{analytics:W,searchResults:Y,searchCriteria:q,pageLayout:K,currentHotel:Q,multiItem:Z,experiment:X,page:J,map:ee,context:te,analyticsSearch:ne}=(0,d.m)(),re=(0,i.useHistory)(),ie=(0,i.useLocation)(),ae=(0,v.useLocalization)(),oe=r.useRef(),{highlightedPropertyId:se}=(0,c.KJ)(),le=r.useMemo((()=>Boolean(new URLSearchParams(ie.search).get("selected"))),[ie.search]),ce=null===(j=null==Y?void 0:Y.searchCriteria)||void 0===j?void 0:j.categorySearch,{exposure:ue}=(0,g.useExperiment)("Akamai_smart_cropping_for_PDP_image_gallery"),{exposure:de}=(0,g.useExperiment)("mWeb_larger_image_for_top_of_PDP_gallery"),{exposure:he}=(0,g.useExperiment)("PropertyDetailsQuery_CSR"),{exposure:pe,logExperiment:fe}=(0,g.useExperiment)("Map_sheet_on_pinned_SRP_sheet_optimisation"),{exposure:me}=(0,g.useExperiment)("Thematic_search_by_categories_Post_mvp_BEXGH"),ge=(0,h.I)(X,te);r.useEffect((()=>{le&&fe(pe)}),[le]);const ve=le?(e=>{switch(e){case 1:return y.jy.CENTERED;case 2:return y.jy.BOTTOM;default:return y.jy.FULL}})(pe.bucket):y.jy.FULL,{reset:ye}=(0,m.xB)(),Ee=ee?e=>ee.setCustomPlace(e):void 0,be=null===(M=null==ee?void 0:ee.customPlaces)||void 0===M?void 0:M[0],Se=(e=>{var t;return e===(null===(t=D.zz.SA)||void 0===t?void 0:t.valueOf())?"Lodging":"Package"})((null==J?void 0:J.pageName)||D.zz.SA);ye({data:{experience:{page_product_line:Se}},config:{isEgClickstream:!0}});const[Te]=r.useState((e=>{var t,n;const r=null===(n=null===(t=null==e?void 0:e.latLong)||void 0===t?void 0:t.split(","))||void 0===n?void 0:n.map(parseFloat);if(2===(null==r?void 0:r.length)&&(0!==r[0]||0!==r[1]))return{center:r,zoom:10}})(q)),Re=(0,E.uQ)(f.N),_e=!(null==Z?void 0:Z.isPackageShoppingPath()),Oe=r.useCallback((()=>{var e,t,n,r,i;const a=_e?null===(e=null==q?void 0:q.paginationSubSets)||void 0===e?void 0:e.previousSubset:null===(n=null===(t=null==Y?void 0:Y.pagination)||void 0===t?void 0:t.subSets)||void 0===n?void 0:n.previousSubset,o={size:(0,S.d)(te)?null==a?void 0:a.size:100,startingIndex:(null!==(r=null==a?void 0:a.startingIndex)&&void 0!==r?r:0)+(null!==(i=null==a?void 0:a.size)&&void 0!==i?i:0)},s=te?(0,b.pu)(te,ne,Y.searchCriteria,null==Z?void 0:Z.multiItemContext,o):{context:te,destination:{}},{context:l}=s;return P(s,["context"])}),[te,Z,Y,q,X]),[Ie,Ce]=r.useState(Oe());r.useEffect((()=>{(0,a.autorun)((()=>{if(te){const e=Oe();Ce((t=>((e,t)=>{var n,r,i,o,s,l,c;const[u,d]=[O(x).merge({},I(e)),O(x).merge({},I(t))];if(!(0,R.isEqual)(u,d))return t;const[h,p]=[null===(n=null==e?void 0:e.criteria)||void 0===n?void 0:n.primary.destination,null===(r=t.criteria)||void 0===r?void 0:r.primary.destination],f=a.comparer.structural(C().merge({},null!==(i=null==h?void 0:h.coordinates)&&void 0!==i?i:{}),C().merge({},null!==(o=null==p?void 0:p.coordinates)&&void 0!==o?o:{})),m=(null==h?void 0:h.regionName)!==(null==p?void 0:p.regionName),g=null!==(null===(c=null===(l=null===(s=t.criteria)||void 0===s?void 0:s.primary)||void 0===l?void 0:l.destination)||void 0===c?void 0:c.regionId);return f&&(g||m)?e:t})(t,e)))}}))}),[te,Z,Y,q,X]);const xe=r.useCallback((e=>{L&&L(e.bounds)}),[L]);r.useEffect((()=>{oe.current&&oe.current.addBoundChangeListener(xe,"updateViewportToApplyOnMapExpandChange")}),[xe]);const De=(null==K?void 0:K.templateName)===u.Pb.SplitView,Pe=De?{__typename:"PropertySearchResults",dynamicMap:null==Y?void 0:Y.dynamicMap,propertySearchListings:null==Y?void 0:Y.propertySearchListings}:void 0;r.useEffect((()=>{var e,t,n;if(L){let r;const{initialViewport:i,bounds:a}=(null===(e=null==Pe?void 0:Pe.dynamicMap)||void 0===e?void 0:e.map)||{};if(i===l.BfN.BOUNDS&&a){const{northeast:{latitude:e,longitude:t},southwest:{latitude:n,longitude:i}}=a;r={sw:[n,i],ne:[e,t]}}else i===l.BfN.FIT_MARKERS&&(r=null===(n=null===(t=null==Pe?void 0:Pe.dynamicMap)||void 0===t?void 0:t.map)||void 0===n?void 0:n.markers.flatMap((e=>"EGDSMapFeature"===e.__typename?[[e.markerPosition.latitude,e.markerPosition.longitude]]:[])));r&&L(r)}}),[L,null===(F=null==Pe?void 0:Pe.dynamicMap)||void 0===F?void 0:F.map,null===(B=null===(U=null==Pe?void 0:Pe.dynamicMap)||void 0===U?void 0:U.map)||void 0===B?void 0:B.bounds,null===($=null===(H=null==Pe?void 0:Pe.dynamicMap)||void 0===H?void 0:H.map)||void 0===$?void 0:$.markers,null===(V=null===(G=null==Pe?void 0:Pe.dynamicMap)||void 0===G?void 0:G.map)||void 0===V?void 0:V.initialViewport]);const we=r.useCallback((e=>{oe.current=e,xe&&e.addBoundChangeListener(xe,"updateViewportToApplyOnMapExpandChange"),A&&A(e)}),[]),ke=r.useCallback(((e,t)=>((e,t,...n)=>e===_.i18nKeys.defaultClusterPropertyLabel?t.formatText("egmaps.markers.cluster.available.text",n[0]):void 0)(e,ae,...t)),[ae]),Ae=r.useMemo((()=>Object.assign(Object.assign(Object.assign({},e),{i18n:{formatFunction:ke}}),{googleMaps:{gmapsAddConfig:{useStaticMap:!1}}})),[e,ke]);if(!(te&&(null==Y?void 0:Y.searchCriteria)&&ne&&Q))return null;const Le=n?{onClose:n,isDialogOpen:!0,triggerRef:null!==(z=null==k?void 0:k.triggerRef)&&void 0!==z?z:null}:void 0,Ne=Re===E.Cu.LARGE||Re===E.Cu.EXTRA_LARGE,je=ge&&Ne,Me=!Ne||!De;return r.createElement(r.Fragment,null,!N&&r.createElement("div",{id:"map-focus-holder-entry",role:"button",tabIndex:0,onKeyDown:e=>{if(e.shiftKey&&"Tab"===e.key){const t=document.querySelectorAll('[data-stid="next-button"]');t.length&&t[0]&&(e.preventDefault(),t[0].focus())}},"aria-label":"Map"}),r.createElement(s.ErrorBoundary,{label:"search.map.dynamic-search-map"},r.createElement(y.VZ,{showToolbar:Me,hideOverfilteredToast:je,propertySearchResult:Pe,inputs:Ie,selectedFeatureId:se,clientPadding:t,fullscreenOptions:Le,egMapsConfig:Ae,filterComponent:w,onDestinationChanged:e=>{var t,n,r,i;const a=e.coordinates?`${e.coordinates.latitude},${e.coordinates.longitude}`:"undefined,undefined",s=e.mapBounds?[[null===(t=e.mapBounds[0])||void 0===t?void 0:t.latitude,null===(n=e.mapBounds[0])||void 0===n?void 0:n.longitude],[null===(r=e.mapBounds[1])||void 0===r?void 0:r.latitude,null===(i=e.mapBounds[1])||void 0===i?void 0:i.longitude]]:null;(null==W?void 0:W.clickTracker)&&W.clickTracker("Module.Map.Search.Button","User clicking the map search button on PWA HSR Map",null,(()=>null));const l=1===(null==me?void 0:me.bucket)?ce:"";ne.withPublishingAnalyticsPayload(o.updateSearch,W,X)({history:re,location:ie,newParams:Object.assign({regionId:"",destination:"",selected:"",poi:"",latLong:a,mapBounds:s,neighborhood:"",multi_neighborhood_group:""},ce?{categorySearch:l}:null)}),window.scrollTo(0,0)},onLodgingCardClickCallback:e=>{null==Q||Q.setPropertyListingAsCurrentHotel(e);const t=ue.bucket,n=de.bucket,r=he.bucket;(0,T.al)(e,{isMobile:(0,p.tq)(te),isTablet:(0,p.Em)(te)},t,n,r)},initialViewport:Te,height:"100%",isPropertyListingLoading:(0,S.d)(te)&&Ne||null==Y?void 0:Y.isLoading,onInit:we,setSavedFeature:Ee,savedFeature:be,sheetType:ve})),!N&&r.createElement("div",{id:"map-focus-holder-exit",role:"button",tabIndex:0,onKeyDown:e=>{e.preventDefault();document.getElementById("post-map-focus-footer").focus()},"aria-label":"Map"}))};w.displayName="DynamicSearchMapWrapper"},84502:function(e,t,n){n.d(t,{r:function(){return O}});var r=n(38972),i=n(78096),a=n(55183),o=n(1415),s=n(52011),l=n(79420),c=n(8169),u=n(25738),d=n(26246),h=n(13200),p=n(10309),f=n(15017),m=n(4007),g=n(55025),v=n(14555),y=n(44922),E=n(95263),b=n(58439),S=n(10051),T=n(7342);const R={markers:{place:{zIndex:{unknown:0}},property:{zIndex:{[`${h.my.NOT_CLUSTERED}`]:0}}}},_=o.ClientLogger.getLoggerWithIdentifier("pwa.component.mappreview"),O=(0,a.inject)("experiment","multiItem","searchResults","searchCriteria","context","analyticsSearch")((0,a.observer)((e=>{const{context:t,dialogView:n,multiItem:a,tracker:o,viewTracker:h,searchInputs:O,searchResults:I,searchCriteria:C,bexQuickFiltersEnabled:x,analyticsSearch:D}=e,P=(0,i.useLocation)(),w=(0,i.useHistory)(),{exposure:k,logExperiment:A}=(0,g.useExperiment)("Filter_Removal_at_destination_level_based_on_supply_mweb_apps"),L=r.useMemo((()=>Boolean(new URLSearchParams(P.search).get("selected"))),[P.search]),{exposure:N,logExperiment:j}=(0,g.useExperiment)("Vrbo_map_button_on_pinned_SRP_contrast_optimisation"),{exposure:M}=(0,g.useExperiment)("Map_button_CTA_optimisation_on_pinned_SRP"),{exposure:F}=(0,g.useExperiment)("Quick_Filters_On_Vrbo_Map_View"),U=1===F.bucket;r.useEffect((()=>{(0,m.tq)(t)&&L&&j(N)}),[t,L,N]);const B=(0,E.IJ)();if(!(t&&C&&I&&D))return _.logEvent(new l.SystemEvent(l.SystemEventLevel.ERROR,"MAP_PREVIEW_MISSING_PROPS"),{escalation:T.w.SERVICE}),null;if(!(null==I?void 0:I.mapTrigger))return _.logEvent(new l.SystemEvent(l.SystemEventLevel.ERROR,"MAP_PREVIEW_MISSING_RESULTS"),{escalation:T.w.DOWNSTREAM}),null;const H=(null==P?void 0:P.search)?(0,p.parse)(P.search):void 0,$=null!=O?O:{destination:{regionName:null==H?void 0:H.destination,pinnedPropertyId:null==H?void 0:H.selected},productShoppingCriteriaInput:B},G=x||U?y.oT.FILTER_BAR:y.oT.FILTER_DIALOG,V=x||U?{inlinestart:"four",blockstart:"four"}:{},z=(0,m.tq)(t)&&L&&1===N.bucket,W=L&&[1,2,3,4].includes(M.bucket),Y=r.createElement(S.i,{cfg:R,clientPadding:"32px",onMapDialogClosed:()=>{var e;w&&P&&(0,s.updateSearch)({history:w,location:P,newParams:{pwaOverlay:""}}),(0,f.Sv)(o,h,f.G7.LISTINGS,null!==(e=null==a?void 0:a.getPackageType())&&void 0!==e?e:void 0)},filterComponent:r.createElement(d.b,{padding:V},r.createElement(u.j,{shrink:0},r.createElement(b.t,{view:G,isMapView:!0,onOpenDialog:()=>{(null==a?void 0:a.isPackageShoppingPath())||A(k)}})))});return r.createElement(c.ErrorBoundary,{label:"search.map.map-preview"},r.createElement(v.y1,{inputs:$,dialogView:x?y.oT.FILTER_BAR:n,externalData:null==I?void 0:I.mapTrigger,showPrimaryButton:z,showMapIconInLargeView:W},Y))})))},91733:function(e,t,n){n.d(t,{al:function(){return i}});var r;!function(e){e.MEDIUM="medium",e.MEDIUM_HIGH="mediumHigh",e.HIGH="high"}(r||(r={}));const i=(e,t,n=0,r=0,i=0)=>{var o,s;const l=((e,t)=>{var n,r,i;return 2!==t||"GenericDiscoveryCard"===e.__typename||"HttpURI"!==(null===(n=e.cardLink)||void 0===n?void 0:n.resource.__typename)?"":null!==(i=null===(r=new URLSearchParams(e.cardLink.resource.value.split("?")[1]).get("pdpImageUrls"))||void 0===r?void 0:r.split(",")[0])&&void 0!==i?i:""})(e,i);if(l){const e=new Image;return e.src=l,e}if("LodgingCard"===e.__typename){const i=null===(s=null===(o=e.mediaSection.gallery)||void 0===o?void 0:o.media[0])||void 0===s?void 0:s.media;if("Image"===(null==i?void 0:i.__typename)&&(c=i.url,/trvl-media/.test(c)||/media.int/.test(c))){const e=new Image;return e.src=a(i.url,t,n,r),e}}var c;return null},a=(e,{isMobile:t,isTablet:n},i=0,a=0,o=!1)=>{if(o&&(t||n))return e;const s=new URL(e);if(t&&a){const e=575,t=575;return`${s.origin}${s.pathname}?impolicy=resizecrop&rw=${e}&rh=${t}&ra=fill`}if(i){let e=null;const n=t?575:608,a=t?323:342;switch(i){case 2:e=r.MEDIUM_HIGH;break;case 3:e=r.HIGH;break;default:e=null}return((e,t,n,r)=>{const i=r?`&q=${r}`:"";return`${e.origin}${e.pathname}?impolicy=fcrop&w=${t}&h=${n}&p=0.5${i}`})(s,n,a,e)}let l=598;return n?l=432:t&&(l=500),`${s.origin}${s.pathname}?impolicy=resizecrop&rw=${l}&ra=fit`}},68536:function(e,t,n){n.d(t,{u:function(){return u}});var r=n(38972),i=n(1415),a=n(79420),o=n(28034),s=n(55025),l=n(7342);const c=i.ClientLogger.getLoggerWithIdentifier("pwa.customer.qualtrics.experiments"),u=()=>r.createElement(s.Experiment,{name:"EGTNL_Lodging_PWA_Qualtrics"},r.createElement(s.ExperimentControl,null),r.createElement(s.ExperimentVariant,{bucket:1},r.createElement(o.v,{skipSsr:!0,onInit:e=>{((e,t)=>{const n=`Qualtrics startup zoneId: ${e} ${t?`experimentName: ${t}`:""}`;c.logEvent(new a.SystemEvent(a.SystemEventLevel.INFO,"INIT_QUALTRICS"),n,{escalation:l.w.SERVICE})})(e)}})));u.displayName="QualtricsExperiments"},73202:function(e,t,n){n.d(t,{E:function(){return B},w:function(){return U}});var r=n(38972),i=n(55183),a=n(8169),o=n(25738),s=n(26246),l=n(84502),c=n(15017),u=n(4007),d=n(92061),h=n(55025),p=n(85221),f=n(44922),m=n(93648),g=n(40536),v=n(78096),y=n(51204),E=n(49970),b=n(48570),S=n(95263),T=n(19046),R=n(52011),_=n(15954),O=n(78579),I=n(63188);const C=(0,_.ClickTracker)(O.E),x=(0,i.observer)((({searchCriteria:e,forceHistoryPushOnGoBack:t,history:n,location:i,model:a,switchPositionOfToggleOnEPS:o})=>{const{formatText:l}=(0,p.useLocalization)();if(!(a&&a.saveWithPointsActionMessage&&a.saveWithPointsMessage&&e))return null;const c=o?"trailing":"leading";return r.createElement(s.b,{padding:{block:"two"}},r.createElement("div",{"data-stid":"swp-toggle"},r.createElement(E.c,{size:300},r.createElement(C,{id:"swpToggle",checked:"true"===e.useRewards,onChange:()=>{(0,R.updateSearch)({history:n,location:i,newParams:{useRewards:String("true"!==(null==e?void 0:e.useRewards))},replace:!0}),t&&"function"==typeof t&&t(),"true"===(null==e?void 0:e.useRewards)?setTimeout((()=>(0,I.liveAnnounce)(l("common.pointsRemoved"),I.Level.POLITE)),500):setTimeout((()=>(0,I.liveAnnounce)(l("common.pointsApplied"),I.Level.POLITE)),500)},rfrr:`swpToggle: ${a.saveWithPointsActionMessage}`,linkName:"rewards toggle",switchPosition:c},a.saveWithPointsMessage))))})),D=(0,v.withRouter)(x);var P=n(74344),w=n(73232),k=n(58439),A=n(8537);const L=({analyticsSearch:e,justifySelf:t,colEnd:n,isError:i,usePropertyListingQuery:a,localizedText:o,isLoyaltyPWPToggleEnabled:s,searchInputs:l,resultMessages:c,isLoading:u,loyaltyMessagingModel:d,searchCriteria:p,criteriaChanged:f,searchResults:m})=>{const{exposure:g}=(0,h.useExperiment)("SRP_Grid_view_web",!1);return r.createElement(y.a,{colSpan:5,justifySelf:t,colEnd:n,alignSelf:(0,w.t)(g)?"end":void 0},r.createElement("div",null,!i&&r.createElement(r.Fragment,null,a?r.createElement(A.e,{analyticsSearch:e,searchInputs:l,searchResults:m,localizedText:o,switchPositionOfToggleOnEPS:s,criteriaChanged:f}):r.createElement(r.Fragment,null,d&&r.createElement(D,{model:d,searchCriteria:p,switchPositionOfToggleOnEPS:s}),r.createElement(j,{loading:u,localizedText:o,resultMessages:c})))))};L.displayName="PointsToggleAndSortOrder";const N=(0,i.inject)("context","searchCriteria","searchResults","experiment","multiItem","analyticsSearch","pageLayout")((0,i.observer)((e=>{var t,n;const{resultMessages:i,isLoading:a,l10n:l,loyaltyMessagingModel:c,searchCriteria:u,searchResults:d,isQuickAccessFiltersActive:p,context:g,experiment:E,multiItem:b,analyticsSearch:R,pageLayout:_,spacingOptions:O}=e,I=(0,S.IJ)(),C=Boolean(null==d?void 0:d.isError),x=u&&u.misId?"multiItem":"hotels",N=l.formatText(`${x}.searchResults.loadingMessage.text`),M=(0,v.useLocation)();if(!(g&&u&&d&&R))return null;const F=!(null==b?void 0:b.isPackageShoppingPath()),{exposure:U}=(0,h.useExperiment)("SRP_Grid_view_web",!1),B=F&&I?(0,T.M5)(I,g,R,M,_,u,E):void 0,H=Boolean(F&&(0,T.or)(g,u,d)),$=!(null==b?void 0:b.isPackageShoppingPath())&&1===(null===(n=null===(t=null==E?void 0:E.exposures)||void 0===t?void 0:t.ETS_POINTS_TOGGLE_UI_DISPLAY)||void 0===n?void 0:n.bucket),G=$?"end":"start",V=$?"end":void 0,z=$?9:0,W=!p&&r.createElement(y.a,{colSpan:3},r.createElement("div",null,r.createElement(y.E,{columns:1},r.createElement(y.a,null,r.createElement(k.t,{view:f.oT.SORT})),r.createElement(y.a,{alignSelf:"end"},r.createElement(s.b,{padding:{blockstart:"two"}},r.createElement("div",null,r.createElement(P.K,{alignment:$?"start":"end"}))))))),Y={analyticsSearch:R,justifySelf:V,colEnd:z,isError:C,usePropertyListingQuery:F,localizedText:N,isLoyaltyPWPToggleEnabled:$,searchInputs:B,resultMessages:i,isLoading:a,loyaltyMessagingModel:c,searchCriteria:u,criteriaChanged:H};return r.createElement(s.b,Object.assign({},O),r.createElement("header",null,r.createElement(m.l_,null,r.createElement(m.Vk,null,r.createElement(r.Fragment,null,r.createElement(y.E,{columns:(0,w.t)(U)?2:1},r.createElement(y.a,null,!C&&r.createElement(r.Fragment,null,F?r.createElement(A.e,{analyticsSearch:R,searchInputs:B,searchResults:d,localizedText:N,criteriaChanged:H,switchPositionOfToggleOnEPS:$}):r.createElement(r.Fragment,null,c&&r.createElement(o.i,{justifyContent:G},r.createElement(D,{model:c,searchCriteria:u,switchPositionOfToggleOnEPS:$})),r.createElement(j,{loading:a,localizedText:N,resultMessages:i})))),r.createElement(y.a,null,r.createElement(P.K,null))))),r.createElement(m.N0,null,r.createElement(y.E,{columns:8},$?r.createElement(r.Fragment,null,W,r.createElement(L,Object.assign({},Y,{searchResults:d}))):r.createElement(r.Fragment,null,r.createElement(L,Object.assign({},Y,{searchResults:d})),W))))))})));N.displayName="ResultsSubHeader";const j=({loading:e,localizedText:t,resultMessages:n})=>e?r.createElement(s.b,{padding:{blockend:"two"}},r.createElement(E.c,{inline:!1,align:"left",theme:"default"},t)):n&&0!==n.length?r.createElement("div",{"data-stid":"results-header-messages"},r.createElement(b.Wj,{messages:n,standardLinkFontWeight:"bold"})):null;j.displayName="HeaderMessages";var M=n(86291),F=n(21426);const U=(0,i.inject)("searchResults","multiItem","context")((0,i.observer)((({searchResults:e,withMapButton:t,withFilterButton:n,multiItem:i,context:o})=>{const l=r.useRef(null),c=(0,p.useLocalization)(),d=null==i?void 0:i.isPackageShoppingPath(),{exposure:v,logExperiment:y}=(0,h.useExperiment)("Quick_Filters_xLOB_Lodging_mWeb_Retest");if(Boolean(v)&&(0,u.tq)(o)&&y(v),!e)return null;const{isLoading:E,loyaltyMessagingModel:b,resultMessages:S,shoppingSearchListingHeader:T=[]}=e,R={resultMessages:S,isLoading:E,l10n:c,loyaltyMessagingModel:b,spacingOptions:T.length>0?{margin:{blockstart:"three"}}:{}},_={dialogTitle:c.formatText("hotels.searchResults.filtersDialog.title"),withMapButton:t,withFilterButton:n,isPackageShoppingPath:d},O=r.createElement(r.Fragment,null,r.createElement(H,Object.assign({},_)),r.createElement(k.t,{view:f.oT.APPLIED_FILTERS}),r.createElement(M.g,null),r.createElement(N,Object.assign({},R,{isQuickAccessFiltersActive:!1}))),I=r.createElement(r.Fragment,null,r.createElement(g.N,{templateComponent:{config:{view:f.oT.FILTER_BAR,bexQuickFiltersEnabled:!0,filterBarSpacing:{padding:{small:{blockend:"four"}}}}}}),r.createElement(M.g,null),r.createElement(N,Object.assign({},R,{isQuickAccessFiltersActive:!0})));return r.createElement(a.ErrorBoundary,{label:"hotel.search.tools"},r.createElement(s.b,{margin:{blockstart:"one"}},r.createElement("section",{"data-stid":"results-header",ref:l},r.createElement(m.l_,null,r.createElement(m.Vk,null,r.createElement(h.Experiment,{name:"Quick_Filters_xLOB_Lodging_mWeb_Retest",logExposure:!1},r.createElement(h.ExperimentControl,null,O),r.createElement(h.ExperimentVariant,{bucket:1},d?I:r.createElement(r.Fragment,null,r.createElement(M.g,null),r.createElement(N,Object.assign({},R,{isQuickAccessFiltersActive:!0})))))),r.createElement(m.N2,null,O)))))}))),B=({withFilterButton:e,withMapButton:t,isPackageShoppingPath:n,productType:i})=>{const a=(0,c.MH)(),u=(0,d.xB)(),{exposure:p,logExperiment:m}=(0,h.useExperiment)("Improve_Price_Slider_on_mweb"),{exposure:g,logExperiment:v}=(0,h.useExperiment)("Filter_Removal_at_destination_level_based_on_supply_mweb_apps"),y=()=>{m(p),n||v(g)};return r.createElement(s.b,{"data-stid":"tools__actions"},r.createElement(o.i,null,e&&r.createElement(o.j,{grow:1,shrink:1,minWidth:"0x","data-stid":"filters-toggle-button"},r.createElement(s.b,{padding:{blockend:"three"}},r.createElement("div",null,r.createElement(o.i,null,r.createElement(o.j,{grow:2},"Cars"===i?r.createElement(F.S,{view:f.oT.SORT_AND_FILTERS,onOpenDialog:y}):r.createElement(k.t,{view:f.oT.SORT_AND_FILTERS,onOpenDialog:y})))))),t&&r.createElement(o.j,{grow:1,shrink:1,minWidth:"0x","data-stid":"map-preview-button"},r.createElement(s.b,{margin:{inline:"one"}},r.createElement("div",null,r.createElement(l.r,{viewTracker:a,tracker:u}))))))},H=({dialogTitle:e,withFilterButton:t,withMapButton:n,isPackageShoppingPath:i})=>r.createElement(m.l_,null,r.createElement(m.Vk,null,r.createElement(B,{dialogTitle:e,withFilterButton:!0,withMapButton:!0,isPackageShoppingPath:i})),r.createElement(m.N0,null,r.createElement(r.Fragment,null)),r.createElement(m.X,null,r.createElement(B,{dialogTitle:e,withMapButton:n,withFilterButton:t,isPackageShoppingPath:i})))},37329:function(e,t,n){n.d(t,{u:function(){return l}});var r=n(38972),i=n(78096),a=n(52011),o=n(48570),s=n(95263);const l=()=>{const e=(0,s.IJ)(),t=(0,i.useHistory)(),n=(0,i.useLocation)(),l={productShoppingCriteriaInput:e,destination:{regionName:null,regionId:null,coordinates:null,pinnedPropertyId:null,propertyIds:null,mapBounds:null},shoppingContext:{multiItem:null},returnPropertyType:!1,criteria:null,dateRange:null,filters:null,marketing:null,propertyShopOptions:null,rooms:null,searchIntent:null,searchPagination:null,sort:null};return r.createElement(o.Qw,{inputs:l,onRewardsToggleChange:e=>{(0,a.updateSearch)({history:t,location:n,newParams:{useRewards:String(e)},replace:!0})},switchPositionOfToggleOnEPS:!1,skeletonLayout:[o.PA.Secondary,o.PA.Primary]})}},8537:function(e,t,n){n.d(t,{e:function(){return h}});var r=n(38972),i=n(78096),a=n(55183),o=n(52011),s=n(85690),l=n(55025),c=n(48570),u=n(38109),d=n(73232);const h=(0,a.inject)("context","searchCriteria","analytics","experiment","searchResults")((0,a.observer)((({context:e,analyticsSearch:t,searchInputs:n,criteriaChanged:a,localizedText:h,switchPositionOfToggleOnEPS:p,skeletonLayout:f,analytics:m,experiment:g,searchResults:v})=>{const[y,E]=(0,r.useState)(n),{exposure:b}=(0,l.useExperiment)("SRP_Grid_view_web",!1),S=(0,u.Cl)(),T=(0,i.useHistory)(),R=(0,i.useLocation)(),_=S===u.kv.Lodging&&!(0,s.d)(e);(0,r.useEffect)((()=>{a&&E(n)}),[a]);const O={summary:{resultMessages:null==v?void 0:v.resultMessages,resultsHeading:null==v?void 0:v.resultsHeading,loyaltyInfo:null==v?void 0:v.loyaltyMessagingModel}};return r.createElement(c.Qw,{data:O,loading:null==v?void 0:v.isLoading,propertySearchListingsPwa:null==v?void 0:v.propertySearchListings,inputs:y,localizedText:h,onRewardsToggleChange:e=>{t.withPublishingAnalyticsPayload(o.updateSearch,m,g)({history:T,location:R,newParams:{useRewards:String(e)},replace:!0})},switchPositionOfToggleOnEPS:p,skeletonLayout:f,alignment:(0,d.t)(b)?"left":void 0,standardLinkFontWeight:_?"bold":"regular"})})));h.displayName="ResultsSubHeaderWrapper"},86291:function(e,t,n){n.d(t,{g:function(){return h}});var r=n(38972),i=n(78096),a=n(52011),o=n(26246),s=n(19046),l=n(64572),c=n(13498),u=n(48570),d=n(95263);const h=({spacingOptions:e})=>{const{context:t,experiment:n,searchCriteria:h,searchResults:p,analyticsSearch:f,pageLayout:m,analytics:g,multiItem:v}=(0,l.m)(),y=(0,i.useLocation)(),E=(0,i.useHistory)(),b=null==v?void 0:v.isPackageShoppingPath(),S=(0,d.IJ)(),T=S?(0,s.M5)(S,t,f,y,m,h,n):void 0,R=r.useCallback((e=>{var t,r;f.withPublishingAnalyticsPayload(a.updateSearch,g,n)({history:E,location:y,newParams:(0,c.QT)(e,y,1===(null===(r=null===(t=null==n?void 0:n.exposures)||void 0===t?void 0:t.Thematic_search_by_categories_Post_mvp_BEXGH)||void 0===r?void 0:r.bucket)),replace:!1})}),[f,g,n,E,y,a.updateSearch]);return!b&&(null==h?void 0:h.categorySearch)&&T?r.createElement(o.b,Object.assign({},e),r.createElement("div",null,r.createElement(u.KT,{data:{shoppingSearchListingHeader:p.shoppingSearchListingHeader},inputs:T,propertySearchListingsPwa:p.propertySearchListings,onImageCardClickCallback:R}))):null};h.displayName="ShoppingSearchListingHeaderWrapper"},21426:function(e,t,n){n.d(t,{S:function(){return s}});var r=n(38972),i=n(65626),a=n(44922),o=n(95263);const s=({view:e,onOpenDialog:t})=>{const n=(0,o.IJ)(),s=(0,o.NZ)(),l=!n;return r.createElement(a.LY,{onFieldChange:(e,t)=>{s({field:e,event:t,type:o.PR.SORT_AND_FILTER_UPDATE})},onRemoveAppliedFilter:e=>{s({type:o.PR.REMOVE_FILTER_PILL,filterId:null==e?void 0:e.selections})},onRemoveAllAppliedFilters:()=>{s({type:o.PR.REMOVE_ALL_FILTERS})},loading:l,view:e,onSubmit:()=>{setTimeout((()=>{(0,i.DI)(!1)}),200)},onOpenDialog:t,inputs:{destination:{},productShoppingCriteriaInput:n}})}},58439:function(e,t,n){n.d(t,{t:function(){return A}});var r=n(38972),i=n(78096),a=n(52011),o=n(8169),s=n(64572),l=n(65626),c=n(92061),u=n(55025),d=n(38109),h=n(44922),p=n(95263),f=n(10309),m=n(87516);const g=new Set(["TOWNHOUSE","APART_HOTEL","APARTMENT","CABIN","CARAVAN_PARK","CARAVAN_PARK_CAMPSITE","CHALET","CONDO","CONDO_RESORT","CONDOMINIUM_RESORT","COTTAGE","HOUSE_BOAT","MOBILE_HOME","VACATION_HOME","PRIVATE_VACATION_HOME","RESIDENCE","TREE_HOUSE","TREE_HOUSE_PROPERTY","VILLA"]),v=new Set(["AGRITOURISM","ALL_INCLUSIVE_PROPERTY","BED_AND_BREAKFAST","CAPSULE_HOTEL","CASTLE","COUNTRY_HOUSE","CRUISE","GUESTHOUSE","HOLIDAY_PARK","HOSTAL","HOSTEL_BACKPACKER_ACCOMMODATION","HOTEL","INN","LODGE","MOTEL","PALACE","PENSION","POUSADA_BRAZIL","POUSADA_PORTUGAL","RANCH","HOTEL_RESORT","RIAD","RYOKAN","SAFARI","SAFARI_TENTALOW","10","20","30","40","50"]),y=[...Object.values(h.tI),...Object.values(h.AI),...Object.values(p.KL),...Object.values(p.Kk)],E=Object.values(h.AI),b=e=>t=>!e.startsWith(t),S=e=>!y.includes(e),T=e=>!E.includes(e),R=e=>!y.includes(e)||e===h.tI.SORT,_=e=>e!==h.tI.AI_SEARCH_QUERY,O=({name:e,value:t,existingUrlQueryString:n,stayOptionExperimentExposure:r,event:i,defaults:o,categorySearchOptions:s={}})=>{var l,c,u;let d,p;const y=null===(l=null==i?void 0:i.target)||void 0===l?void 0:l.type,E=null===(c=null==i?void 0:i.target)||void 0===c?void 0:c.checked,O=null==i?void 0:i.type,C=x({existingUrlQueryString:n,name:e,value:t,categorySearchOptions:s}),D=(0,f.parse)(C);switch(e){case h._z.CLEAR:return p=(null==o?void 0:o.regionId)?{[m.F2.REGION_ID]:o.regionId,[h.tI.NEIGHBORHOOD]:o.regionId}:{},d=(0,a.mergeQueryString)(C,p,S),d;case h._z.CLEAR_QUICK_FILTERS:{const e=new URLSearchParams(C);return t.forEach((t=>{if(void 0===t.value){for(const[n,r]of e.entries())r===t.key&&e.delete(n);e.delete(t.key)}else{const n=e.getAll(t.key).filter((e=>e!==t.value));e.delete(t.key);for(const r of n)e.append(t.key,r)}})),d=e.toString(),d}case h._z.CLEAR_FILTERS_APPLIED:{const e=new URLSearchParams(C);return t.forEach((t=>{if(void 0===t.value)e.delete(t.id);else{const n=e.getAll(t.id).filter((e=>e!==t.value));e.delete(t.id);for(const r of n)e.append(t.id,r)}})),d=e.toString(),d}case h._z.RESTORE:return"";case h.tI.PROPERTY_NAME:return p={[h.tI.HOTEL_NAME]:t.hotelName,[m.F2.SELECTED]:t.selected},d=(0,a.mergeQueryString)(C,p,_),d;case m.F2.REGION_ID:return p={[e]:t,[h.tI.NEIGHBORHOOD]:t},d=(0,a.mergeQueryString)(C,p,_),d;case h.AI.NIGHTLY_PRICE:case h.AI.TOTAL_PRICE:return-1===t.min&&-1===t.max?(p={[e]:void 0},d=(0,a.mergeQueryString)(C,p),d):(p={[e]:[t.min,t.max]},d=(0,a.mergeQueryString)(C,p,b(e)),d=(0,a.mergeQueryString)(d,{},_),d);case h.AI.PRICE:return-1===t.min&&-1===t.max?(d=(0,a.mergeQueryString)(C,{},T),d=(0,a.mergeQueryString)(d,{},_),d):(p={[e]:[t.min,t.max]},d=(0,a.mergeQueryString)(C,p,b(e)),d=(0,a.mergeQueryString)(d,{},_),d);case h.tI.NEIGHBORHOOD:d=I(C);return!!D&&"neighborhood"in D?(d=(0,a.mergeQueryString)(d,{},_),((e,t,n)=>{const r=new RegExp(`${t}=[^&]+`);return e.replace(r,`${t}=${n}`)})(d,e,t)):(d=(0,a.mergeQueryString)(d,{},_),d.concat(`&${e}=${t}`));case h.tI.STAY_OPTIONS_GROUP:{const e=new URLSearchParams(C),n=new URLSearchParams;if("hotels_option"===t){for(const[t,r]of e.entries())g.has(r)||n.append(t,r);1!==(null==r?void 0:r.bucket)&&2!==(null==r?void 0:r.bucket)||n.delete("bedroomFilter"),n.set("stay_options_group","hotels_option")}else if("vacation_rentals_option"===t){for(const[t,r]of e.entries())v.has(r)||n.append(t,r);n.delete("hotel_brand"),1!==(null==r?void 0:r.bucket)&&2!==(null==r?void 0:r.bucket)||(n.delete("mealPlan"),n.delete("paymentType")),n.set("stay_options_group","vacation_rentals_option")}else if(""===t||"any_option"===t)return e.delete("stay_options_group"),e.delete(h.tI.AI_SEARCH_QUERY),e.toString();return n.delete(h.tI.AI_SEARCH_QUERY),n.toString()}case h.tI.AI_SEARCH_QUERY:return"click"===O?(0,a.mergeQueryString)(n,{},_):(0,a.mergeQueryString)(n,{[e]:t},R);default:if("checkbox"===y){let n=null!==(u=D[e])&&void 0!==u?u:[];if("string"==typeof n&&(n=[n]),!E){n=Array.isArray(n)?n.filter((e=>e!==t)):[],p={[e]:n},d=(0,a.mergeQueryString)(C,p,_);const r="amenities";return d.includes(r)&&(d=d.replace("amenities=PETS","")),d=(0,a.mergeQueryString)(d,{},_),d}return d=(0,a.mergeQueryString)(C,{}),d=d.concat(`&${e}=${t}`),e===h.tI.MULTI_NEIGHBORHOOD_GROUP&&(d=I(d)),d=(0,a.mergeQueryString)(d,{},_),d}return p={[e]:t},d=(0,a.mergeQueryString)(C,p),d=(0,a.mergeQueryString)(d,{},_),d}},I=e=>{const t=new URLSearchParams(e);return t.delete(h.tI.POI),t.toString()},C=e=>[h.tI.NEIGHBORHOOD,h.tI.NEIGHBORHOOD_GROUP,h.tI.MULTI_NEIGHBORHOOD_GROUP,m.F2.REGION_ID].includes(e),x=({existingUrlQueryString:e,name:t,value:n,categorySearchOptions:r})=>{const i=(0,f.parse)(e),{categorySearch:o,categorySearchCarouselPostMvpExposure:s}=r||{};if("categorySearch"in i&&C(t)||((e,{name:t,value:n})=>t===h._z.CLEAR?e.neighborhood||e.neighborhood_group||e.multi_neighborhood_group:(t===h._z.CLEAR_QUICK_FILTERS||t===h._z.CLEAR_FILTERS_APPLIED)&&(null==n?void 0:n.some((e=>{const t=e.key||e.id;return C(t)}))))(i,{name:t,value:n})){const t={categorySearch:1===(null==s?void 0:s.bucket)?o:""};return(0,a.mergeQueryString)(e,t)}return e},D=(e,t)=>{if(!t||0===t.length)return e;const n=new URLSearchParams(e);return t.forEach((e=>{n.set(e.name,e.value)})),n.toString()};var P=n(19046);const w=(e,t)=>{var n;if(null===(n=null==e?void 0:e.multiItemContext)||void 0===n?void 0:n.id)return{id:e.multiItemContext.id,packageType:e.multiItemContext.packageType?t[e.multiItemContext.packageType]:void 0}},k=({className:e="",view:t,onOpenDialog:n,isMapView:o,filterBarSpacing:f,carouselEdgeItemsPadding:g})=>{var v;const{multiItem:y,searchResults:E,analyticsSearch:b,analytics:S,experiment:T}=(0,s.m)(),[R,_]=r.useState(""),{exposure:I}=(0,u.useExperiment)("Meso_Slot_Filter_Ad_Refresh"),C=(0,c.Gv)(),x=(0,p.IJ)(),k=(0,p.NZ)(),A=(0,d.Cl)(),{inputs:L,filterSheetFooterInputs:N}=(e=>{var t,n,a,o,l;const[c,u]=(0,r.useState)(""),{multiItem:d,analyticsSearch:h,searchResults:f}=(0,s.m)(),m=(0,i.useHistory)(),g=(0,i.useLocation)(),v=(0,p.IJ)(),{property:y}=null!==(t=null==v?void 0:v.primarySearchCriteria)&&void 0!==t?t:{},E=null===(n=null==f?void 0:f.searchCriteria)||void 0===n?void 0:n.categorySearch,b=(0,r.useMemo)((()=>{var e,t,n;if(!(null===(e=null==v?void 0:v.primarySearchCriteria)||void 0===e?void 0:e.property))return null;const{secondaryCriteria:r}=v,i="true"===new URLSearchParams(g.search).get("showFilterNotification"),a=null===(t=null==r?void 0:r.selections)||void 0===t?void 0:t.filter((e=>"searchId"!==e.id)),o=[...null!=a?a:[],{id:"searchId",value:h.searchId},...E?[{id:"categorySearch",value:E}]:[]],s=[...null!==(n=null==r?void 0:r.booleans)&&void 0!==n?n:[],{id:"showFilterNotification",value:i}];return{primary:v.primarySearchCriteria.property,secondary:Object.assign(Object.assign({},v.secondaryCriteria),{selections:o,booleans:s})}}),[h.searchId,null===(a=null==v?void 0:v.primarySearchCriteria)||void 0===a?void 0:a.property,g.search]),[S,T]=(0,r.useState)({destination:null!==(o=null==y?void 0:y.destination)&&void 0!==o?o:{},criteria:b,shoppingContext:{multiItem:w(d,P.EO)}}),R=(0,r.useMemo)((()=>{var t,n;const{propertySearchCriteriaInput:r}=(0,p.Kp)(new URLSearchParams(""===e?m.location.search:e)),i=[...null!==(n=null===(t=null==r?void 0:r.secondary)||void 0===t?void 0:t.selections)&&void 0!==n?n:[],{id:"searchId",value:h.searchId},...E?[{id:"categorySearch",value:E}]:[]];return Object.assign(Object.assign({},S),{criteria:Object.assign(Object.assign({},r),{secondary:Object.assign(Object.assign({},null==r?void 0:r.secondary),{selections:i})})})}),[e,h.searchId,null===(l=null==f?void 0:f.searchCriteria)||void 0===l?void 0:l.categorySearch]);return(0,r.useEffect)((()=>{var e;c!==h.searchId&&(T({destination:null!==(e=null==y?void 0:y.destination)&&void 0!==e?e:{},criteria:b,shoppingContext:{multiItem:w(d,P.EO)}}),u(h.searchId))}),[h.searchId]),{inputs:S,filterSheetFooterInputs:R}})(R),{exposure:j}=(0,u.useExperiment)("Hotel_vs_VR_Contextualization"),{exposure:M}=(0,u.useExperiment)("Thematic_search_by_categories_Post_mvp_BEXGH"),F=null===(v=null==E?void 0:E.searchCriteria)||void 0===v?void 0:v.categorySearch,U=(0,i.useHistory)(),B=(0,i.useLocation)(),H=[h.oT.SORT_AND_FILTERS,h.oT.FILTER_DIALOG,h.oT.FILTER_BAR].includes(t),$=A===d.kv.Lodging?L:{destination:{},criteria:null,shoppingContext:{},productShoppingCriteriaInput:x},{exposure:G}=(0,u.useExperiment)("Filter_Facet_Counts"),{exposure:V}=(0,u.useExperiment)("Filter_Facet_Count_BEXH"),z=[1,2,3].includes(G.bucket)||1===V.bucket,W=[1,2].includes(null==j?void 0:j.bucket),Y=(z||W)&&A===d.kv.Lodging?N:$,q=(z||W)&&A===d.kv.Lodging?null:N,K=(null==E?void 0:E.isLoading)&&!x,Q=e=>{1===I.bucket&&document.dispatchEvent(new CustomEvent("mesoSlotFilterUpdate",{detail:{type:"slotFilter",editType:"update",filterData:{name:e}}}));b.withPublishingAnalyticsPayload(a.updateSearch,S,T)({history:U,location:B,newParams:D(e),replace:!1,queryCombiner:(e,t)=>t})},Z=()=>H&&""!==R?R:U.location.search,X=e=>{H?_(e):(Q(e),window.scrollTo(0,0),(0,l.DI)(!1))},J=r.useCallback((()=>{const e=""===R?U.location.search:R,t=(0,a.mergeQueryString)(e,{},(e=>!e.startsWith("pwaDialog")));setTimeout((()=>{Q(t),window.scrollTo(0,0),_(""),(0,l.DI)(!1)}),200)}),[R]);return b?r.createElement("div",{className:e},r.createElement(h.LY,Object.assign({onFieldChange:(e,t)=>{var n;const r=t&&(t.isTrusted||(null===(n=t.nativeEvent)||void 0===n?void 0:n.isTrustedEvent));if(!((e,t,n)=>{var r;if(n&&e&&"neighborhood"===e.name&&"checkbox"===(null===(r=t.target)||void 0===r?void 0:r.type)&&!t.target.checked){const t=document.getElementById(`${e.name}_${e.value}`);if(t)return t.click(),!0}return!1})(e,t,r)){const{name:n,value:i}=e,a=O({name:n,value:i,existingUrlQueryString:Z(),stayOptionExperimentExposure:j,event:t,categorySearchOptions:{categorySearch:F,categorySearchCarouselPostMvpExposure:M}});r?setTimeout((()=>{X(a)})):X(a)}},onFieldClick:e=>{"sort"===e.name&&C("HOT.SR:SortFilterControl","Search tools sort section dropdown clicked")},onRemoveAppliedFilter:e=>{const t=((e,t)=>{let n="";const{ranges:r,selections:i}=e,a=null==i?void 0:i.find(Boolean);return n=(null==a?void 0:a.id)===h.tI.NEIGHBORHOOD?O({name:m.F2.REGION_ID,value:a.value,existingUrlQueryString:t}):O({name:h._z.CLEAR_FILTERS_APPLIED,value:null!=r?r:i,existingUrlQueryString:t}),n})(e,Z());X(t)},onRemoveAllAppliedFilters:e=>{const t=O({name:h._z.CLEAR,value:{},existingUrlQueryString:Z(),stayOptionExperimentExposure:j,event:void 0,defaults:e});X(t)},onSubmit:J,onOpenDialog:n,view:t,inputs:Y,loading:K,filterSheetFooterInputs:q,appliedFiltersSpacing:{margin:{blockend:"three"}},isMapView:o,isShoppingWithoutPackagePath:!(null==y?void 0:y.multiItemContext),filterBarSpacing:f,carouselEdgeItemsPadding:g},(()=>{if(A!==d.kv.Cruise)return{};if(H){const e=Z();return{onSelectionChange(){},onMultiSelectClose(t,n,r){const i=new URLSearchParams(e),a=[];null==r||r.reduce(((e,t)=>{const n=t.data.value;return n&&e.push(n),e}),a),i.set(n,a.join("|")),X(i.toString())},onMultiSelectClearAll(t){const n=new URLSearchParams(e);n.delete(t),X(n.toString())}}}return(e=>({onSelectionChange(){},onMultiSelectClose(t,n,r){e({type:p.PR.MULTI_SELECT_CLOSE,filterId:n,selections:r})},onMultiSelectClearAll(t){e({type:p.PR.MULTI_SELECT_CLEAR_ALL,filterId:t})}}))(k)})(),{onSubmitFilterSearch:(e,t,n)=>{var r;n&&(n.isTrusted||(null===(r=n.nativeEvent)||void 0===r?void 0:r.isTrustedEvent))&&(Q(O({name:e,value:t,existingUrlQueryString:Z(),event:n})),window.scrollTo(0,0),(0,l.DI)(!1))}}))):null};k.displayName="UniversalSortFilter";const A=({view:e,className:t,onOpenDialog:n,isMapView:i,filterBarSpacing:a,carouselEdgeItemsPadding:s})=>r.createElement(o.ErrorBoundary,{label:"hotel.search.universal-sort-filter"},r.createElement(k,{view:e,className:t,onOpenDialog:n,isMapView:i,filterBarSpacing:a,carouselEdgeItemsPadding:s}));A.displayName="UniversalSortFilterWrapper"},46467:function(e,t,n){n.d(t,{_:function(){return l}});var r=n(38972),i=n(8169),a=n(25738),o=n(87864),s=n(93648);const l=({templateComponent:e})=>{const{children:t}=e;return t&&0!==t.length?r.createElement(a.j,{minWidth:160,maxWidth:160},r.createElement("div",{className:"side-rail"},r.createElement(s.l_,null,r.createElement(s.X,null,r.createElement(i.ErrorBoundary,{label:"hotel.masterPage.sideRail"},t&&r.createElement(o.DU,{templateComponents:t})))))):null}},62443:function(e,t,n){n.d(t,{c:function(){return c}});var r=n(38972),i=n(25738),a=n(51204),o=n(26246),s=n(87864),l=n(36364);const c=({templateComponent:e})=>{var t;const{children:n,config:c}=e,u=(0,l.jt)((0,l.Ry)({type:(0,l.Z_)(),grow:(0,l.jt)((0,l.Rx)()),direction:(0,l.jt)((0,l.Z_)()),colSpan:(0,l.jt)((0,l.Rx)()),padding:(0,l.jt)((0,l.Yj)()),margin:(0,l.jt)((0,l.Yj)()),maxWidth:(0,l.jt)((0,l.G0)([(0,l.Z_)(),(0,l.Rx)()]))})),d=(0,l.As)(u,c);if(!d.success||!n||0===n.length)return null;const{type:h,grow:p,direction:f,colSpan:m,padding:g,margin:v,maxWidth:y}=null!==(t=d.output)&&void 0!==t?t:{},E=r.createElement(s.DU,{templateComponents:n});switch(h){case"EGDSLayoutFlex":return r.createElement(i.i,{direction:f},E);case"EGDSLayoutFlexItem":return r.createElement(i.j,{grow:p,maxWidth:y},r.createElement("div",null,E));case"EGDSLayoutGridItem":return r.createElement(a.a,{colSpan:m},r.createElement("div",null,E));case"EGDSSpacing":return r.createElement(o.b,{padding:g,margin:v},r.createElement("div",null,E));default:return null}}},5339:function(e,t,n){n.d(t,{g:function(){return c}});var r=n(38972),i=n(78096),a=n(55183),o=n(61438),s=n(48570),l=n(95263);const c=(0,a.inject)("context","multiItem","analytics")((({context:e,multiItem:t,analytics:n})=>{if(!e||!t)return null;const a=(0,i.useHistory)(),c={productShoppingCriteriaInput:(0,l.IJ)(),destination:{regionName:null,regionId:null,coordinates:null,pinnedPropertyId:null,propertyIds:null,mapBounds:null},shoppingContext:{multiItem:null},returnPropertyType:!1,criteria:null,dateRange:null,filters:null,marketing:null,propertyShopOptions:null,rooms:null,searchIntent:null,searchPagination:null,sort:null};return r.createElement(s.E0,{inputs:c,onFilterPillRemoval:e=>(0,o.ir)(e,a),onRemoveAllFilters:e=>(0,o.sC)(e,n,a)})}))},7611:function(e,t,n){n.d(t,{DC:function(){return a}});var r=n(39828),i=n(36364);const a={SIDERAIL_R1:{uci:"R1"},SIDERAIL_R2:{uci:"R2",className:"sticky-top__with-navbar"},SIDERAIL_TEST_R2:{uci:"R2_TEST",className:"sticky-top__with-navbar"},SIDERAIL_CONTROL_R2:{uci:"R2_CONTROL",className:"sticky-top__with-navbar"},FOOTER_CM6:{uci:"CM6"},FOOTER_CM4:{uci:"CM4"},FOOTER_CM3:{uci:"CM3"},FOOTER_CM2:{uci:"CM2"},FOOTER_CM1:{uci:"CM1"}};(0,i.Ry)({code:(0,i.Z_)(),uci:(0,i.Z_)()}),r.lgF.ADS_ONLY},90939:function(e,t,n){n.d(t,{P:function(){return r}});const r={google:"3.57",mapbox:"2.9.2"}},30164:function(e,t,n){n.d(t,{oj:function(){return u},mU:function(){return a},Zt:function(){return o},wK:function(){return c}});var r=n(38972),i=n(26676);const a=(0,r.createContext)(new i.i({}));function o(){return(0,r.useContext)(a)}var s=n(38109),l=n(95263);function c(e){return t=>r.createElement(s.lS,{productType:s.kv.Lodging},r.createElement(l.rO,null,r.createElement(e,Object.assign({},t))))}const u=({contextPairs:e,children:t})=>{if(!e||!Array.isArray(e)||!e[0])return(0,r.createElement)(r.Fragment,null,t);const{context:n,value:i}=e[0];return(0,r.createElement)(n.Provider,{value:i},(0,r.createElement)(u,{contextPairs:e.slice(1)},t))};u.displayName="MultiContextProvider"},82913:function(e,t,n){n.d(t,{KJ:function(){return a},m3:function(){return o}});var r=n(38972);const i=r.createContext({setHighlightedPropertyId:()=>{}}),a=()=>r.useContext(i),o=({children:e})=>{const[t,n]=r.useState(),a=r.useCallback((e=>{n(e)}),[]);return r.createElement(i.Provider,{value:{highlightedPropertyId:t,setHighlightedPropertyId:a}},e)}},26659:function(e,t,n){n.d(t,{X:function(){return i},t:function(){return a}});var r=n(38972);const i=(0,r.createContext)({});function a(){return(0,r.useContext)(i)}},18533:function(e,t,n){n.d(t,{F:function(){return o},j:function(){return s}});var r=n(38972);const i={},a=r.createContext(i),o=(...e)=>{const t=r.useContext(a);return e.map((e=>{const n=t[e];return n||(t[e]=r.createRef())}))},s=({children:e})=>r.createElement(a.Provider,{value:i},e);s.displayName="RefProvider"},15017:function(e,t,n){n.d(t,{G7:function(){return r},Zj:function(){return l},Sv:function(){return u},MH:function(){return o}});var r,i=n(38972);!function(e){e.LISTINGS="listings",e.MAP="map"}(r||(r={}));const a=(0,i.createContext)({});function o(){return(0,i.useContext)(a)}const s={setView:()=>null,view:r.LISTINGS},l=({children:e,viewTracker:t})=>(s.setView=t.setView,s.view=t.view,i.createElement(a.Provider,{value:s},e));var c=n(33184);function u(e,t,n,i){const{view:a,setView:o}=t;if(n!==a){o(n);const t=n===r.LISTINGS?c.gw:c.g$,a=i?t[i]:t.SA;e.reset({data:{experience:{page_name_detailed:a}},config:{isEgClickstream:!0}})}}},64572:function(e,t,n){n.d(t,{m:function(){return a}});var r=n(38972),i=n(55183);const a=()=>r.useContext(i.MobXProviderContext)},51167:function(e,t,n){n.d(t,{qY:function(){return p},a0:function(){return h},a:function(){return d},Yd:function(){return u},$N:function(){return c},j3:function(){return l}});var r=n(43270),i=n(44237);const a=e=>o[e]||"unknown",o={airnewzealand:"expedia",cheaptickets:"expedia",ebookers:"expedia",expedia:"expedia",hawaiianairlines:"expedia",hotwire:"expedia",lastminute:"expedia",mrjet:"expedia",orbitz:"expedia",travelocity:"expedia",wotif:"expedia",vrbo:"vrbo",hotels:"hotels",taap:"taap"};class s extends r.i{constructor(e,t,n,r,i,a){super(),this.analytics=e,this.logger=t,this.analyticsSearch=n,this.productLine=r,this.brand=i,this.experiment=a}request(e,t){return l(e,t,this.productLine,this.brand).map((t=>{var n,r,a,o,s,l,c;if(("PropertyListingQuery"===e.operationName||"PropertySearchDynamicSearchMapQuery"===e.operationName)&&t){const e=null===(r=null===(n=t.extensions)||void 0===n?void 0:n.analytics)||void 0===r?void 0:r[0],u=null===(c=null===(l=null===(s=null===(o=null===(a=t.data)||void 0===a?void 0:a.propertySearch)||void 0===o?void 0:o.criteria)||void 0===s?void 0:s.secondary)||void 0===l?void 0:l.booleans)||void 0===c?void 0:c.find((e=>"shouldFetchSecondaryBatch"===e.id&&e.value));e&&this.analyticsSearch.addPayload(e),!u&&this.analytics&&e?this.analyticsSearch.publishPayload(this.analytics,this.experiment):this.analytics&&e||this.logger.logEvent(i.G.PROPERTY_LISTING_ANALYTICS_PUBLISH_ERROR,"Unable to publish analytics for property listings due to missing analytics store or data")}return t}))}}const l=(e,t,n,r)=>(e.setContext({headers:Object.assign(Object.assign({},e.getContext().headers),{"x-product-line":n,"x-parent-brand-id":a(r)})}),t(e)),c=(e,t,n,r,i,a)=>new s(e,t,n,r,i,a),u="lodging",d="ground-transportation",h="cruise",p="car"},65626:function(e,t,n){n.d(t,{DI:function(){return a},Kw:function(){return i}});const r="compressionBannerDismiss";function i(){if(localStorage){const e=localStorage.getItem(r);return!!e&&JSON.parse(e)}return!1}function a(e){localStorage&&localStorage.setItem(r,JSON.stringify(e))}},13498:function(e,t,n){n.d(t,{ZP:function(){return o},H9:function(){return s},QT:function(){return l}});var r=n(78096),i=n(10309),a=n(18095);function o(){return(0,i.parse)((0,r.useLocation)().search)}function s(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e.toLowerCase(),t])))}const l=(e,t,n=!1)=>{const{state:r,id:i}=e,o=new URLSearchParams(t.search);let s="";return n&&r===a.ma$.UNSELECTED?s="all_stays":r===a.ma$.SELECTED&&(s=i),o.set("categorySearch",s),o.toString()}},20113:function(e,t,n){n.d(t,{Hv:function(){return o},_6:function(){return r}});const r=e=>({adults:i(e),children:a(e)}),i=e=>e.map((e=>e.adults)).filter((e=>e>0)).join(","),a=e=>e.map(((e,t)=>{var n;return o(t+1,(null===(n=e.children)||void 0===n?void 0:n.map((e=>e.age)))||[])})).filter((e=>""!==e)).join(","),o=(e,t)=>t.map((t=>`${e}_${t}`)).join(",")},31158:function(e,t,n){n.d(t,{V:function(){return r}});const r=e=>{e&&e.ref&&"function"==typeof e.ref.scrollIntoView?e.ref.scrollIntoView({block:"start",behavior:"smooth"}):e&&void 0!==e.scrollTo&&window.scrollTo({top:e.scrollTo,left:0,behavior:"smooth"}),e&&e.ref&&"function"==typeof e.ref.focus&&e.ref.focus()}},71173:function(e,t,n){n.d(t,{N:function(){return i}});var r=n(93648);const i={[r.Cu.SMALL]:r.Cu.SMALL,[r.Cu.MEDIUM]:r.Cu.MEDIUM,[r.Cu.LARGE]:r.Cu.LARGE,[r.Cu.EXTRA_LARGE]:r.Cu.EXTRA_LARGE}},23889:function(e,t,n){n.d(t,{TY:function(){return I}});var r=n(24305),i=n(85221),a=n(93648),o=n(38972),s=n(42898),l=n(87251),c=n(25738),u=n(63188),d=n(20784),h=n(94170),p=n(12111),f=n.n(p),m=n(8684),g=n(83028),v=n(49006),y=n(23783),E=n(26246),b=n(70027),S=n(93519);const T=u.classNames.bind(f());var R,_;!function(e){e.START="start",e.END="end",e.NONE="none"}(R||(R={})),function(e){e.DIALOG="dialog",e.MENU="menu"}(_||(_={}));class O extends o.Component{constructor(e){super(e);const t=this.setInitialDates(),n=new h.D(t.lastValidDate,e.singleDateSelect);let r;r=e.triggeredSelector?e.triggeredSelector:e.dateFieldProps.showDatePicker?R.START:"",this.startDomRef=e.startDateRef?e.startDateRef:o.createRef(),this.endDomRef=e.endDateRef?e.endDateRef:o.createRef(),this.state={localizedText:{checkInInstructions:()=>e.l10n.formatText("datePicker.fromDateInstructions.a11yLabel"),checkOutInstructions:()=>e.l10n.formatText("datePicker.toDateInstructions.a11yLabel"),dateFieldSelected:()=>e.l10n.formatText("datePicker.selectedDateField.allyLabel"),doneHeader:()=>e.l10n.formatText("datePicker.doneHeader"),clearHeader:()=>e.l10n.formatText("datePicker.clearHeader"),selectEndDate:()=>e.l10n.formatText("datePicker.dateInput.endDate.placeholder"),selectStartDate:()=>e.l10n.formatText("datePicker.dateInput.startDate.placeholder"),clearedDates:()=>e.l10n.formatText("datepicker.cleared.dates")},name:r,selection:n},this.getDatePickerProps=this.getDatePickerProps.bind(this),this.onSubmit=this.onSubmit.bind(this),this.onClearDates=this.onClearDates.bind(this),this.onDismiss=this.onDismiss.bind(this),this.onSelectStartMode=this.onSelectStartMode.bind(this),this.onSelectEndMode=this.onSelectEndMode.bind(this),this.openDatePicker=this.openDatePicker.bind(this),this.selectionClassNames=this.selectionClassNames.bind(this),this.setInitialDates=this.setInitialDates.bind(this),this.updateDatePicker=this.updateDatePicker.bind(this),this.updateViewport=this.updateViewport.bind(this)}UNSAFE_componentWillMount(){this.updateStateWithProps(this.props)}componentDidMount(){const{props:e}=this;e.onMountCB&&e.onMountCB(this.startDomRef,this.endDomRef)}UNSAFE_componentWillReceiveProps(e){const{startDate:t,endDate:n,validStartDate:r}=this.props;e.startDate===t&&e.endDate===n||(this.preselectedStart=e.startDate,this.preselectedEnd=e.endDate),e.validStartDate!==r&&this.setFirstValidDate(e),this.updateStateWithProps(e)}componentDidUpdate(e){const{dateFieldProps:t,daysBookableInAdvance:n}=this.props,{selection:r}=this.state;e.daysBookableInAdvance!==n&&(this.lastValidDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()+n,this.today.getDate()),r.lastValidEndDate=this.lastValidDate),!e.dateFieldProps.showDatePicker&&t.showDatePicker&&(this.isOpenInternallyDriven?this.isOpenInternallyDriven=void 0:this.openDatePicker(R.START,!1))}onSubmit(){const{l10n:e,onSubmitCB:t}=this.props,{name:n,selection:r}=this.state,{start:i,end:a}=r;this.resetLiveAnnounce(),this.updateDatePicker(),this.preselectedEnd=e.formatDate(a,{dateFormat:"iso-date",raw:"yyyy-MM-dd"}),this.preselectedStart=e.formatDate(i,{dateFormat:"iso-date",raw:"yyyy-MM-dd"}),this.focusOnTrigger(n),t&&t(i,a,this.isDialog)}onClearDates(){const{onClearDatesCB:e}=this.props;this.clearDatePicker(),e&&e()}onDismiss(e){const{onDismissCB:t}=this.props,{name:n,selection:r}=this.state;r.start=null,r.end=null,this.updateDatePicker(),this.resetLiveAnnounce(),this.focusOnTrigger(n),t&&t(this.isDialog,e)}onSelectStartMode(e){const{onSelectStartModeCB:t}=this.props,{localizedText:n,selection:r}=this.state;r.setCurrentTrigger("start"),(0,u.liveAnnounce)(n.checkInInstructions(),u.Level.POLITE),t&&t(),e||this.updateDatePicker()}onSelectEndMode(e){const{onSelectEndModeCB:t}=this.props,{localizedText:n,selection:r}=this.state;r.setCurrentTrigger("end"),(0,u.liveAnnounce)(n.checkOutInstructions(),u.Level.POLITE),t&&t(),e||this.updateDatePicker()}getDatePickerProps(){const{analytics:e,buttonText:t,clearButtonText:n,currentPrice:r,dateFieldProps:i,datePickerContent:a,doubleMonths:o,endSelectionPlaceholder:s,firstDayOfWeek:l,footerText:c,holidays:u,l10n:d,onDoneButtonClickCB:h,renderType:p,singleMode:f,startSelectionPlaceholder:m,submitDisabled:g}=this.props,{localizedText:v,selection:y}=this.state,E=y.start,b=y.end,S=m||v.selectStartDate(),T=s||v.selectEndDate(),R=E?d.formatDate(E,{dateFormat:"full",skeleton:"MMMEd"}):S,_=b?d.formatDate(b,{dateFormat:"full",skeleton:"MMMEd"}):T,O=e||{},{closeAnalytics:I,doneAnalytics:C,nextPageAnalytics:x,previousPageAnalytics:D}=O,P=t||v.doneHeader(),w=n||v.clearHeader(),k=this.isSelected(!0)?v.dateFieldSelected():"";return{buttonText:P,clearButtonText:w,closeAnalytics:I,currentPrice:r,datePickerContent:a,doneAnalytics:C,doubleMonths:o,endSelectedMsg:this.isSelected(!1)?v.dateFieldSelected():"",firstDayOfWeek:l,firstValidDate:this.firstValidDate,footerText:c,formattedEndSelection:_,formattedStartSelection:R,holidays:u,labels:{end:i.endLabel,start:i.startLabel},lastValidDate:this.lastValidDate,nextPageAnalytics:x,onDoneButtonClickCB:h,onSelectEndMode:this.onSelectEndMode,onSelectStartMode:this.onSelectStartMode,previousPageAnalytics:D,renderType:p,selection:y,selectionClassNames:this.selectionClassNames,singleMode:f,startSelectedMsg:k,submitDisabled:g,today:this.today,updateDatePicker:this.updateDatePicker}}setFirstValidDate(e){if(this.firstValidDate=this.today,e.validStartDate){try{this.firstValidDate=e.l10n.parseLocalDateString(e.validStartDate,{dateFormat:"iso",raw:"yyyy-MM-dd"})}catch(t){console.error(t)}this.firstValidDate<this.today&&(this.firstValidDate=this.today)}}setInitialDates(){const{cutoffDate:e,daysBookableInAdvance:t,endDate:n,l10n:r,midnightBookingOffset:i,singleMode:a,startDate:o}=this.props;if(this.today=new Date,this.today.setHours(12),this.today.setMinutes(0),this.today.setSeconds(0),this.today.setMilliseconds(0),this.lastValidDate=new Date(this.today.getFullYear(),this.today.getMonth(),this.today.getDate()+t),e)try{this.lastValidDate=r.parseLocalDateString(e,{dateFormat:"iso",raw:"yyyy-MM-dd"})}catch(s){console.error(s)}if(this.setFirstValidDate(this.props),this.tomorrow=new Date,this.tomorrow.setDate(this.firstValidDate.getDate()+1),i){(new Date).getHours()<i&&this.today.setDate(this.today.getDate()-1)}return n&&!a&&(this.preselectedEnd=n),o&&(this.preselectedStart=o),{firstValidDate:this.firstValidDate,lastValidDate:this.lastValidDate}}updateViewport(e){this.isDialog=e}updateStateWithProps(e){const{l10n:t,singleMode:n,triggeredSelector:r}=e,{selection:i}=this.state;if(this.preselectedStart){let e=this.firstValidDate;try{e=t.parseLocalDateString(this.preselectedStart,{dateFormat:"iso",raw:"yyyy-MM-dd"})}catch(a){console.error(a)}e.setHours(12),e>=this.firstValidDate?i.start=e:(this.clearDatePicker(),this.preselectedStart=null,this.preselectedEnd=null)}if(this.preselectedEnd){let e=this.tomorrow;try{e=t.parseLocalDateString(this.preselectedEnd,{dateFormat:"iso",raw:"yyyy-MM-dd"})}catch(a){console.error(a)}e.setHours(12),i.end=e}this.preselectedStart||this.preselectedEnd||(i.start=null,i.end=null),n&&delete i.end,r&&i.setCurrentTrigger(r)}resetLiveAnnounce(){(0,u.liveAnnounce)("",u.Level.POLITE)}openDatePicker(e,t=!0){const{props:n}=this;this.isOpenInternallyDriven=t,"start"===e?this.onSelectStartMode(!0):this.onSelectEndMode(!0),this.setState({name:e}),n.onOpenCB&&n.onOpenCB(e,this.isDialog)}isSelected(e){const{selection:t}=this.state;return e&&t.isSelectingStart||!e&&t.isSelectingEnd||e&&!t.isSelectingStart&&!t.isSelectingEnd}selectionClassNames(e){return T("uitk-date-picker-top-bar-selection",{selected:this.isSelected(e)})}createCustomEvent(e,t){const n=new CustomEvent("change"),r=document.createElement("input");r.value=e,r.addEventListener("change",(e=>{t(e)})),r.dispatchEvent(n)}updateDatePicker(){const{localizedText:e,selection:t}=this.state,{onStartDateResultSelection:n,onEndDateResultSelection:r}=this.props;n&&this.createCustomEvent(t.start,n),r&&this.createCustomEvent(t.end,r),this.setState({localizedText:e,selection:t})}clearDatePicker(){const{localizedText:e,selection:t}=this.state;t.start=null,t.end=null,(0,u.liveAnnounce)(e.clearedDates()),this.updateDatePicker()}focusOnTrigger(e){var t;const n="start"===e?this.startDomRef:this.endDomRef;(0,u.isElementVisible)(n.current)&&(null===(t=null==n?void 0:n.current)||void 0===t||t.focus())}render(){const{dialogWrapper:e,dateFieldProps:t,doubleMonths:n,onChangeEndDateCB:i,onChangeMonthCB:a,onChangeStartDateCB:o,onScrollHandler:s,preventAutoFocus:l,singleMode:c,triggeredSelector:u,useClearDates:d,useSingleTrigger:h}=this.props,{name:p,selection:f}=this.state,{dateFieldWrapperClasses:m,dateFormat:g,endAnalytics:v,endId:y,endInvalid:E,endLabel:b,endName:S,endPlaceholder:_,mediumDateFormatProp:O,onChange:I,useCustomTrigger:C,routerLinkWrapper:x,showDatePicker:D,space:P,stacked:w,startAnalytics:k,startId:A,startInvalid:L,startLabel:N,startName:j,startPlaceholder:M}=t;let F,U;U=e||(e=>(0,r.jsx)("div",{id:"date-picker",className:T("uitk-dialog-layer","uitk-dialog-layer-responsive"),children:e}));const B={dateFieldWrapperClasses:m,dateFormat:g,dialogWrapper:U,mediumDateFormatProp:O,onChange:I,onChangeEndDate:i,onChangeMonth:a,onChangeStartDate:o,onClearDates:this.onClearDates,onDismiss:this.onDismiss,onScrollHandler:s,onSubmit:this.onSubmit,openDatePicker:this.openDatePicker,preventAutoFocus:l,routerLinkWrapper:x,showDatePicker:D,singleMode:c,space:P,stacked:w,triggeredField:u||p,useCustomTrigger:C,useClearDates:d,useSingleTrigger:h},H=this.getDatePickerProps(),$={analytics:k,dateType:R.START,domRef:this.startDomRef,doubleMonths:n,id:A,invalid:L,label:N,name:j||"startDate",placeholder:M,value:f.start},G=Object.assign({datePickerProps:H,endProps:F,startProps:$,updateViewport:this.updateViewport},B);return c||(F={analytics:v,dateType:R.END,domRef:this.endDomRef,doubleMonths:n,id:y,invalid:E,label:b,name:S||"endDate",placeholder:_,value:f.end},G.endProps=F),(0,r.jsx)(V,Object.assign({},G))}}O.defaultProps={daysBookableInAdvance:500,midnightBookingOffset:4,preventAutoFocus:!1,singleMode:!1};const I=e=>{const t=(0,i.useLocalization)();return(0,r.jsx)(O,Object.assign({l10n:t},e))};I.displayName="DatePickerFooterAdditionalText";const C=u.classNames.bind(f());class x extends o.Component{constructor(e){super(e),this.elementRef=o.createRef(),this.state={localizedText:{cancelButton:()=>e.l10n.formatText("datePicker.cancelButton.a11yLabel"),datePickerOpened:()=>e.l10n.formatText("datePicker.datePickerOpened.liveAnnounce"),doneButtonFare:(t,n,r,i)=>t<=1?e.l10n.formatText("datePicker.doneButtonFareWithSummary.single.a11yLabel",r,n):e.l10n.formatText("datePicker.doneButtonFareWithSummary.multiple.a11yLabel",r,i,n),clearInstructions:()=>e.l10n.formatText("datePicker.clearInstructions.a11yLabel"),doneInstructions:()=>e.l10n.formatText("datePicker.doneInstructions.a11yLabel"),hiddenDoneButton:(t,n,r)=>t<=1?e.l10n.formatText("datePicker.doneButtonWithSummary.single.a11yLabel",n):e.l10n.formatText("datePicker.doneButtonWithSummary.multiple.a11yLabel",n,r)}},this.onClickTopStart=this.onClickTopStart.bind(this),this.onClickTopEnd=this.onClickTopEnd.bind(this),this.onSubmitDates=this.onSubmitDates.bind(this),this.onChangeMonth=this.onChangeMonth.bind(this),this.onChangeStartDate=this.onChangeStartDate.bind(this),this.onChangeEndDate=this.onChangeEndDate.bind(this),this.focusOnElement=this.focusOnElement.bind(this),this.hiddenDoneButton=this.hiddenDoneButton.bind(this)}componentDidMount(){const{formattedStartSelection:e,labels:t,preventAutoFocus:n,startSelectedMsg:r}=this.props,{localizedText:i}=this.state;if(this.elementRef&&this.elementRef.current){const e=this.elementRef.current.getElementsByTagName("button")[0];n||this.focusOnElement(e)}const a=i.datePickerOpened();(0,u.liveAnnounce)(`${a}, \n      ${e} ${t.start} ${r}`)}shouldComponentUpdate(e){const{selection:t}=this.props;return e&&e.holidays&&e.holidays.length>0&&t.configureHolidays(e.holidays),!0}onClickTopStart(){const{onSelectStartMode:e}=this.props;e()}onClickTopEnd(){const{onSelectEndMode:e}=this.props;e()}onSubmitDates(){const{onSubmit:e,onDoneButtonClickCB:t}=this.props;if(t){const{selection:e}=this.props,{start:n,end:r}=e;t(n,r)}else e()}onChangeMonth(e){const{onChangeMonth:t}=this.props;t&&t(e,!1)}onChangeStartDate(e){const{onChangeStartDate:t}=this.props;t&&t(e,!1)}onChangeEndDate(e){const{onChangeEndDate:t}=this.props;t&&t(e,!1)}focusOnElement(e){(0,u.isElementVisible)(e)&&e.focus()}hiddenDoneButton(){const{formattedStartSelection:e,formattedEndSelection:t,selection:n}=this.props,{localizedText:i}=this.state,a=n.numberOfNights,o=i.hiddenDoneButton(a,e,t);return(0,r.jsx)("button",{type:"button",className:C("is-visually-hidden"),onClick:this.onSubmitDates,children:o})}render(){const{buttonText:e,clearButtonText:t,currentPrice:n,datePickerContent:i,doneAnalytics:a,doubleMonths:o,endSelectedMsg:s,firstDayOfWeek:l,firstValidDate:u,footerText:d,formattedEndSelection:p,formattedStartSelection:f,holidays:v,labels:b,lastValidDate:S,nextPageAnalytics:T,onClearDates:R,previousPageAnalytics:_,selection:O,selectionClassNames:I,singleMode:x,startSelectedMsg:D,submitDisabled:P,updateDatePicker:w,useClearDates:k}=this.props,{localizedText:A}=this.state,L=o?2:1,N=x?O.start:O.start&&O.end;return(0,r.jsxs)("div",{className:C("uitk-date-picker","date-picker-menu"),ref:this.elementRef,children:[(0,r.jsxs)(c.i,{alignItems:"center",className:C("uitk-date-picker-selection-bar","uitk-date-picker-selection-bar-top"),tag:"section",children:[(0,r.jsx)(c.j,{children:(0,r.jsx)(h.o,{cssClassNames:I(!0),isDialog:!1,onClick:this.onClickTopStart,selectionDate:f,selectionDateMsg:`${b.start} ${D}`,selection:O.start,singleMode:x})}),!x&&(0,r.jsx)(c.j,{className:C("uitk-date-picker-selection-icon"),children:(0,r.jsx)(y.a,{name:"arrow_forward",size:y.E.SMALL})}),!x&&(0,r.jsx)(c.j,{children:(0,r.jsx)(h.o,{cssClassNames:I(!1),isDialog:!1,onClick:this.onClickTopEnd,selectionDate:p,selectionDateMsg:`${b.end} ${s}`,selection:O.end})}),this.hiddenDoneButton()]}),(0,r.jsx)(h.E,{buttonText:e,datePickerContent:i,firstMonth:O.start||u,monthsToRender:L,isDialog:!1,selection:O,selectionStart:O.start,selectionEnd:O.end,startDate:u,endDate:S,updateDatePicker:w,firstDayOfWeek:l,singleMode:x,nextPageAnalytics:T,previousPageAnalytics:_,holidays:v,onChangeMonth:this.onChangeMonth,onChangeStartDate:this.onChangeStartDate,onChangeEndDate:this.onChangeEndDate}),(0,r.jsxs)(c.i,{className:C("uitk-date-picker-menu-footer"),children:[!n&&(d||O.holidaysConfigured&&""!==O.holidaysName)&&[(0,r.jsx)(c.j,{className:C("uitk-date-picker-footer-text"),children:(0,r.jsxs)("div",{children:[O.holidaysConfigured&&""!==O.holidaysName&&(0,r.jsx)("p",{children:O.holidaysName},"holiday"),d&&(0,r.jsx)("p",{children:d},"legal")]})},"0")],d&&n&&(0,r.jsx)(c.j,{children:(0,r.jsxs)("div",{children:[n&&(0,r.jsx)("p",{className:C("uitk-date-picker-footer-text-current-price"),children:n}),d&&(0,r.jsx)("p",{className:C("uitk-date-picker-footer-text-price-summary"),children:d},"legal")]})},"1"),(0,r.jsx)(c.j,{className:C("dialog-done"),shrink:0,children:(0,r.jsxs)("div",{children:[k&&(0,r.jsx)(E.b,{margin:{inline:"three"},children:(0,r.jsx)(m.E,{"aria-label":A.clearInstructions(),disabled:!N,onClick:R,"data-stid":"clear-date-picker",children:t})}),(0,r.jsx)(g.E,{"aria-label":A.doneInstructions(),analytics:a,onClick:this.onSubmitDates,"data-stid":"apply-date-picker",disabled:P,children:e})]})})]})]})}}x.displayName="DatePickerFooterAdditionalTextMenuView";const D=e=>{const t=(0,i.useLocalization)();return(0,r.jsx)(x,Object.assign({l10n:t},e))};D.displayName="DatePickerFooterAdditionalTextMenuView";const P=u.classNames.bind(f());class w extends o.Component{constructor(e){super(e),this.uid=Math.random().toString(36).substring(7),this.doneButtonRef=o.createRef(),this.state={localizedText:{cancelButton:()=>e.l10n.formatText("datePicker.cancelButton.a11yLabel"),datePickerOpened:()=>e.l10n.formatText("datePicker.datePickerOpened.liveAnnounce"),doneButtonFare:(t,n,r,i)=>t<=1?e.l10n.formatText("datePicker.doneButtonFareWithSummary.single.a11yLabel",r,n):e.l10n.formatText("datePicker.doneButtonFareWithSummary.multiple.a11yLabel",r,i,n),clearInstructions:()=>e.l10n.formatText("datePicker.clearInstructions.a11yLabel"),doneInstructions:()=>e.l10n.formatText("datePicker.doneInstructions.a11yLabel"),hiddenDoneButton:(t,n,r)=>t<=1?e.l10n.formatText("datePicker.doneButtonWithSummary.single.a11yLabel",n):e.l10n.formatText("datePicker.doneButtonWithSummary.multiple.a11yLabel",n,r),nightSummary:t=>e.l10n.formatText("datePicker.nightSummary",t)||(t<=1?e.l10n.formatText("datePicker.nightSummary.single",t):e.l10n.formatText("datePicker.nightSummary.multiple",t)),skipToButton:t=>e.l10n.formatText("datePicker.skipToButton",t)},selection:e.selection},this.onClickTopStart=this.onClickTopStart.bind(this),this.onClickTopEnd=this.onClickTopEnd.bind(this),this.onSubmitClick=this.onSubmitClick.bind(this),this.onDismissClick=this.onDismissClick.bind(this),this.onSelectDate=this.onSelectDate.bind(this),this.internallyUpdateDatePicker=this.internallyUpdateDatePicker.bind(this),this.onChangeStartDate=this.onChangeStartDate.bind(this),this.onChangeEndDate=this.onChangeEndDate.bind(this),this.hiddenDoneButton=this.hiddenDoneButton.bind(this),this.skipToDoneButton=this.skipToDoneButton.bind(this)}componentDidMount(){const{localizedText:e}=this.state;(0,u.liveAnnounce)(e.datePickerOpened(),u.Level.ASSERTIVE)}shouldComponentUpdate(e){if(e&&e.holidays&&e.holidays.length>0){const{selection:t}=this.props;t.configureHolidays(e.holidays)}return!0}onClickTopStart(){const{onSelectStartMode:e}=this.props;e(),this.internallyUpdateDatePicker()}onClickTopEnd(){const{onSelectEndMode:e}=this.props;e(),this.internallyUpdateDatePicker()}onSubmitClick(){const{onSubmit:e,onDoneButtonClickCB:t}=this.props;if(t){const{selection:e}=this.props,{start:n,end:r}=e;t(n,r)}else e()}onDismissClick(){const{onDismiss:e}=this.props;e()}onChangeStartDate(e){const{onChangeStartDate:t}=this.props;t&&t(e,!0)}onChangeEndDate(e){const{onChangeEndDate:t}=this.props;t&&t(e,!1)}onSelectDate(){this.internallyUpdateDatePicker()}internallyUpdateDatePicker(){this.setState(this.state)}skipToDoneButton(){const{localizedText:e}=this.state;return(0,r.jsx)("button",{type:"button",className:P("is-visually-hidden","uitk-date-picker-skip-to-done"),onClick:()=>{this.doneButtonRef&&this.doneButtonRef.current&&this.doneButtonRef.current.focus()},children:e.skipToButton(this.buttonText)})}hiddenDoneButton(){const{formattedStartSelection:e,formattedEndSelection:t,selection:n}=this.props,{localizedText:i}=this.state,a=n.numberOfNights,o=e,s=t,l=i.hiddenDoneButton(a,o,s);return(0,r.jsx)("button",{type:"button",className:P("is-visually-hidden"),onClick:this.onSubmitClick,children:l})}renderApplyButton(e,t){const{localizedText:n}=this.state,{submitDisabled:i}=this.props;return(0,r.jsx)(g.E,{analytics:e,"data-stid":"apply-date-picker",disabled:i,domRef:this.doneButtonRef,onClick:this.onSubmitClick,size:v.E.LARGE,"aria-label":n.doneInstructions(),className:P("dialog-done-additional"),children:t})}render(){const{buttonText:e,clearButtonText:t,currentPrice:n,footerText:i,closeAnalytics:a,datePickerContent:o,doneAnalytics:s,endSelectedMsg:l,firstDayOfWeek:u,formattedStartSelection:d,lastValidDate:p,onScrollHandler:f,selectionClassNames:m,startSelectedMsg:g,singleMode:v,updateDatePicker:E,labels:T,l10n:R,holidays:_,firstValidDate:O,useClearDates:I,onClearDates:C}=this.props;this.buttonText=e;const{selection:x}=this.state,D=x.start,w=x.end,k=v?D:D&&w,A=D?R.formatDate(D,{dateFormat:"full",skeleton:"MMMEd"}):d,L=w?R.formatDate(w,{dateFormat:"full",skeleton:"MMMEd"}):R.formatText("datePicker.dateInput.endDate.placeholder"),{localizedText:N}=this.state,j=!(!x.holidaysConfigured||""===x.holidaysName),M=!(i||x.holidaysConfigured),F=P({"uitk-calendar-scrim":M}),U=`clear-date-picker-${this.uid}`;return x.holidaysName||(x.holidaysName=[]),(0,r.jsxs)(c.i,{direction:"column",className:P("uitk-date-picker","date-picker-dialog"),children:[(0,r.jsx)(c.j,{children:(0,r.jsx)(S.b,Object.assign(Object.assign({className:P("uitk-date-picker-toolbar"),navigationContent:{navIconLabel:N.cancelButton(),onClick:this.onDismissClick,onClickAnalytics:a}},I&&{toolbarActionContent:(0,r.jsx)(S.e,{"aria-label":N.clearInstructions(),buttonId:U,disabled:!k,onClick:C,children:t})}),{children:(0,r.jsxs)(c.i,{alignItems:"center",className:P("uitk-date-picker-selection-bar","uitk-date-picker-selection-bar-top"),tag:"section",children:[(0,r.jsx)(c.j,{children:(0,r.jsx)(h.o,{cssClassNames:m(!0),isDialog:!0,onClick:this.onClickTopStart,selectionDate:A,selectionDateMsg:`${T.start} ${g}`,selection:x.start,singleMode:v})}),!v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.j,{className:P("uitk-date-picker-selection-icon"),children:(0,r.jsx)(y.a,{name:"arrow_forward",size:y.E.SMALL})}),(0,r.jsx)(c.j,{children:(0,r.jsx)(h.o,{cssClassNames:m(!1),isDialog:!0,onClick:this.onClickTopEnd,selectionDate:L,selectionDateMsg:`${T.end} ${l}`,selection:x.end})})]}),this.hiddenDoneButton()]})}))}),(0,r.jsx)(c.j,{children:(0,r.jsx)(h.E,{buttonText:e,className:F,firstMonth:O,skipToDoneButton:this.skipToDoneButton,datePickerContent:o,isDialog:!0,selection:x,selectionStart:x.start,selectionEnd:x.end,startDate:O,endDate:p,updateDatePicker:E,firstDayOfWeek:u,onSelectDate:this.onSelectDate,singleMode:v,holidays:_,onChangeStartDate:this.onChangeStartDate,onChangeEndDate:this.onChangeEndDate,onScrollHandler:f})}),(0,r.jsxs)(c.j,{children:[M&&(0,r.jsx)(b.E,{type:b.a.BUTTON,className:P("uitk-date-picker-footer"),children:this.renderApplyButton(s,e)}),!M&&(0,r.jsxs)("div",{className:P("uitk-date-picker-footer-opaque-additional"),children:[j&&(0,r.jsx)("div",{className:P("uitk-date-picker-footer-text"),children:(0,r.jsx)("p",{children:x.holidaysName})}),!n&&i&&(0,r.jsx)("p",{className:P("uitk-date-picker-footer-text",{"uitk-date-picker-footer-text-center":!j}),children:i}),i&&n&&(0,r.jsx)(c.j,{className:P("uitk-date-picker-footer-summary"),children:(0,r.jsxs)("div",{children:[n&&(0,r.jsx)("p",{className:P("uitk-date-picker-footer-text-current-price"),children:n}),i&&(0,r.jsx)("p",{className:P("uitk-date-picker-footer-text-price-summary"),children:i},"legal")]})},"1"),this.renderApplyButton(s,e)]})]})]})}}w.displayName="DatePickerFooterAdditionalTextDialogView";const k=e=>{const t=(0,i.useLocalization)();return(0,r.jsx)(w,Object.assign({l10n:t},e))};k.displayName="DatePickerFooterAdditionalTextDialogView";const A=u.classNames.bind(f());var L;!function(e){e.YMD="yyyy-MM-dd"}(L||(L={}));const N=e=>Object.assign(Object.assign({},e.datePickerProps),{onChangeEndDate:e.onChangeEndDate,onChangeMonth:e.onChangeMonth,onChangeStartDate:e.onChangeStartDate,onClearDates:e.onClearDates,onDismiss:e.onDismiss,onScrollHandler:e.onScrollHandler,onSubmit:e.onSubmit,preventAutoFocus:e.preventAutoFocus,singleMode:e.singleMode&&!e.useSingleTrigger,useClearDates:e.useClearDates,useSingleTrigger:e.useSingleTrigger}),j=(e,t,n,i)=>{const a={dateFormat:"medium",skeleton:null!=i?i:"MMMd"},o={dateFormat:"iso-date",raw:n},{value:s,placeholder:l}=t;return{value:e.formatDate(s,o),formattedBtnText:s?e.formatDate(s,a):l,accessibleFormattedText:s?e.formatDate(s,a):l,label:(0,r.jsx)("span",{"aria-hidden":"true",children:t.label})}},M=e=>{const{updateViewport:t}=e;(0,o.useEffect)((()=>{t&&t(!0)}),[]);const n=N(e);return(0,r.jsx)(s.e,{dialogShow:!0,animation:s.E.SLIDEUP,children:(0,r.jsx)(k,Object.assign({},n))})},F=e=>{const{updateViewport:t}=e;(0,o.useEffect)((()=>{t&&t(!1)}),[]);const n=N(e);return(0,r.jsx)(D,Object.assign({},n))};M.displayName="CustomTriggerDialog";const U=e=>{const{dateFormat:t,endProps:n,l10n:i,mediumDateFormatProp:a,onChange:s,routerLinkWrapper:c,openDatePicker:u}=e,[d,h]=(0,o.useState)(!1);if((0,o.useEffect)((()=>{h(!0)}),[]),!n)return null;const{value:p,accessibleFormattedText:f,formattedBtnText:m,label:g}=j(i,n,t,a),v=`${n.label} ${f}`,y=A({"is-hidden":d});return(0,r.jsx)(l.b,{id:n.id,name:n.name,className:y,label:g,placeholder:n.placeholder,value:p,onChange:s,"data-stid":"input-date",icon:"today",invalid:n.invalid,children:d&&c&&c((0,r.jsx)(l.a,{"aria-label":v,className:A("uitk-form-field-trigger"),domRef:n.domRef,"data-name":n.name,id:`${n.id}-btn`,"data-stid":"open-date-picker",type:"button",onClick:()=>{u(n.dateType)},analytics:n.analytics,children:m}))})};U.displayName="DialogEndDateField";const B=e=>{const{updateViewport:t}=e,[n,i]=(0,o.useState)(!1);(0,o.useEffect)((()=>{i(!0),t&&t(!0)}),[]);const{dateFieldWrapperClasses:a,dateFormat:u,dialogWrapper:d,l10n:h,mediumDateFormatProp:p,onChange:f,routerLinkWrapper:m,showDatePicker:g,singleMode:v,space:y,stacked:E,startProps:b,endProps:S,triggeredField:T,useSingleTrigger:R,openDatePicker:_}=e,{value:O,formattedBtnText:I,accessibleFormattedText:C,label:x}=j(h,b,u,p);let D=O,P=I,w=`${b.label}`;if(C&&(w+=` ${C}`),R&&S){const{value:e,formattedBtnText:t,accessibleFormattedText:n}=j(h,S,u,p);e&&(D+=` - ${e}`),t&&(P+=` - ${t}`),n&&(w=`${b.label} ${h.formatText("datepicker.buttonLabel.endAccessibleFormattedText",C,n)}`)}const L=E&&!v&&!R,M=A({"uitk-date-field-wrapper":!L}),F=L?"column":"row",B=A("egds-team-date-picker-with-footer-additional-text",{[`${a}`]:a},"uitk-date-fields-wrapper"),H=N(e),$=A({"is-hidden":n});return(0,r.jsx)(c.j,{className:B,grow:1,children:(0,r.jsxs)(c.i,{className:A("uitk-date-fields"),direction:F,space:y,children:[g&&T&&d((0,r.jsx)(s.e,{dialogShow:!0,animation:s.E.SLIDEUP,children:(0,r.jsx)(k,Object.assign({},H))}),T),(0,r.jsx)(c.j,{className:M,grow:1,minWidth:"zero",maxWidth:v||R||E?void 0:"half_width",children:(0,r.jsx)("div",{children:(0,r.jsx)(l.b,{id:b.id,name:b.name,className:$,label:x,placeholder:b.placeholder,value:D,onChange:f,"data-stid":"input-date",icon:"today",invalid:b.invalid,children:n&&m&&m((0,r.jsx)(l.a,{"aria-label":w,className:A("uitk-form-field-trigger"),domRef:b.domRef,"data-name":b.name,id:`${b.id}-btn`,"data-stid":"open-date-picker",type:"button",onClick:()=>{_(b.dateType)},analytics:b.analytics,children:P}))})})}),!v&&!R&&(0,r.jsx)(c.j,{className:M,grow:1,minWidth:"zero",maxWidth:E?void 0:"half_width",children:(0,r.jsx)("div",{children:(0,r.jsx)(U,Object.assign({},e))})})]})})};B.displayName="DialogDateFields";const H=e=>{const{dateFormat:t,mediumDateFormatProp:n,endProps:i,l10n:a,onChange:s,onSubmit:c,showDatePicker:u,triggeredField:h,openDatePicker:p}=e,[f,m]=(0,o.useState)(!1);if((0,o.useEffect)((()=>{m(!0)}),[]),!i)return null;const{value:g,formattedBtnText:v,accessibleFormattedText:y,label:E}=j(a,i,t,n),b=`${i.label} ${y}`,S=f&&u,T=A("uitk-date-picker-menu-container",{"uitk-date-picker-menu-container-single":!i.doubleMonths,"uitk-date-picker-menu-container-double":i.doubleMonths}),R=N(e),_=A({"is-hidden":f});return(0,r.jsxs)(d.E,{isOpen:S,className:A("uitk-date-picker-menu"),onDismiss:c,children:[(0,r.jsx)(d.b,{children:(0,r.jsx)(l.b,{className:_,id:i.id,name:i.name,label:E,placeholder:i.placeholder,value:g,onChange:s,"data-stid":"input-date",icon:"today",invalid:i.invalid,children:f&&(0,r.jsx)(l.a,{"aria-label":b,className:A("uitk-form-field-trigger"),domRef:i.domRef,"data-name":i.name,id:`${i.id}-btn`,"data-stid":"open-date-picker",type:"button",onClick:()=>{p(i.dateType)},analytics:i.analytics,children:v})})}),u&&"end"===h&&(0,r.jsx)(d.c,{position:d.P.LEFT,className:T,autoPosition:!0,children:(0,r.jsx)(D,Object.assign({},R))})]})};H.displayName="MenuEndDateField";const $=e=>{const{updateViewport:t,openDatePicker:n}=e,[i,a]=(0,o.useState)(!1);(0,o.useEffect)((()=>{a(!0),t&&t(!1)}),[]);const{dateFieldWrapperClasses:s,dateFormat:u,l10n:h,mediumDateFormatProp:p,onChange:f,onSubmit:m,showDatePicker:g,singleMode:v,space:y,stacked:E,startProps:b,endProps:S,triggeredField:T,useSingleTrigger:R}=e,{value:_,formattedBtnText:O,accessibleFormattedText:I,label:C}=j(h,b,u,p);let x=_,P=O,w=`${b.label}`;if(I&&(w+=` ${I}`),R&&S){const{value:e,formattedBtnText:t,accessibleFormattedText:n}=j(h,S,u,p);e&&(x+=` - ${e}`),t&&(P+=` - ${t}`),n&&(w=`${b.label} ${h.formatText("datepicker.buttonLabel.endAccessibleFormattedText",I,n)}`)}const k=g,L=A("uitk-date-picker-menu-container",{"uitk-date-picker-menu-container-single":!b.doubleMonths,"uitk-date-picker-menu-container-double":b.doubleMonths}),M=N(e),F=E&&!v&&!R,U=A({"uitk-date-field-wrapper":!F}),B=F?"column":"row",$=A("egds-team-date-picker-with-footer-additional-text",{[`${s}`]:s},"uitk-date-fields-wrapper"),G=A({"is-hidden":i});return(0,r.jsx)(c.j,{className:$,grow:1,children:(0,r.jsxs)(c.i,{className:A("uitk-date-fields"),space:y,direction:B,children:[(0,r.jsx)(c.j,{className:U,grow:1,minWidth:"zero",maxWidth:v||R||E?void 0:"half_width",children:(0,r.jsx)("div",{children:(0,r.jsxs)(d.E,{isOpen:k,className:A("uitk-date-picker-menu"),onDismiss:m,children:[(0,r.jsx)(d.b,{children:(0,r.jsx)(l.b,{className:G,id:b.id,name:b.name,label:C,placeholder:b.placeholder,value:x,onChange:f,"data-stid":"input-date",icon:"today",invalid:b.invalid,children:i&&(0,r.jsx)(l.a,{"aria-label":w,className:A("uitk-form-field-trigger"),domRef:b.domRef,"data-name":b.name,id:`${b.id}-btn`,"data-stid":"open-date-picker",type:"button",onClick:()=>{n(b.dateType)},analytics:b.analytics,children:P})})}),g&&"start"===T&&(0,r.jsx)(d.c,{position:d.P.LEFT,className:L,autoPosition:!0,children:(0,r.jsx)(D,Object.assign({},M))})]})})}),!v&&!R&&(0,r.jsx)(c.j,{className:U,grow:1,minWidth:"zero",maxWidth:E?void 0:"half_width",children:(0,r.jsx)("div",{children:(0,r.jsx)(H,Object.assign({},e))})})]})})};$.displayName="MenuDateFields";class G extends o.Component{render(){const{useCustomTrigger:e,datePickerProps:t}=this.props;if(e)switch(t.renderType){case _.DIALOG:return(0,r.jsx)(M,Object.assign({},this.props));case _.MENU:return(0,r.jsx)(F,Object.assign({},this.props));default:return(0,r.jsxs)(a.l_,{children:[(0,r.jsx)(a.Vk,{children:(0,r.jsx)(M,Object.assign({},this.props))}),(0,r.jsx)(a.N0,{children:(0,r.jsx)(F,Object.assign({},this.props))})]})}switch(t.renderType){case _.DIALOG:return(0,r.jsx)(B,Object.assign({},this.props));case _.MENU:return(0,r.jsx)($,Object.assign({},this.props));default:return(0,r.jsxs)(a.l_,{children:[(0,r.jsx)(a.Vk,{children:(0,r.jsx)(B,Object.assign({},this.props))}),(0,r.jsx)(a.N0,{children:(0,r.jsx)($,Object.assign({},this.props))})]})}}}G.displayName="UitkDateField",G.defaultProps={dateFormat:L.YMD,space:"three",triggeredField:"start"};const V=e=>{const t=(0,i.useLocalization)();return(0,r.jsx)(G,Object.assign({l10n:t},e))};V.displayName="EGDSDateField"},60857:function(e,t,n){n.d(t,{cV:function(){return c}});var r=n(38972),i=n(63188),a=n(278),o=n.n(a),s=(n(85221),function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n});const l=i.classNames.bind(o()),c=e=>{const{children:t,checked:n,className:i,disabled:a,id:o,name:c,onChange:u}=e,d=s(e,["children","checked","className","disabled","id","name","onChange"]),h="button-toggle-custom-content",p=l(h,i,{[`${h}-is-checked`]:n,[`${h}-is-disabled`]:a}),f=l(`${h}-container`),m=l(`${h}-input`,"is-visually-hidden");return r.createElement("div",{className:p},r.createElement("label",{className:f,htmlFor:o},r.createElement("input",Object.assign({id:o,name:c,type:"checkbox",onChange:u,className:m,disabled:a,checked:n,"aria-checked":n,value:n?"true":"false"},d)),t))};c.displayName="ButtonToggleCustomContent"},22335:function(e,t,n){n.d(t,{S:function(){return h}});var r=n(38972),i=n(47496),a=n(63188),o=n(23783),s=n(19624),l=n.n(s),c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const u=a.classNames.bind(l()),d=({active:e,altText:t,checked:n=!1,className:i,disabled:a,icon:s,id:l,name:c,onChange:d,selected:h,text:p,value:f})=>{const m="single-select-pill",g=u(m,i,{[`${m}-disabled`]:a}),v=u(`${m}-content`,{[`${m}-active`]:e,[`${m}-selected`]:h}),y=null!=f?f:`${n}`;return r.createElement("div",{className:g},r.createElement("input",{id:l,name:c,checked:n,"aria-checked":n,type:"radio",onChange:d,className:u(`${m}-standard is-visually-hidden`),disabled:a,value:y}),r.createElement("label",{className:v,htmlFor:l,"aria-label":t},s&&r.createElement(o.a,{className:u(`${m}-icon`),name:s}),r.createElement("span",{className:u(`${m}-text`)},p)))};d.displayName="SingleSelectPill";const h=({data:e,handleSelectedPill:t,wrap:n=!1,align:o})=>{const s=e=>{const n=e.target.value;t(n)},u=a.classNames.bind(l());return r.createElement(i.c,{className:u("single-select-pill-wrapper"),wrap:n,align:o},e.map((e=>{var{id:t,selected:n}=e,i=c(e,["id","selected"]);return r.createElement(d,Object.assign(Object.assign({id:t,key:t},i),{selected:n,checked:n,onChange:s}))})))};h.displayName="SingleSelectPillWrapper"},37658:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i=["hasClearButton","required","value","domRef","handleClear","onChange","id","name","children","label","hasBorder","hasFloatedLabel","hasVisibleLabel","icon","instruction","invalid","placeholder","disabled","readOnly","predictiveText"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=n(85221),d=n(38972),h=n(34753),p=n(64531),f=n(63188),m=n(22664);function g(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var y=v(d),E=g(m),b=f.classNames.bind(E.default),S=function(e){var t=e.hasClearButton,n=void 0!==t&&t,r=e.required,a=void 0!==r&&r,s=e.value,c=void 0===s?"":s,d=e.domRef,f=void 0===d?y.createRef():d,m=e.handleClear,g=e.onChange,v=e.id,E=e.name,S=e.children,T=e.label,R=e.hasBorder,_=e.hasFloatedLabel,O=e.hasVisibleLabel,I=void 0!==O&&O,C=e.icon,x=e.instruction,D=e.invalid,P=e.placeholder,w=e.disabled,k=e.readOnly,A=e.predictiveText,L=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,i),N=u.useLocalization(),j=l(y.useState(A),2),M=j[0],F=j[1];y.useEffect((function(){F(A)}),[A,M]);var U=n&&!!c,B={labelClassName:b(U&&"has-typeahead-custom-text-input-cta"),disabled:w,hasBorder:R,hasFloatedLabel:_,hasVisibleLabel:I,icon:C,id:v,instruction:x,invalid:D,label:T,placeholder:P,readOnly:k,required:a},H=b("uitk-field-input",U&&"has-typeahead-custom-text-input-cta","typeahead-custom-text-input"),$=function(){if(y.isValidElement(T)){var e,t=T.props;return null!==(e=null==t?void 0:t.children)&&void 0!==e?e:""}return T}(),G=N.formatText("clear"),V=U?[G,$].join(" "):"";return y.createElement(h.EGDSField,o({},B),y.createElement("input",o(o({},L),{},{value:c,onChange:g,className:H,"aria-describedby":D?"".concat(v,"-error"):void 0,placeholder:P,ref:f,id:v,"aria-required":a,"aria-invalid":!!D,type:"text"})),S,M&&y.createElement("input",o(o({},L),{},{className:b("predictive-text","uitk-field-input",U&&"has-typeahead-custom-text-input-cta","typeahead-custom-text-input"),value:M,readOnly:!0})),U&&y.createElement("button",{className:b("uitk-clear-button","typeahead-custom-text-input-cta"),onClick:function(){var e;null==g||g({target:{value:"",name:E}}),null==f||null===(e=f.current)||void 0===e||e.focus(),null==m||m(),F("")},type:"button"},y.createElement(p.EGDSIcon,{name:"cancel",size:p.EGDSIconSize.SMALL,title:V,id:"".concat(v,"-clear-input-button")})))};S.displayName="TypeaheadCustomTextInput",t.TypeaheadCustomTextInput=S},21144:function(e,t,n){var r=n(37658);n(85221),n(38972),n(34753),n(64531),n(63188),n(22664),t.D=r.TypeaheadCustomTextInput},12337:function(e,t,n){var r=n(49863);n(63188),r.ESSAdapter,t.sf=r.GOOGLEMAPS_CATEGORY,r.GoogleAdapter,r.ThirdPartyAdapter,r.ThirdPartyAdapterFactory,r.appendQueryObject,r.appendQueryParam,t.M3=r.filterTypeaheadResults,t.X4=r.getSelectedResult,t.od=r.getSizeOfTypeaheadResults},91699:function(e,t,n){n.d(t,{E:function(){return h},T:function(){return u}});var r=n(63188);class i{constructor(e){this.locale=e}toEssResult(e,t,n){const r=e;let i="",a="";const o=(r||"").split(",");return o.length<2?i=o[0].trim():(i=o[0],a=o.slice(1).map((e=>e.trim())).join(", ").trim()),{category:this.category,coordinates:void 0,index:n,regionNames:{displayName:r,fullName:e,lastSearchName:e,primaryDisplayName:i,secondaryDisplayName:a},sourceId:t,sourceName:this.sourceName,type:this.type}}}const a="GOOGLEMAPS";var o;!function(e){e.INVALID_REQUEST="INVALID_REQUEST",e.OK="OK",e.OVER_QUERY_LIMIT="OVER_QUERY_LIMIT",e.REQUEST_DENIED="REQUEST_DENIED",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.ZERO_RESULTS="ZERO_RESULTS"}(o||(o={}));class s extends i{constructor(e,t,n){super(e),this.category=a,this.sourceName="GPA",this.type="ADDRESS",this.version=n;const i={accessToken:t,locale:e,version:n},o=new Promise(((e,t)=>{setTimeout((()=>{t(new Error("Timeout: Map API initialization took too long"))}),1e4)}));this.ready=Promise.race([(0,r.initGoogleMapsApi)(!1,i,!1),o]).then((()=>(this.google=window.google,this.initGooglePlacesService(),!0))).catch((e=>(console.error(e),!1)))}static getInstance(e,t,n){const r=e||"en_US",i=t||"AIzaSyABOFQNLMiTVN0AG3eWNmspVfVC8gNda68";return r in this.instances||(this.instances[r]=new s(r,i,n)),this.instances[r]}isReady(){return this.ready}initGooglePlacesService(){if(this.google&&this.google.maps&&this.google.maps.places){const{AutocompleteService:e,PlacesService:t}=this.google.maps.places;this.googleAutoCompleteService=new e,this.placesService=new t(document.createElement("div"))}}fetchResults(e){const t={input:e.q,type:"ADDRESS_AUTOCOMPLETE"===e.rc?["geocode"]:void 0};return new Promise((n=>{this.googleAutoCompleteService?this.googleAutoCompleteService.getPlacePredictions(t,((t,r)=>{if(r===o.OK){const r=(i=this.handleResponse(t),{q:e.q,rc:e.rc,rid:e.rid,sr:i});n(r)}else n(e);var i})):n(e)}))}fetchLocation(e){return this.isReady().then((t=>new Promise(((n,r)=>{if(!1==!t)try{const t={placeId:e,fields:["geometry"]};this.placesService.getDetails(t,((t,i)=>{var a;if(i===o.OK){const e=null===(a=null==t?void 0:t.geometry)||void 0===a?void 0:a.location;n(e?{lat:e.lat().toFixed(5),lng:e.lng().toFixed(5)}:void 0)}else i===o.ZERO_RESULTS?n(void 0):r(new Error(`Failed to fetch location for placeId ${e}: ${i}`))}))}catch(i){r(new Error(`Failed to fetch location for placeId ${e}: ${i.message}`))}else r(new Error(`Unable to fetch location for placeId ${e}: PlacesService is not initialized`))}))))}handleResponse(e){const t=[];return e.forEach(((e,n)=>{t.push(this.toEssResult(e.description,e.place_id,n))})),t}}s.instances={};const l={google:s};class c{static getInstance(e,t,n,r){return l[e].getInstance(t,n,r)}static filterThirdPartyAdapterFromEssConfig(e){return e.filter((e=>e in l))}}var u,d;!function(e){e.HOTEL="HOTEL",e.AIRPORT="AIRPORT",e.MULTICITY="MULTICITY",e.POI="POI",e.METROCODE="METROCODE",e.METROSTATION="METROSTATION",e.TRAINSTATION="TRAINSTATION",e.ADDRESS="ADDRESS",e.NEIGHBORHOOD="NEIGHBORHOOD",e.CURRENT_LOCATION="CURRENT_LOCATION",e.PREMISE="PREMISE",e.BUSSTATION="BUSSTATION",e.ACTIVITY="ACTIVITY",e.ATTRACTION="ATTRACTION",e.CITY="CITY"}(u||(u={})),function(e){e.GOOGLE="google",e.CONSISTENT_DISPLAY="consistent_display"}(d||(d={}));class h{constructor(e){this.viewSize=0,this.isGeoLocationAllowed=!0,this.config=e,this.config.getDevice=this.getDevice}setTypeaheadCategories(){const{formatText:e}=this.l10n;this.ESSCategories={ACTIVITY:e("typeahead.ess.attraction"),ADDRESS:e("typeahead.ess.address"),AIRPORT:e("typeahead.ess.airport"),ATTRACTION:e("typeahead.ess.attraction"),BUSSTATION:e("typeahead.ess.transit"),CITY:e("typeahead.ess.city"),HOTEL:e("typeahead.ess.hotel"),LISTING:e("typeahead.ess.property"),METROCODE:e("typeahead.ess.city"),METROSTATION:e("typeahead.ess.transit"),MULTICITY:e("typeahead.ess.city"),MULTIREGION:e("typeahead.ess.city"),NEIGHBORHOOD:e("typeahead.ess.city"),POI:e("typeahead.ess.attraction"),PREMISE:e("typeahead.ess.property"),TRAINSTATION:e("typeahead.ess.transit"),CURRENT_LOCATION:""}}isHistoryDetailEnabled(){return!0===this.config.historyDetail}getConfig(){return this.config}getTypeaheadCategories(){return this.ESSCategories}addToESSCategories(e){this.ESSCategories=Object.assign(Object.assign({},this.ESSCategories),e)}setL10n(e){this.l10n=e}createURLParams(e){return Object.entries(e).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}fetchDeleteRecentSearch(e){const t=`${this.config.domain.endsWith("/")?this.config.domain:`${this.config.domain}/`}api/v1/deletehistory`,n={lob:this.config.lob,locale:this.config.locale,guid:this.config.guid,expuserid:this.config.expuserid,siteId:this.config.siteId,dest:this.config.dest},r=`${t}?${this.createURLParams(n)}`,i=new Headers({accept:"application/json","Content-Type":"application/json"});if(""!==e){const t={gaiaIds:[e]};return fetch(r,{body:JSON.stringify(t),headers:i,method:"POST"}).then((e=>e.json())).catch((e=>{console.error(`Error while deleting recent searches: ${e}`)}))}return Promise.resolve([])}constructURL(e,t){let n=this.config.domain?this.config.domain:"";n=n.endsWith("/")?n:`${n}/`,n.endsWith("/")&&(n=n.slice(0,-1));const r=(()=>"AIRLINE"===this.config.domainId?`${n}/api/v2/suggest`:`${n}/api/v4/typeahead`)();if(void 0!==this.config.browser&&null!==this.config.browser||(this.config.browser=this.getBrowser(window.navigator.userAgent)),void 0!==this.config.device&&null!==this.config.device||(this.config.device=this.getDevice(window.navigator.userAgent)),"AIRLINE"===this.config.domainId){const t={domainId:this.config.domainId,lob:this.config.lob,maxResults:this.config.maxResults,siteid:this.config.siteId,locale:this.config.locale};return`${r}?query=${e}&${this.createURLParams(t)}`}const i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({browser:this.config.browser,client:this.config.client,dest:this.config.dest,device:this.config.device,expuserid:this.config.expuserid?this.config.expuserid:-1,features:this.config.features,format:"json",guid:this.config.guid,listing:!!this.config.listing,lob:this.config.lob,locale:this.config.locale,maxresults:this.config.maxResults,personalize:!!this.config.personalize&&this.config.personalize},this.config.regionId?{rid:this.config.regionId}:{}),{regiontype:this.config.regionType,siteid:this.config.siteId,ignorePrefillSearchTermForAlternateDestinationsRequest:this.config.ignorePrefillSearchTermForAlternateDestinationsRequest}),this.config.packageType?{pt:this.config.packageType}:{}),this.config.latLong?{latlong:this.config.latLong}:{}),this.config.lastSearchRegionId?{lsrid:this.config.lastSearchRegionId}:{}),this.config.lastSearchTimestamp?{lstime:this.config.lastSearchTimestamp}:{}),this.config.lastSearchLatLong?{lslatlong:this.config.lastSearchLatLong}:{}),this.config.lastSearchElapseTime?{lsetime:this.config.lastSearchElapseTime}:{}),this.config.googleApiKey?{googleApiKey:this.config.googleApiKey}:{}),this.config.googleApiVersion?{googleApiVersion:this.config.googleApiVersion}:{}),this.config.alternate&&t?{alternate:!0}:{}),this.config.debounceVariant?{ab:this.config.debounceVariant}:{}),this.config.trending?{trending:this.config.trending}:{}),this.config.alternateSecondVariant?{alternateSecondVariant:this.config.alternateSecondVariant}:{}),this.config.drivable?{drivable:this.config.drivable}:{}),this.config.fetchLocation?{fetchLocation:this.config.fetchLocation}:{}),this.config.popularFilter?{popularFilter:this.config.popularFilter}:{});return""===e?`${r}/?${this.createURLParams(i)}`:`${r}/${e}?${this.createURLParams(i)}`}fetchResponse(e,t){var n,r;const i=this.config&&this.config.personalize;return""===e&&i||""!==e?(null===(r=(n=this.config).logRequest)||void 0===r||r.call(n,e),fetch(this.constructURL(e,t),Object.assign({method:"AIRLINE"===this.config.domainId?"POST":"GET"},this.config.xPageId&&{headers:{"x-page-id":this.config.xPageId}})).then((e=>e.json()))):Promise.resolve([])}fetchResults(e,t){const n=t?"":e;return this.fetchResponse(n,t).then((e=>this.handleEssResponse(e))).then((e=>this.logResponse(e))).then((e=>this.adaptResponseToTypeaheadResults(e,n,this.config.historyDetail,this.config.historyDetailFormatVariant))).then((e=>this.categorizeOnFocusResponse(e,t)))}fetchRecentSearchResults(){return this.fetchResults("")}fetchAlternativeResults(e){return this.fetchResults(e,this.config.alternate||this.config.ignorePrefillSearchTermForAlternateDestinationsRequest)}fetchResultsCategorized(e){return this.fetchResponse(e).then((e=>this.handleEssResponse(e))).then((e=>this.logResponse(e))).then((t=>this.adaptResponseToTypeaheadResults(t,e,this.config.historyDetail,this.config.historyDetailFormatVariant))).then((e=>this.categorizeResponse(e)))}fetchRecentSearchResultsCategorized(){return this.fetchResultsCategorized("")}categorizeResponse(e){const t=new Map,n=[];let r=0;if(e&&e.length>0){e.forEach((e=>{var n;const r=(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.type)?this.ESSCategories[e.data.type]:"";t[r]||(t[r]=[]),t[r].push(e)}));for(const[e,i]of Object.entries(t)){i.forEach((e=>{e.data.index=r,r++}));const t={heading:e,typeaheadResults:i};n.push(t)}}return n}onFocusCategories(){const{formatText:e}=this.l10n;return Object.assign({CURRENTLOCATION:"",POPULAR:e("typeahead.ess.popular")||"Explore popular destinations",DRIVABLE:e("typeahead.ess.nearby")||"Nearby locations"},this.config.alternateSecondVariant?{USERHISTORY:e("typeahead.ess.history")||"Recent searches",ALTERNATE:e("typeahead.ess.alternate")||"People also searched"}:{ALTERNATE:e("typeahead.ess.alternate")||"People also searched",USERHISTORY:e("typeahead.ess.history")||"Recent searches"})}categorizeOnFocusResponse(e,t){var n,r;if(e&&e.length>0){const i=e[0];if("ALTERNATE"===i.data.category||"CURRENTLOCATION"===i.data.category||"POPULAR"===i.data.category||"DRIVABLE"===i.data.category&&this.config.drivable||"USERHISTORY"===i.data.category&&this.config.alternate&&t){const i=new Map,a=[],o=this.onFocusCategories();let s=0;e.forEach((e=>{if(e.data.category){const t=e.data.category;i[t]||(i[t]=[]),i[t].push(e)}}));for(const[e,t]of Object.entries(o)){const n=i[e];if(n&&n.length>0){n.forEach((e=>{e.data.index=s,e.data.displayType="CATEGORIZED",s+=1}));const e={heading:t,typeaheadResults:n};a.push(e)}}return(t||this.config.showCurrentLocation)&&(this.response.sr=a.flatMap((e=>e.typeaheadResults.map((e=>e.data)))),null===(r=(n=this.config).logResponse)||void 0===r||r.call(n,this.response)),a}}return e}onItemSelection(e){return(null==e?void 0:e.type)===u.CURRENT_LOCATION?this.handleCurrentLocationSelection(e):this.config.fetchLocation&&(null==e?void 0:e.type)===u.ADDRESS&&e.category===a&&e.sourceId&&"function"==typeof this.thirdPartyFallbackAdapter.fetchLocation?this.fillLocation(this.thirdPartyFallbackAdapter.fetchLocation.bind(this.thirdPartyFallbackAdapter),e.sourceId,e):Promise.resolve(e)}handleCurrentLocationSelection(e){if(this.isGeoLocationAllowed)return this.readCurrentLocation().then((({coords:{latitude:t,longitude:n}})=>Object.assign(Object.assign({},e),{location:{lat:t.toFixed(5),long:n.toFixed(5)}}))).catch((e=>{throw this.isGeoLocationAllowed=!1,e}));const t=this.l10n.formatText("typeahead.currentLocation.blocked.message");return window.alert(t),Promise.reject(t)}fillLocation(e,t,n){return e(t).then((e=>{if(e){const{lat:t,lng:r}=e;return Object.assign({location:{lat:t,long:r}},n)}return n}))}readCurrentLocation(){return new Promise(((e,t)=>{window.navigator.geolocation.getCurrentPosition(e,t)}))}handleEssResponse(e){return e.sr=e.sr||e.suggestions||[],this.thirdPartyFallbackAdapter||this.setThirdPartyAdapter(),!this.thirdPartyFallbackAdapter||"GOOGLE_AUTOCOMPLETE"!==e.rc&&"ADDRESS_AUTOCOMPLETE"!==e.rc?Promise.resolve(e):this.thirdPartyFallbackAdapter.fetchResults(e)}setThirdPartyAdapter(){const e=c.filterThirdPartyAdapterFromEssConfig(this.config.features.split("|"));let t;if(e.length>0){const n=e[0];t=c.getInstance(n,this.config.locale,"google"===n?this.config.googleApiKey:void 0,"google"===n?this.config.googleApiVersion:void 0),this.thirdPartyFallbackAdapter=t}}logResponse(e){var t,n;return null===(n=(t=this.config).logResponse)||void 0===n||n.call(t,e),this.response=e,Promise.resolve(e)}adaptResponseToTypeaheadResults(e,t,n,r){const i=(e,t,n,i)=>i?e("typeahead.recentHistory.travelers",n):r?e("typeahead.recentHistory.travelersRooms",n,t):e("typeahead.recentHistory.roomsTravelers",t,n),a=e=>"LISTING"===(null==e?void 0:e.type)&&e.listingProps?e.listingProps.headline:void 0,o=e=>"LISTING"===(null==e?void 0:e.type)&&e.listingProps?{subtext:`${e.listingProps.listingId} - ${e.listingProps.baseLocation}`}:void 0,s=(e,a)=>{let o,s;if("USERHISTORY"===e&&n&&void 0!==this.l10n&&a&&a.searchDetail&&a.searchDetail.lob&&!t){let e="";const t=a.searchDetail,{formatDateString:n,formatText:l}=this.l10n,c=t.roomCount,u=t.lob,d=a.searchDetail.totalTravelerCount?Number(a.searchDetail.totalTravelerCount):null;if(a.searchDetail.startDate&&a.searchDetail.endDate){const a=new Date(t.startDate),h=6e4*a.getTimezoneOffset(),p=n(new Date(a.getTime()+h),{skeleton:"MMMd"}),f=new Date(t.endDate),m=6e4*f.getTimezoneOffset(),g=n(new Date(f.getTime()+m),{skeleton:"MMMd"}),v=l("datePicker.nightSummary",(Number(t.endDate)-Number(t.startDate))/864e5);o=`${p} - ${g}`,s=l("typeahead.recentHistory.aceessibility.dates",p,g),1!==c||"Lodging"!==u&&"Package"!==u?"Lodging"!==u&&"Package"!==u||(r?o=`${p} - ${g}`:(o=`${p} - ${g} | ${v}`,s=s.concat(`, ${v}`))):(e=i(l,c,d,this.config.excludeRoomsLabelForRecentHistory),r?(o=`${p} - ${g} • ${e}`,s=s.concat(`, ${e}`)):(o=`${p} - ${g} | ${v} | ${e}`,s=s.concat(`, ${v}, ${e}`)))}else a.searchDetail.startDate||a.searchDetail.endDate||1!==c||"Lodging"!==u&&"Package"!==u||(o=i(l,c,d,this.config.excludeRoomsLabelForRecentHistory))}return{subtext:o,a11yLabel:s}},l=e=>{var t,n,r,i,l;const{subtext:c,a11yLabel:u}=s(e.category,e)||o(e);if(this.config.features.indexOf(d.CONSISTENT_DISPLAY)<0){return{primaryText:(null===(t=e.regionNames)||void 0===t?void 0:t.displayName)||(null===(n=e.names)||void 0===n?void 0:n.displayName)||a(e),subtext:c,a11yLabel:u}}const h=(null===(r=e.regionNames)||void 0===r?void 0:r.primaryDisplayName)||(null===(i=e.names)||void 0===i?void 0:i.displayName)||a(e);if(c)return{primaryText:`${h}`,subtext:c,a11yLabel:u};return{primaryText:`${h}`,subtext:(null===(l=e.regionNames)||void 0===l?void 0:l.secondaryDisplayName)||o(e)||""}},c=(e,t,n,r,i)=>{if("AIRLINE"===e)return"";if(n&&!r)return"subdirectory_arrow_right";if("USERHISTORY"===i)return"history";if("FLIGHTS"===this.config.lob)return"lob_flights";switch(e){case"HOTEL":return"lob_hotels";case"AIRPORT":return"lob_flights";case"ADDRESS":return"RENTALLOCATION"===t?"lob_cars":"place";case"METROSTATION":case"TRAINSTATION":return"train";default:return"place"}},u=(e,n,r)=>{var i,a,o,s,u,d,h,p,f,m,g,v,y,E;const b=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("nearby")>-1,S=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("child")>-1||b,{primaryText:T,subtext:R,a11yLabel:_}=l(n),O=Object.assign(Object.assign({data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.category?{category:n.category}:{}),!t&&n.searchDetail?{searchDetail:n.searchDetail}:{}),n.userHistoryType?{userHistoryType:n.userHistoryType}:{}),(null===(i=n.ids)||void 0===i?void 0:i.id)?{id:n.ids.id}:{}),n.coordinates?{location:{lat:n.coordinates.lat,long:n.coordinates.long}}:{}),n.regionId?{regionId:n.regionId}:n.gaiaId?{regionId:n.gaiaId}:{}),n.cityId?{cityId:n.cityId}:{}),n.regionNames?{regionNames:n.regionNames}:{}),n.type?{type:n.type}:{}),n.subtype?{subtype:n.subtype}:{}),n.hotelId?{selected:n.hotelId}:{}),n.hierarchyInfo?{hierarchyInfo:n.hierarchyInfo}:{}),"LISTING"===n.type&&n.listingProps?{listing:n.listingProps}:{}),n.sourceId?{sourceId:n.sourceId}:{}),n.essId?{essId:{sourceId:n.essId.sourceId,sourceName:n.essId.sourceName}}:{}),{dest:this.config.dest}),{index:r+1}),icon:c(n.type||n.domainId,n.subtype,S,b,n.category)},S?{isChild:!0}:{}),{imageUrl:n.imageUrl,name:T,subtext:R,a11yLabel:_,title:(null===(a=n.regionNames)||void 0===a?void 0:a.lastSearchName)||(null===(o=n.regionNames)||void 0===o?void 0:o.shortName)||(null===(s=n.regionNames)||void 0===s?void 0:s.fullName)||(null===(u=n.listingProps)||void 0===u?void 0:u.listingId)||(null===(d=n.ids)||void 0===d?void 0:d.id),value:(null===(h=n.regionNames)||void 0===h?void 0:h.lastSearchName)||(null===(p=n.regionNames)||void 0===p?void 0:p.shortName)||(null===(f=n.regionNames)||void 0===f?void 0:f.fullName)||(null===(m=n.listingProps)||void 0===m?void 0:m.listingId)||(null===(g=n.names)||void 0===g?void 0:g.displayName)});return e.push(O),(null==n?void 0:n.filterRefinements)&&(null===(v=null==n?void 0:n.filterRefinements)||void 0===v?void 0:v.length)>0&&(null===(E=null===(y=null==n?void 0:n.filterRefinements.find((e=>{var t,n;return"popularFilter"===(null===(t=null==e?void 0:e.category)||void 0===t?void 0:t.legacyId)||"popular_group"===(null===(n=null==e?void 0:e.category)||void 0===n?void 0:n.externalId)})))||void 0===y?void 0:y.arrayOfValues)||void 0===E||E.forEach((t=>{e.push(Object.assign(Object.assign({},O),{data:Object.assign(Object.assign({},O.data),{popularFilter:[t]}),subtext:`<strong>${null==t?void 0:t.displayName}</strong>`,icon:"subdirectory_arrow_right"}))}))),e},h=""===t&&this.shouldShowCurrentLocation()?[this.getCurrentLocationItem()]:[];return(null===(f=null===(p=e.sr)||void 0===p?void 0:p.reduce)||void 0===f?void 0:f.call(p,u,h))||h;var p,f}shouldShowCurrentLocation(){return Boolean(this.config.showCurrentLocation&&"geolocation"in navigator)}getCurrentLocationItem(){const e=this.isGeoLocationAllowed?this.l10n.formatText("typeahead.currentLocation.available.item"):this.l10n.formatText("typeahead.currentLocation.blocked.item");return{data:{category:"CURRENTLOCATION",hierarchyInfo:{relation:["current"]},index:-1,enabled:this.isGeoLocationAllowed,regionNames:{fullName:"CurrentLocation"},type:u.CURRENT_LOCATION},icon:"my_location",name:e,title:e,value:e}}getBrowser(e){let t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE":"Chrome"===n[1]&&(t=e.match(/\b(OPR|Edge?)\/(\d+)/),null!==t)?t.slice(1,-1).join(" ").replace("OPR","Opera").replace("Edg ","Edge "):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],t=e.match(/version\/(\d+)/i),null!==t&&n.splice(1,1,t[1]),n[0])}getDevice(e){return/iPad|Transformer|ME173X|KOOF|Nook|IMM76D|Nexus 10|Nexus 7|Tablet/i.test(e)||/HP Slate|PG09410|PG41200|Mediapad|Kindle|Tab|Xoom|TegraNote|SCH-I800/i.test(e)?"Tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"Mobile":"Desktop"}}},49863:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t=h(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var E,b=n(63188),S=function(){return g((function e(t){f(this,e),v(this,"locale",void 0),v(this,"category",void 0),v(this,"sourceName",void 0),v(this,"type",void 0),v(this,"apiKey",void 0),v(this,"version",void 0),this.locale=t}),[{key:"toEssResult",value:function(e,t,n){var r=e,i="",a="",o=(r||"").split(",");return o.length<2?i=o[0].trim():(i=o[0],a=o.slice(1).map((function(e){return e.trim()})).join(", ").trim()),{category:this.category,coordinates:void 0,index:n,regionNames:{displayName:r,fullName:e,lastSearchName:e,primaryDisplayName:i,secondaryDisplayName:a},sourceId:t,sourceName:this.sourceName,type:this.type}}}])}(),T="GOOGLEMAPS";t.PlacesServiceStatus=void 0,(E=t.PlacesServiceStatus||(t.PlacesServiceStatus={})).INVALID_REQUEST="INVALID_REQUEST",E.OK="OK",E.OVER_QUERY_LIMIT="OVER_QUERY_LIMIT",E.REQUEST_DENIED="REQUEST_DENIED",E.UNKNOWN_ERROR="UNKNOWN_ERROR",E.ZERO_RESULTS="ZERO_RESULTS";var R=function(e){function n(e,t,r){var i;f(this,n),v(i=u(this,n,[e]),"google",void 0),v(i,"googleAutoCompleteService",void 0),v(i,"placesService",void 0),v(i,"ready",void 0),i.category=T,i.sourceName="GPA",i.type="ADDRESS",i.version=r;var a={accessToken:t,locale:e,version:r},o=new Promise((function(e,t){setTimeout((function(){t(new Error("Timeout: Map API initialization took too long"))}),1e4)}));return i.ready=Promise.race([b.initGoogleMapsApi(!1,a,!1),o]).then((function(){return i.google=window.google,i.initGooglePlacesService(),!0})).catch((function(e){return console.error(e),!1})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(n,e),g(n,[{key:"isReady",value:function(){return this.ready}},{key:"initGooglePlacesService",value:function(){if(this.google&&this.google.maps&&this.google.maps.places){var e=this.google.maps.places,t=e.AutocompleteService,n=e.PlacesService;this.googleAutoCompleteService=new t,this.placesService=new n(document.createElement("div"))}}},{key:"fetchResults",value:function(e){var n=this,r={input:e.q,type:"ADDRESS_AUTOCOMPLETE"===e.rc?["geocode"]:void 0};return new Promise((function(i){n.googleAutoCompleteService?n.googleAutoCompleteService.getPlacePredictions(r,(function(r,a){if(a===t.PlacesServiceStatus.OK){var o=(s=n.handleResponse(r),{q:e.q,rc:e.rc,rid:e.rid,sr:s});i(o)}else i(e);var s})):i(e)}))}},{key:"fetchLocation",value:function(e){var n=this;return this.isReady().then((function(r){return new Promise((function(i,a){if(!1==!r)try{var o={placeId:e,fields:["geometry"]};n.placesService.getDetails(o,(function(n,r){if(r===t.PlacesServiceStatus.OK){var o,s=null==n||null===(o=n.geometry)||void 0===o?void 0:o.location;i(s?{lat:s.lat().toFixed(5),lng:s.lng().toFixed(5)}:void 0)}else r===t.PlacesServiceStatus.ZERO_RESULTS?i(void 0):a(new Error("Failed to fetch location for placeId ".concat(e,": ").concat(r)))}))}catch(s){a(new Error("Failed to fetch location for placeId ".concat(e,": ").concat(s.message)))}else a(new Error("Unable to fetch location for placeId ".concat(e,": PlacesService is not initialized")))}))}))}},{key:"handleResponse",value:function(e){var t=this,n=[];return e.forEach((function(e,r){n.push(t.toEssResult(e.description,e.place_id,r))})),n}}],[{key:"getInstance",value:function(e,t,r){var i=e||"en_US",a=t||"AIzaSyABOFQNLMiTVN0AG3eWNmspVfVC8gNda68";return i in this.instances||(this.instances[i]=new n(i,a,r)),this.instances[i]}}])}(S);v(R,"instances",{});var _,O,I={google:R},C=function(){return g((function e(){f(this,e)}),null,[{key:"getInstance",value:function(e,t,n,r){return I[e].getInstance(t,n,r)}},{key:"filterThirdPartyAdapterFromEssConfig",value:function(e){return e.filter((function(e){return e in I}))}}])}();t.TypeaheadLocationType=void 0,(_=t.TypeaheadLocationType||(t.TypeaheadLocationType={})).HOTEL="HOTEL",_.AIRPORT="AIRPORT",_.MULTICITY="MULTICITY",_.POI="POI",_.METROCODE="METROCODE",_.METROSTATION="METROSTATION",_.TRAINSTATION="TRAINSTATION",_.ADDRESS="ADDRESS",_.NEIGHBORHOOD="NEIGHBORHOOD",_.CURRENT_LOCATION="CURRENT_LOCATION",_.PREMISE="PREMISE",_.BUSSTATION="BUSSTATION",_.ACTIVITY="ACTIVITY",_.ATTRACTION="ATTRACTION",_.CITY="CITY",function(e){e.GOOGLE="google",e.CONSISTENT_DISPLAY="consistent_display"}(O||(O={}));var x=function(){return g((function e(t){f(this,e),v(this,"config",void 0),v(this,"thirdPartyFallbackAdapter",void 0),v(this,"l10n",void 0),v(this,"viewSize",0),v(this,"ESSCategories",void 0),v(this,"isGeoLocationAllowed",!0),v(this,"response",void 0),this.config=t,this.config.getDevice=this.getDevice}),[{key:"setTypeaheadCategories",value:function(){var e=this.l10n.formatText;this.ESSCategories={ACTIVITY:e("typeahead.ess.attraction"),ADDRESS:e("typeahead.ess.address"),AIRPORT:e("typeahead.ess.airport"),ATTRACTION:e("typeahead.ess.attraction"),BUSSTATION:e("typeahead.ess.transit"),CITY:e("typeahead.ess.city"),HOTEL:e("typeahead.ess.hotel"),LISTING:e("typeahead.ess.property"),METROCODE:e("typeahead.ess.city"),METROSTATION:e("typeahead.ess.transit"),MULTICITY:e("typeahead.ess.city"),MULTIREGION:e("typeahead.ess.city"),NEIGHBORHOOD:e("typeahead.ess.city"),POI:e("typeahead.ess.attraction"),PREMISE:e("typeahead.ess.property"),TRAINSTATION:e("typeahead.ess.transit"),CURRENT_LOCATION:""}}},{key:"isHistoryDetailEnabled",value:function(){return!0===this.config.historyDetail}},{key:"getConfig",value:function(){return this.config}},{key:"getTypeaheadCategories",value:function(){return this.ESSCategories}},{key:"addToESSCategories",value:function(e){this.ESSCategories=c(c({},this.ESSCategories),e)}},{key:"setL10n",value:function(e){this.l10n=e}},{key:"createURLParams",value:function(e){return Object.entries(e).map((function(e){var t=a(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(encodeURIComponent(r))})).join("&")}},{key:"fetchDeleteRecentSearch",value:function(e){var t=this.config.domain.endsWith("/")?this.config.domain:"".concat(this.config.domain,"/"),n="".concat(t,"api/v1/deletehistory"),r={lob:this.config.lob,locale:this.config.locale,guid:this.config.guid,expuserid:this.config.expuserid,siteId:this.config.siteId,dest:this.config.dest},i="".concat(n,"?").concat(this.createURLParams(r)),a=new Headers({accept:"application/json","Content-Type":"application/json"});if(""!==e){var o={gaiaIds:[e]};return fetch(i,{body:JSON.stringify(o),headers:a,method:"POST"}).then((function(e){return e.json()})).catch((function(e){console.error("Error while deleting recent searches: ".concat(e))}))}return Promise.resolve([])}},{key:"constructURL",value:function(e,t){var n=this,r=this.config.domain?this.config.domain:"";(r=r.endsWith("/")?r:"".concat(r,"/")).endsWith("/")&&(r=r.slice(0,-1));var i="AIRLINE"===n.config.domainId?"".concat(r,"/api/v2/suggest"):"".concat(r,"/api/v4/typeahead");if(void 0!==this.config.browser&&null!==this.config.browser||(this.config.browser=this.getBrowser(window.navigator.userAgent)),void 0!==this.config.device&&null!==this.config.device||(this.config.device=this.getDevice(window.navigator.userAgent)),"AIRLINE"===this.config.domainId){var a={domainId:this.config.domainId,lob:this.config.lob,maxResults:this.config.maxResults,siteid:this.config.siteId,locale:this.config.locale};return"".concat(i,"?query=").concat(e,"&").concat(this.createURLParams(a))}var o=c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c({browser:this.config.browser,client:this.config.client,dest:this.config.dest,device:this.config.device,expuserid:this.config.expuserid?this.config.expuserid:-1,features:this.config.features,format:"json",guid:this.config.guid,listing:!!this.config.listing,lob:this.config.lob,locale:this.config.locale,maxresults:this.config.maxResults,personalize:!!this.config.personalize&&this.config.personalize},this.config.regionId?{rid:this.config.regionId}:{}),{},{regiontype:this.config.regionType,siteid:this.config.siteId,ignorePrefillSearchTermForAlternateDestinationsRequest:this.config.ignorePrefillSearchTermForAlternateDestinationsRequest},this.config.packageType?{pt:this.config.packageType}:{}),this.config.latLong?{latlong:this.config.latLong}:{}),this.config.lastSearchRegionId?{lsrid:this.config.lastSearchRegionId}:{}),this.config.lastSearchTimestamp?{lstime:this.config.lastSearchTimestamp}:{}),this.config.lastSearchLatLong?{lslatlong:this.config.lastSearchLatLong}:{}),this.config.lastSearchElapseTime?{lsetime:this.config.lastSearchElapseTime}:{}),this.config.googleApiKey?{googleApiKey:this.config.googleApiKey}:{}),this.config.googleApiVersion?{googleApiVersion:this.config.googleApiVersion}:{}),this.config.alternate&&t?{alternate:!0}:{}),this.config.debounceVariant?{ab:this.config.debounceVariant}:{}),this.config.trending?{trending:this.config.trending}:{}),this.config.alternateSecondVariant?{alternateSecondVariant:this.config.alternateSecondVariant}:{}),this.config.drivable?{drivable:this.config.drivable}:{}),this.config.fetchLocation?{fetchLocation:this.config.fetchLocation}:{}),this.config.popularFilter?{popularFilter:this.config.popularFilter}:{});return""===e?"".concat(i,"/?").concat(this.createURLParams(o)):"".concat(i,"/").concat(e,"?").concat(this.createURLParams(o))}},{key:"fetchResponse",value:function(e,t){var n,r,i=this.config&&this.config.personalize;return""===e&&i||""!==e?(null===(n=(r=this.config).logRequest)||void 0===n||n.call(r,e),fetch(this.constructURL(e,t),c({method:"AIRLINE"===this.config.domainId?"POST":"GET"},this.config.xPageId&&{headers:{"x-page-id":this.config.xPageId}})).then((function(e){return e.json()}))):Promise.resolve([])}},{key:"fetchResults",value:function(e,t){var n=this,r=t?"":e;return this.fetchResponse(r,t).then((function(e){return n.handleEssResponse(e)})).then((function(e){return n.logResponse(e)})).then((function(e){return n.adaptResponseToTypeaheadResults(e,r,n.config.historyDetail,n.config.historyDetailFormatVariant)})).then((function(e){return n.categorizeOnFocusResponse(e,t)}))}},{key:"fetchRecentSearchResults",value:function(){return this.fetchResults("")}},{key:"fetchAlternativeResults",value:function(e){return this.fetchResults(e,this.config.alternate||this.config.ignorePrefillSearchTermForAlternateDestinationsRequest)}},{key:"fetchResultsCategorized",value:function(e){var t=this;return this.fetchResponse(e).then((function(e){return t.handleEssResponse(e)})).then((function(e){return t.logResponse(e)})).then((function(n){return t.adaptResponseToTypeaheadResults(n,e,t.config.historyDetail,t.config.historyDetailFormatVariant)})).then((function(e){return t.categorizeResponse(e)}))}},{key:"fetchRecentSearchResultsCategorized",value:function(){return this.fetchResultsCategorized("")}},{key:"categorizeResponse",value:function(e){var t=this,n=new Map,r=[],i=0;if(e&&e.length>0){e.forEach((function(e){var r,i=null!=e&&null!==(r=e.data)&&void 0!==r&&r.type?t.ESSCategories[e.data.type]:"";n[i]||(n[i]=[]),n[i].push(e)}));for(var o=0,s=Object.entries(n);o<s.length;o++){var l=a(s[o],2),c=l[0],u=l[1];u.forEach((function(e){e.data.index=i,i++}));var d={heading:c,typeaheadResults:u};r.push(d)}}return r}},{key:"onFocusCategories",value:function(){var e=this.l10n.formatText;return c({CURRENTLOCATION:"",POPULAR:e("typeahead.ess.popular")||"Explore popular destinations",DRIVABLE:e("typeahead.ess.nearby")||"Nearby locations"},this.config.alternateSecondVariant?{USERHISTORY:e("typeahead.ess.history")||"Recent searches",ALTERNATE:e("typeahead.ess.alternate")||"People also searched"}:{ALTERNATE:e("typeahead.ess.alternate")||"People also searched",USERHISTORY:e("typeahead.ess.history")||"Recent searches"})}},{key:"categorizeOnFocusResponse",value:function(e,t){if(e&&e.length>0){var n=e[0];if("ALTERNATE"===n.data.category||"CURRENTLOCATION"===n.data.category||"POPULAR"===n.data.category||"DRIVABLE"===n.data.category&&this.config.drivable||"USERHISTORY"===n.data.category&&this.config.alternate&&t){var r,i,o=new Map,s=[],l=this.onFocusCategories(),c=0;e.forEach((function(e){if(e.data.category){var t=e.data.category;o[t]||(o[t]=[]),o[t].push(e)}}));for(var u=0,d=Object.entries(l);u<d.length;u++){var h=a(d[u],2),p=h[0],f=h[1],m=o[p];if(m&&m.length>0){m.forEach((function(e){e.data.index=c,e.data.displayType="CATEGORIZED",c+=1}));var g={heading:f,typeaheadResults:m};s.push(g)}}if(t||this.config.showCurrentLocation)this.response.sr=s.flatMap((function(e){return e.typeaheadResults.map((function(e){return e.data}))})),null===(r=(i=this.config).logResponse)||void 0===r||r.call(i,this.response);return s}}return e}},{key:"onItemSelection",value:function(e){return(null==e?void 0:e.type)===t.TypeaheadLocationType.CURRENT_LOCATION?this.handleCurrentLocationSelection(e):this.config.fetchLocation&&(null==e?void 0:e.type)===t.TypeaheadLocationType.ADDRESS&&e.category===T&&e.sourceId&&"function"==typeof this.thirdPartyFallbackAdapter.fetchLocation?this.fillLocation(this.thirdPartyFallbackAdapter.fetchLocation.bind(this.thirdPartyFallbackAdapter),e.sourceId,e):Promise.resolve(e)}},{key:"handleCurrentLocationSelection",value:function(e){var t=this;if(this.isGeoLocationAllowed)return this.readCurrentLocation().then((function(t){var n=t.coords,r=n.latitude,i=n.longitude;return c(c({},e),{},{location:{lat:r.toFixed(5),long:i.toFixed(5)}})})).catch((function(e){throw t.isGeoLocationAllowed=!1,e}));var n=this.l10n.formatText("typeahead.currentLocation.blocked.message");return window.alert(n),Promise.reject(n)}},{key:"fillLocation",value:function(e,t,n){return e(t).then((function(e){return e?c({location:{lat:e.lat,long:e.lng}},n):n}))}},{key:"readCurrentLocation",value:function(){return new Promise((function(e,t){window.navigator.geolocation.getCurrentPosition(e,t)}))}},{key:"handleEssResponse",value:function(e){return e.sr=e.sr||e.suggestions||[],this.thirdPartyFallbackAdapter||this.setThirdPartyAdapter(),!this.thirdPartyFallbackAdapter||"GOOGLE_AUTOCOMPLETE"!==e.rc&&"ADDRESS_AUTOCOMPLETE"!==e.rc?Promise.resolve(e):this.thirdPartyFallbackAdapter.fetchResults(e)}},{key:"setThirdPartyAdapter",value:function(){var e,t=C.filterThirdPartyAdapterFromEssConfig(this.config.features.split("|"));if(t.length>0){var n=t[0];e=C.getInstance(n,this.config.locale,"google"===n?this.config.googleApiKey:void 0,"google"===n?this.config.googleApiVersion:void 0),this.thirdPartyFallbackAdapter=e}}},{key:"logResponse",value:function(e){var t,n;return null===(t=(n=this.config).logResponse)||void 0===t||t.call(n,e),this.response=e,Promise.resolve(e)}},{key:"adaptResponseToTypeaheadResults",value:function(e,t,n,r){var i,a,o=this,s=function(e,t,n,i){return i?e("typeahead.recentHistory.travelers",n):r?e("typeahead.recentHistory.travelersRooms",n,t):e("typeahead.recentHistory.roomsTravelers",t,n)},l=function(e){return"LISTING"===(null==e?void 0:e.type)&&e.listingProps?e.listingProps.headline:void 0},u=function(e){return"LISTING"===(null==e?void 0:e.type)&&e.listingProps?{subtext:"".concat(e.listingProps.listingId," - ").concat(e.listingProps.baseLocation)}:void 0},d=function(e){var i,a,c,d,h,p=function(e,i){var a,l;if("USERHISTORY"===e&&n&&void 0!==o.l10n&&i&&i.searchDetail&&i.searchDetail.lob&&!t){var c="",u=i.searchDetail,d=o.l10n,h=d.formatDateString,p=d.formatText,f=u.roomCount,m=u.lob,g=i.searchDetail.totalTravelerCount?Number(i.searchDetail.totalTravelerCount):null;if(i.searchDetail.startDate&&i.searchDetail.endDate){var v=new Date(u.startDate),y=6e4*v.getTimezoneOffset(),E=h(new Date(v.getTime()+y),{skeleton:"MMMd"}),b=new Date(u.endDate),S=6e4*b.getTimezoneOffset(),T=h(new Date(b.getTime()+S),{skeleton:"MMMd"}),R=p("datePicker.nightSummary",(Number(u.endDate)-Number(u.startDate))/864e5);a="".concat(E," - ").concat(T),l=p("typeahead.recentHistory.aceessibility.dates",E,T),1!==f||"Lodging"!==m&&"Package"!==m?"Lodging"!==m&&"Package"!==m||(r?a="".concat(E," - ").concat(T):(a="".concat(E," - ").concat(T," | ").concat(R),l=l.concat(", ".concat(R)))):(c=s(p,f,g,o.config.excludeRoomsLabelForRecentHistory),r?(a="".concat(E," - ").concat(T," • ").concat(c),l=l.concat(", ".concat(c))):(a="".concat(E," - ").concat(T," | ").concat(R," | ").concat(c),l=l.concat(", ".concat(R,", ").concat(c))))}else i.searchDetail.startDate||i.searchDetail.endDate||1!==f||"Lodging"!==m&&"Package"!==m||(a=s(p,f,g,o.config.excludeRoomsLabelForRecentHistory))}return{subtext:a,a11yLabel:l}}(e.category,e)||u(e),f=p.subtext,m=p.a11yLabel;if(o.config.features.indexOf(O.CONSISTENT_DISPLAY)<0)return{primaryText:(null===(d=e.regionNames)||void 0===d?void 0:d.displayName)||(null===(h=e.names)||void 0===h?void 0:h.displayName)||l(e),subtext:f,a11yLabel:m};var g=(null===(i=e.regionNames)||void 0===i?void 0:i.primaryDisplayName)||(null===(a=e.names)||void 0===a?void 0:a.displayName)||l(e);if(f)return{primaryText:"".concat(g),subtext:f,a11yLabel:m};var v=(null===(c=e.regionNames)||void 0===c?void 0:c.secondaryDisplayName)||u(e)||"";return{primaryText:"".concat(g),subtext:v}},h=function(e,t,n,r,i){if("AIRLINE"===e)return"";if(n&&!r)return"subdirectory_arrow_right";if("USERHISTORY"===i)return"history";if("FLIGHTS"===o.config.lob)return"lob_flights";switch(e){case"HOTEL":return"lob_hotels";case"AIRPORT":return"lob_flights";case"ADDRESS":return"RENTALLOCATION"===t?"lob_cars":"place";case"METROSTATION":case"TRAINSTATION":return"train";default:return"place"}},p=function(e,n,r){var i,a,s,l,u,p,f,m,g,v,y,E,b,S=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("nearby")>-1,T=n.hierarchyInfo&&n.hierarchyInfo.relation&&n.hierarchyInfo.relation.indexOf("child")>-1||S,R=d(n),_=R.primaryText,O=R.subtext,I=R.a11yLabel,C=c(c({data:c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c(c({},n.category?{category:n.category}:{}),!t&&n.searchDetail?{searchDetail:n.searchDetail}:{}),n.userHistoryType?{userHistoryType:n.userHistoryType}:{}),null!==(i=n.ids)&&void 0!==i&&i.id?{id:n.ids.id}:{}),n.coordinates?{location:{lat:n.coordinates.lat,long:n.coordinates.long}}:{}),n.regionId?{regionId:n.regionId}:n.gaiaId?{regionId:n.gaiaId}:{}),n.cityId?{cityId:n.cityId}:{}),n.regionNames?{regionNames:n.regionNames}:{}),n.type?{type:n.type}:{}),n.subtype?{subtype:n.subtype}:{}),n.hotelId?{selected:n.hotelId}:{}),n.hierarchyInfo?{hierarchyInfo:n.hierarchyInfo}:{}),"LISTING"===n.type&&n.listingProps?{listing:n.listingProps}:{}),n.sourceId?{sourceId:n.sourceId}:{}),n.essId?{essId:{sourceId:n.essId.sourceId,sourceName:n.essId.sourceName}}:{}),{dest:o.config.dest}),{index:r+1}),icon:h(n.type||n.domainId,n.subtype,T,S,n.category)},T?{isChild:!0}:{}),{},{imageUrl:n.imageUrl,name:_,subtext:O,a11yLabel:I,title:(null===(a=n.regionNames)||void 0===a?void 0:a.lastSearchName)||(null===(s=n.regionNames)||void 0===s?void 0:s.shortName)||(null===(l=n.regionNames)||void 0===l?void 0:l.fullName)||(null===(u=n.listingProps)||void 0===u?void 0:u.listingId)||(null===(p=n.ids)||void 0===p?void 0:p.id),value:(null===(f=n.regionNames)||void 0===f?void 0:f.lastSearchName)||(null===(m=n.regionNames)||void 0===m?void 0:m.shortName)||(null===(g=n.regionNames)||void 0===g?void 0:g.fullName)||(null===(v=n.listingProps)||void 0===v?void 0:v.listingId)||(null===(y=n.names)||void 0===y?void 0:y.displayName)});(e.push(C),null!=n&&n.filterRefinements&&(null==n||null===(E=n.filterRefinements)||void 0===E?void 0:E.length)>0)&&(null==n||null===(b=n.filterRefinements.find((function(e){var t,n;return"popularFilter"===(null==e||null===(t=e.category)||void 0===t?void 0:t.legacyId)||"popular_group"===(null==e||null===(n=e.category)||void 0===n?void 0:n.externalId)})))||void 0===b||null===(b=b.arrayOfValues)||void 0===b||b.forEach((function(t){e.push(c(c({},C),{},{data:c(c({},C.data),{},{popularFilter:[t]}),subtext:"<strong>".concat(null==t?void 0:t.displayName,"</strong>"),icon:"subdirectory_arrow_right"}))})));return e},f=""===t&&this.shouldShowCurrentLocation()?[this.getCurrentLocationItem()]:[];return(null===(i=e.sr)||void 0===i||null===(a=i.reduce)||void 0===a?void 0:a.call(i,p,f))||f}},{key:"shouldShowCurrentLocation",value:function(){return Boolean(this.config.showCurrentLocation&&"geolocation"in navigator)}},{key:"getCurrentLocationItem",value:function(){var e=this.isGeoLocationAllowed?this.l10n.formatText("typeahead.currentLocation.available.item"):this.l10n.formatText("typeahead.currentLocation.blocked.item");return{data:{category:"CURRENTLOCATION",hierarchyInfo:{relation:["current"]},index:-1,enabled:this.isGeoLocationAllowed,regionNames:{fullName:"CurrentLocation"},type:t.TypeaheadLocationType.CURRENT_LOCATION},icon:"my_location",name:e,title:e,value:e}}},{key:"getBrowser",value:function(e){var t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE":"Chrome"===n[1]&&null!==(t=e.match(/\b(OPR|Edge?)\/(\d+)/))?t.slice(1,-1).join(" ").replace("OPR","Opera").replace("Edg ","Edge "):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n[0])}},{key:"getDevice",value:function(e){return/iPad|Transformer|ME173X|KOOF|Nook|IMM76D|Nexus 10|Nexus 7|Tablet/i.test(e)||/HP Slate|PG09410|PG41200|Mediapad|Kindle|Tab|Xoom|TegraNote|SCH-I800/i.test(e)?"Tablet":/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)?"Mobile":"Desktop"}}])}(),D=function(e,t,n){if(""===n||null===n)return e;var r=/\?/.test(e)?"&":"?",i=encodeURIComponent(t);return void 0!==n&&""!==n&&(i=i.concat("=",encodeURIComponent(n))),e+r+i};t.ESSAdapter=x,t.GOOGLEMAPS_CATEGORY=T,t.GoogleAdapter=R,t.ThirdPartyAdapter=S,t.ThirdPartyAdapterFactory=C,t.appendQueryObject=function(e,t){if(null==t)return e;var n=e;return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n=D(n,e,r))})),n},t.appendQueryParam=D,t.filterTypeaheadResults=function(e,t){switch(e.type){case"categorized":return c(c({},e),{},{items:e.items.map((function(e){return c(c({},e),{},{typeaheadResults:e.typeaheadResults.filter((function(e){return!t.includes(e.value)}))})}))});case"uncategorized":return c(c({},e),{},{items:e.items.filter((function(e){return!t.includes(e.value)}))})}},t.getSelectedResult=function(e,t){switch(e.type){case"categorized":return e.items.reduce((function(e,t){return e.push.apply(e,i(t.typeaheadResults)),e}),[])[t];case"uncategorized":return e.items[t]}},t.getSizeOfTypeaheadResults=function(e){switch(e.type){case"categorized":return e.items.reduce((function(e,t){return e+t.typeaheadResults.length}),0);case"uncategorized":return e.items.length}}},79550:function(e,t,n){n.d(t,{V:function(){return s}});var r=n(38972),i=n(63188),a=n(35608),o=n.n(a);const s=({children:e,className:t,adSlot:n=!1,canvasTheme:a="primary",layout:s="fullwidth",paddedViewRow:l=!0,maxWidth:c=!1})=>{const u=i.classNames.bind(o())("view-row",`view-row-theme-${a}`,`view-row-layout-${s}`,`view-row-padded-${l}`,!c&&`view-row-adslot-${n}`,t);return r.createElement("div",{className:u,"data-testid":"view-row"},e)};s.displayName="ViewRow"},70067:function(e,t,n){n.d(t,{r2:function(){return P}});var r=n(24305),i=n(38972),a=n(16511),o=n(85221),s=n(80454),l=n(63188),c=n(50023),u=n.n(c),d=n(26246),h=n(82825),p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const f=(e,{threshold:t=0,root:n=null,rootMargin:r="0%",freezeOnceVisible:a=!1})=>{const[o,s]=(0,i.useState)(),l=(null==o?void 0:o.isIntersecting)&&a,c=([e])=>{s(e)};return(0,i.useEffect)((()=>{const i=null==e?void 0:e.current;if(!!!window.IntersectionObserver||l||!i)return;const a=new IntersectionObserver(c,{threshold:t,root:n,rootMargin:r});return a.observe(i),()=>a.disconnect()}),[null==e?void 0:e.current,JSON.stringify(t),n,r,l]),o},m=l.classNames.bind(u()),g=e=>{const{children:t,wrapItems:n,ariaHidden:a,ariaLabel:o,stretchToFill:s,isAutoWidth:l,onItemShow:c,onItemFullyShow:u,isFirst:h,isLast:p,edgeItemsPadding:g,isPopoverOpen:v}=e,y=i.useRef(null),E=f(y,{}),b=Boolean(null==E?void 0:E.isIntersecting),S=f(y,{threshold:.99}),T=Boolean(null==S?void 0:S.isIntersecting);i.useEffect((()=>{null==c||c(b)}),[b]),i.useEffect((()=>{null==u||u(T)}),[T]);let R="egds-team-carousel-item";s||(R+=" egds-team-carousel-item-size-auto"),l||(R+=" egds-team-carousel-item-fixed-width"),v&&(R+=" egds-team-carousel-item-popover-sheet-open");const _=t,O=n&&_?_.props.className:"",I=l?!b:a,C=Object.assign(Object.assign({},I&&{"aria-hidden":!0,tabIndex:-1}),{className:m(O?`${O} ${R}`:R),"data-testid":"carousel-item","aria-label":o,ref:y}),x=n?(0,r.jsx)("div",Object.assign(Object.assign({},C),{children:_})):i.cloneElement(_,C);return g&&h?(0,r.jsx)(d.b,{padding:{inlinestart:g},children:x}):g&&p?(0,r.jsx)(d.b,{padding:{inlineend:g},children:x}):x};g.displayName="EGDSTeamCarouselItem",g.defaultProps={wrapItems:!0};const v=l.classNames.bind(u()),y=e=>{const{children:t,size:n,currentIndex:a,itemsVisible:o,carouselListRef:s,onItemShow:l,currentItemsVisibleAuto:c,onScrollEnd:u,isPopoverOpenList:d}=e,h=p(e,["children","size","currentIndex","itemsVisible","carouselListRef","onItemShow","currentItemsVisibleAuto","onScrollEnd","isPopoverOpenList"]),f="auto"===o[n],m=null!=c?c:o[n],y=a,E=a+m;return(0,r.jsx)("div",{className:v("egds-team-carousel-item-container"),ref:s,"data-testid":"carousel-list",children:i.Children.map(t,((e,n)=>{const a=n<y||n>=E,o=0===n,s=n===i.Children.count(t)-1;return(0,r.jsx)(g,Object.assign(Object.assign({ariaHidden:a,isAutoWidth:f,onItemShow:e=>{null==l||l(e,n)},onItemFullyShow:e=>{s&&e&&(null==u||u())},isFirst:o,isLast:s,isPopoverOpen:null==d?void 0:d[n]},h),{children:e}),n)}))})};y.displayName="EGDSTeamCarouselItemList";new Map([["sm","sm"],["md","md"],["lg","lg"],["xl","xl"]]);const E=new Map([["h1","h1"],["h2","h2"],["h3","h3"],["h4","h4"],["h5","h5"],["h6","h6"]]),b=l.classNames.bind(u());var S;!function(e){e.clickLeft="clickLeft",e.clickRight="clickRight",e.scrollLeft="scrollLeft",e.scrollRight="scrollRight"}(S||(S={}));const T=e=>{const{analytics:t,buttonText:n,carouselHeaderLevel:a,carouselHeaderText:o,carouselHeaderVisible:c,carouselName:u,carouselRef:d,children:h,className:p,domRef:f,fullSheetVisible:m,hideNav:g,itemsVisible:v,itemsMaxHeight:T,l10n:R,loop:_,navigationIconId:I,onChange:C,onIndexChange:x,pageBy:D=1,pagingInset:P,pagingOverlay:w,peek:k,shouldSnapOnScroll:A,startIndex:L,stretchToFill:N,wrapItems:j,hideNavOnScrollEnd:M}=e,[F,U]=i.useState(!1),[B,H]=i.useState(0),[$,G]=i.useState(!1),[V,z]=i.useState(!1),[W,Y]=i.useState("sm"),[q,K]=i.useState(!1),Q=i.useRef(!1),Z=i.useRef(!1),X=i.useRef(!1),J=i.useRef(null);let ee=48,te=12;const ne=i.Children.count(h),re=null!=f?f:J,ie=i.useRef(null),ae=i.useRef(null),oe=v[W],se=i.useRef([]),le=i.useRef(0),ce=i.useRef(0),ue=i.useRef(!0),de=()=>{let n=oe;k&&(n+=1);for(let r=0;r<n&&B+r<i.Children.count(h);++r)se.current[B+r]||(se.current[B+r]=!0,"function"==typeof e.itemViewedCallback&&e.itemViewedCallback(B+r),t&&(0,l.analyticsTracker)(t,`${u}.Carousel.itemViewed.${B+r}`,""))},he=i.useCallback((e=>{t&&(0,l.analyticsTracker)(t,`${u}.Carousel.${e?S.scrollRight:S.scrollLeft}`,"")}),[t,u]),pe=()=>{if(ie.current){const e=ie.current,{scrollLeft:t,scrollWidth:n}=e,r=e.getBoundingClientRect().width,i=le.current,a=Math.abs(t),o=ne>1&&a>Math.round(n-r-5)?1:0;return Math.floor(a/i)+o}return 0},fe=e=>{const t=ne-oe,n=(e=>!0===ue.current?e+1:e)(e);return n>t?t:n},me=e=>V?-1*e:e,ge=e=>{let t;if(ie.current){const n=ie.current,r=me(n.scrollLeft),i=e-r,a=o=>{t||(t=o);const{done:s,position:l}=((e,t,n,r)=>{const i=e>=350;var a;return{done:i,position:i?t:n+r*((a=e/350)<.5?2*Math.pow(a,2):1-Math.pow(-2*a+2,2)/2)}})(o-t,e,r,i);n.scrollLeft=me(l),s||window.requestAnimationFrame(a)};X.current?(X.current=!1,n.scrollLeft=me(e),U(!0)):window.requestAnimationFrame(a),he(i>0),ce.current=e}},ve=i.useCallback((0,s.D)(200,(()=>{if(Z.current)return Z.current=!1,!1;if(ie.current){const e=ie.current,t=me(e.scrollLeft);if(Math.abs(t-ce.current)<1||Q.current)return;t>ce.current?ue.current=!0:ue.current=!1;const n=le.current,r=fe(pe()),i=n*r,a=i-t,o=e.scrollWidth-e.clientWidth;if(0===a&&t>0&&t<o)return;if(A){ge(i-(k&&0!==r?(ee+te)/2:0))}else(()=>{if(ie.current){const e=ie.current.scrollLeft,t=e-ce.current>0;he(t),ce.current=e}})();H(r)}})),[W,V]),ye=i.useCallback((e=>{e.key&&(Q.current=!0,Z.current=!1)}),[W,V]);i.useEffect((()=>(document.body.addEventListener("keydown",ye),()=>{document.body.removeEventListener("keydown",ye)})),[ye]);const Ee=()=>{if(ie.current){const e=ie.current.getBoundingClientRect().width,t=k?te+ee:0;le.current=(e-(oe-1)*te-t)/oe+te}},be=()=>{const e=null==ae?void 0:ae.current;if(e){Ee();let t=getComputedStyle(e).getPropertyValue("--size")||"sm";"xl"!==t||v.xl||(t="lg"),Y(t),q||K(!0)}},Se=e=>{const t=D>oe?oe:D;let n=1===e?B+Number(t):B-Number(t);const r=ne-oe;n<0?n=_?ne-1:0:n===r?n=r:n>r&&(n=_?0:r),Q.current=!0,H(n)},Te=()=>{Se(-1)},Re=()=>{Se(1)},_e=e=>{let t;Q.current=!0;const n=ne-oe;t=e<0?0:e>=n?n:e,H(t)};return i.useEffect((()=>{if(F&&(()=>{if(ie.current){const e=ie.current.querySelectorAll('\n          .egds-team-carousel-item:not([aria-hidden="true"]) h1:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h2:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h3:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h4:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h5:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h6:not([aria-hidden="true"])\n        '),t=Array.from(e).map((e=>e.innerText||e.textContent));t.length>0?setTimeout((()=>{(0,l.liveAnnounce)(R.formatText("carousel.cardChange",t.join(", ")),l.Level.POLITE)}),200):setTimeout((()=>{(0,l.liveAnnounce)(R.formatText("gallerycarousel.imageChange",B+1,ne,""),l.Level.POLITE)}),200)}})(),q&&de(),Q.current){Q.current=!1,Z.current=!0;const e=k&&0!==B?(ee+te)/2/B:0;ge(B*(le.current-e))}x&&x(B)}),[B,q]),i.useEffect((()=>{be(),ie.current&&(ie.current.scrollLeft=0),L?(X.current=!0,_e(L)):U(!0),(()=>{const e=re.current;e&&(ee=16*parseInt(getComputedStyle(e).getPropertyValue("--peek-width"),10)||ee,te=16*parseInt(getComputedStyle(e).getPropertyValue("--item-padding"),10)||te)})(),"ontouchstart"in window&&G(!0),"rtl"===document.querySelector("html").getAttribute("dir")&&z(!0),(0,l.liveAnnounce)(""),q&&de()}),[q]),i.useEffect((()=>{let e=window.innerWidth;const t=(0,s.D)(200,(()=>{if(e===window.innerWidth)return;e=window.innerWidth,be();const t=pe();H(t);const n=k&&0!==t?(ee+te)/2/t:0;ge(t*(le.current-n))}));return window.addEventListener("resize",t),Ee(),()=>window.removeEventListener("resize",t)}),[W,B]),i.useEffect((()=>{C&&C(ie),(()=>{if(ie.current){const e=ie.current.querySelectorAll(".egds-team-carousel-item");Array.from(e).forEach((e=>{const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');Array.from(t).filter((e=>!e.hasAttribute("aria-hidden"))).forEach((t=>t[e.hasAttribute("aria-hidden")?"setAttribute":"removeAttribute"]("tabindex","-1")))}))}})()})),i.useImperativeHandle(d,(()=>({changeIndex:e=>_e(e)}))),(()=>{const e={};e["--carousel-item-count"]=v[W],e["--carousel-item-count-sm"]=v.sm,e["--carousel-item-count-md"]=v.md,e["--carousel-item-count-lg"]=v.lg,e["--carousel-item-count-xl"]=v.xl?v.xl:v.lg;const i=b("egds-team-carousel",(!k||!(oe<ne))&&"no-peek",!P&&"no-inset",!$&&"no-touch",T&&"items-max-height",p,{[W]:!!W&&!0}),s={analytics:t,buttonText:n,carouselName:u,currentIndex:B,itemCount:ne,itemsVisible:v,fullSheetVisible:m,loop:_,navigationIconId:I,onNextCb:Re,onPrevCb:Te,pagingOverlay:w,size:W,isRtl:V,hideNavOnScrollEnd:M},l=a&&E.get(a)||E.get("h3");return(0,r.jsxs)("div",{className:i,ref:re,"data-testid":"carousel-wrapper",children:[o&&(0,r.jsx)(l,{className:b({"is-visually-hidden":!c}),children:o}),(0,r.jsx)("div",{className:b("egds-team-carousel-container"),"aria-label":o,ref:ie,onScroll:ve,"data-testid":"carousel-container",style:e,tabIndex:0,children:(0,r.jsx)(y,{itemsVisible:v,size:W,currentIndex:B,peek:k,wrapItems:j,stretchToFill:N,carouselListRef:ae,children:h})}),!g&&(0,r.jsx)(O,Object.assign({},s))]})})()},R=e=>{const t=(0,o.useLocalization)();return(0,r.jsx)(T,Object.assign({l10n:t},e))};R.displayName="EGDSTeamCarouselFixedWidth",R.defaultProps={hideNav:!1,itemsMaxHeight:!1,navigationIconId:{next:"next-button",prev:"prev-button"},pagingInset:!1,pagingOverlay:!1,shouldSnapOnScroll:!1,startIndex:0,stretchToFill:!0,wrapItems:!0,hideNavOnScrollEnd:!1};const _=l.classNames.bind(u()),O=e=>{const{analytics:t,buttonText:n,carouselName:a,currentIndex:o,currentLastIndex:l,itemCount:c,itemsVisible:u,fullSheetVisible:d,loop:p,navigationIconId:f,onNextCb:m,onPrevCb:g,pagingOverlay:v,size:y,isRtl:E,hideNavOnScrollEnd:b,currentItemsVisibleAuto:T,isVisible:R}=e,O=null!=T?T:u[y],I=i.useRef(null),C=i.useRef(null),x="ontouchstart"in window?50:0,D=t&&Object.assign({localAnalyticsId:`${a}.Carousel.${S.clickLeft}`},t),P=t&&Object.assign({localAnalyticsId:`${a}.Carousel.${S.clickRight}`},t),w=e=>{(null==e?void 0:e.current)&&e.current.focus()},k=(0,s.D)(x,(()=>{null==g||g(),O>0&&1===o&&w(C)})),A=(0,s.D)(x,(()=>{null==m||m(),O>0&&o===c-O-1&&w(I)})),L=i.useCallback((e=>{E?"ArrowLeft"===e.key?A():"ArrowRight"===e.key&&k():"ArrowLeft"===e.key?k():"ArrowRight"===e.key&&A()}),[E,A,k]);if(i.useEffect((()=>{if(d)return document.body.addEventListener("keydown",L),()=>{document.body.removeEventListener("keydown",L)}}),[d,L]),c<=O)return null;const N=!p&&0===o,j=!p&&o===c-O||l===c-1,M=!1===R||b&&N,F=!1===R||b&&j,U=_("egds-team-carousel-button-paging","egds-team-carousel-button-prev",M&&"egds-team-carousel-button-hidden"),B=_("egds-team-carousel-button-paging","egds-team-carousel-button-next",F&&"egds-team-carousel-button-hidden");return(0,r.jsxs)("div",{className:_("egds-team-carousel-controls"),children:[(0,r.jsx)(h.b,{analytics:D,className:U,iconId:null==f?void 0:f.prev,iconTitle:n.prevButton,onClick:k,domRef:C,"data-testid":"carousel-nav-prev","aria-disabled":N||M,"aria-label":n.prevButton,tabIndex:N||M?-1:0,pagingOverlay:v}),(0,r.jsx)(h.a,{analytics:P,className:B,iconId:null==f?void 0:f.next,iconTitle:n.nextButton,onClick:A,domRef:I,"data-testid":"carousel-nav-next","aria-disabled":j||F,"aria-label":n.nextButton,tabIndex:j||F?-1:0,pagingOverlay:v})]})};O.displayName="EGDSTeamCarouselNav";const I=l.classNames.bind(u());var C;!function(e){e.clickLeft="clickLeft",e.clickRight="clickRight",e.scrollLeft="scrollLeft",e.scrollRight="scrollRight"}(C||(C={}));const x=e=>{var t;const{buttonText:n,carouselHeaderLevel:a,carouselHeaderText:o,carouselHeaderVisible:c,carouselName:u,children:d,className:h,domRef:p,fullSheetVisible:f,hideNav:m,itemsVisible:g,itemsMaxHeight:v,l10n:b,navigationIconId:S,onChange:T,onIndexChange:R,pagingInset:_,pagingOverlay:x,startIndex:D,stretchToFill:P,wrapItems:w,hideNavOnScrollEnd:k,itemViewedCallback:A,onNextButtonClick:L,onPrevButtonClick:N,onScrollEnd:j,edgeItemsPadding:M,isPopoverOpenList:F}=e,[U,B]=i.useState(!1),[H,$]=i.useState(!1),[G,V]=i.useState(!1),[z,W]=i.useState("sm"),[Y,q]=i.useState(!1),[K,Q]=i.useState([]),[Z,X]=i.useState(0),[J,ee]=i.useState(!1),[te,ne]=i.useState(0),re=i.useRef(!0),ie=i.useRef(!1),ae=i.useRef(!1),oe=i.useRef(!1),se=i.useRef(null);let le=48,ce=8;const ue=i.Children.count(d),de=null!=p?p:se,he=i.useRef(null),pe=i.useRef(null),fe=K.reduce(((e,t)=>t?e+1:e),0),me=null!==(t=null==F?void 0:F.some(Boolean))&&void 0!==t&&t,ge=i.useRef([]),ve=i.useRef(0),ye=i.useRef(!0),Ee=i.useRef(0),be=i.useRef(0),Se=i.useRef(0),Te=i.useRef(0),Re=i.useRef(!1),_e=(e,t)=>{const n=[...K];n[t]=e,re.current&&(Ee.current=G?n.lastIndexOf(!0):n.indexOf(!0),be.current=G?n.indexOf(!0):n.lastIndexOf(!0)),Q(n),e&&!ge.current[t]&&(ge.current[t]=!0,null==A||A(t))},Oe=()=>{Re.current||(clearTimeout(Te.current),ee(!0),Te.current=window.setTimeout((()=>ee(!1)),2e3))},Ie=e=>G?-1*e:e,Ce=e=>{if(!he.current)return;let t;re.current=!1;const n=he.current,r=Ie(n.scrollLeft),i=e-r,a=o=>{t||(t=o);const{done:s,position:l}=((e,t,n,r)=>{const i=e>=350;var a;return{done:i,position:i?t:n+r*((a=e/350)<.5?2*Math.pow(a,2):1-Math.pow(-2*a+2,2)/2)}})(o-t,e,r,i);n.scrollLeft=Ie(l),s?X(o):Se.current=window.requestAnimationFrame(a)};oe.current?(oe.current=!1,n.scrollLeft=Ie(e),B(!0)):(window.cancelAnimationFrame(Se.current),Se.current=window.requestAnimationFrame(a))},xe=i.useCallback((e=>{e.key&&(ie.current=!0,ae.current=!1)}),[]);i.useEffect((()=>(document.body.addEventListener("keydown",xe),()=>{document.body.removeEventListener("keydown",xe)})),[xe]);const De=()=>{const e=null==pe?void 0:pe.current;if(e){let t=getComputedStyle(e).getPropertyValue("--size")||"sm";"xl"!==t||g.xl||(t="lg"),W(t),Y||q(!0)}},Pe=(e,t)=>{if(!he.current||!pe.current)return;const n=[...pe.current.children],{left:r,right:i}=n[e].getBoundingClientRect(),{width:a}=he.current.getBoundingClientRect(),{left:o,right:s}=n[0].getBoundingClientRect();let l=0;G?e===ue-1?l=s-r-a:t===C.scrollRight&&e>0?l=Math.ceil(s-(r+i)/2):t===C.scrollLeft&&(l=Math.floor(s-a-(r+i)/2)):e===ue-1?l=i-o-a:t===C.scrollRight?l=Math.ceil((r+i)/2-a-o):t===C.scrollLeft&&e>0&&(l=Math.floor((r+i)/2-o)),ie.current=!0,Ce(l)};i.useEffect((()=>{re.current=!0,_e(!0,G?ye.current?Ee.current:be.current:ye.current?be.current:Ee.current)}),[Z]),i.useEffect((()=>{U&&(()=>{if(he.current){const e=he.current.querySelectorAll('\n          .egds-team-carousel-item:not([aria-hidden="true"]) h1:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h2:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h3:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h4:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h5:not([aria-hidden="true"]),\n          .egds-team-carousel-item:not([aria-hidden="true"]) h6:not([aria-hidden="true"])\n        '),t=Array.from(e).map((e=>e.innerText||e.textContent));t.length>0?setTimeout((()=>{(0,l.liveAnnounce)(b.formatText("carousel.cardChange",t.join(", ")),l.Level.POLITE)}),200):setTimeout((()=>{(0,l.liveAnnounce)(b.formatText("gallerycarousel.imageChange",Ee.current+1,ue,""),l.Level.POLITE)}),200)}})(),null==R||R(Ee.current)}),[Y]),i.useEffect((()=>{De(),he.current&&(he.current.scrollLeft=0),D?oe.current=!0:B(!0),(()=>{const e=de.current;e&&(le=16*parseInt(getComputedStyle(e).getPropertyValue("--peek-width"),10)||le,ce=16*parseInt(getComputedStyle(e).getPropertyValue("--item-padding"),10)||ce)})(),"ontouchstart"in window&&$(!0),"rtl"===document.querySelector("html").getAttribute("dir")&&V(!0),(0,l.liveAnnounce)("")}),[Y]),i.useEffect((()=>{let e=window.innerWidth;const t=(0,s.D)(200,(()=>{e!==window.innerWidth&&(e=window.innerWidth,De())}));return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[z]),i.useEffect((()=>{null==T||T(he),(()=>{if(he.current){const e=he.current.querySelectorAll(".egds-team-carousel-item");Array.from(e).forEach((e=>{const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');Array.from(t).filter((e=>!e.hasAttribute("aria-hidden"))).forEach((t=>t[e.hasAttribute("aria-hidden")?"setAttribute":"removeAttribute"]("tabindex","-1")))}))}})()})),i.useEffect((()=>{ne(me?-ve.current:0)}),[me]);const we={marginInlineStart:te};we["--carousel-item-count"]=g[z],we["--carousel-item-count-sm"]=g.sm,we["--carousel-item-count-md"]=g.md,we["--carousel-item-count-lg"]=g.lg,we["--carousel-item-count-xl"]=g.xl?g.xl:g.lg;const ke=I("egds-team-carousel","no-peek",!_&&"no-inset",!H&&"no-touch",v&&"items-max-height",h,{[z]:!!z&&!0},me&&"popover-sheet-open"),Ae={buttonText:n,carouselName:u,currentIndex:G?be.current:Ee.current,currentLastIndex:G?Ee.current:be.current,itemCount:ue,itemsVisible:g,fullSheetVisible:f,navigationIconId:S,onNextCb:()=>{null==L||L(),G?(Ee.current=Math.min(Ee.current+1,ue-1),Pe(Ee.current,C.scrollLeft)):(be.current=Math.min(be.current+1,ue-1),Pe(be.current,C.scrollRight))},onPrevCb:()=>{null==N||N(),G?(be.current=Math.max(be.current-1,0),Pe(be.current,C.scrollRight)):(Ee.current=Math.max(Ee.current-1,0),Pe(Ee.current,C.scrollLeft))},pagingOverlay:x,size:z,isRtl:G,hideNavOnScrollEnd:k,currentItemsVisibleAuto:fe,isVisible:J},Le=a&&E.get(a)||E.get("h3");return(0,r.jsxs)("div",{className:ke,ref:de,"data-testid":"carousel-wrapper",children:[o&&(0,r.jsx)(Le,{className:I({"is-visually-hidden":!c}),children:o}),(0,r.jsx)("div",{className:I(""+(me?"":"egds-team-carousel-container")),"aria-label":o,ref:he,onScroll:()=>{if(!he.current)return;const e=Ie(he.current.scrollLeft);e>ve.current?ye.current=!0:ye.current=!1,ve.current=e,Oe()},"data-testid":"carousel-container",style:we,onClick:Oe,onKeyDown:Oe,onMouseEnter:()=>{"sm"!==z&&(Re.current=!0,clearTimeout(Te.current),ee(!0))},onMouseLeave:()=>{"sm"!==z&&(Re.current=!1,Te.current=window.setTimeout((()=>ee(!1)),2e3))},children:(0,r.jsx)(y,{itemsVisible:g,size:z,currentIndex:G?be.current:Ee.current,wrapItems:w,stretchToFill:P,carouselListRef:pe,onItemShow:_e,currentItemsVisibleAuto:fe,onScrollEnd:j,edgeItemsPadding:M,isPopoverOpenList:F,children:d})}),!m&&(0,r.jsx)(O,Object.assign({},Ae))]})},D=e=>{const t=(0,o.useLocalization)();return(0,r.jsx)(x,Object.assign({l10n:t},e))};D.displayName="EGDSTeamCarouselAutoWidth",D.defaultProps={hideNav:!1,itemsMaxHeight:!1,navigationIconId:{next:"next-button",prev:"prev-button"},pagingInset:!1,pagingOverlay:!1,startIndex:0,stretchToFill:!0,wrapItems:!0,hideNavOnScrollEnd:!1};const P=e=>{const{itemsVisible:t,children:n}=e,o=p(e,["itemsVisible","children"]),s=i.Children.map(n,(e=>(e=>""===a.renderToStaticMarkup(e))(e)?null:e));return"auto"===t.sm&&"auto"===t.md&&"auto"===t.lg&&"auto"===t.xl?(0,r.jsx)(D,Object.assign(Object.assign({},o),{itemsVisible:t,children:s})):"auto"===t.sm||"auto"===t.md||"auto"===t.lg||"auto"===t.xl?null:(0,r.jsx)(R,Object.assign(Object.assign({},o),{itemsVisible:t,children:s}))};P.displayName="CarouselInnerSpacingAndOverflow",P.defaultProps={hideNav:!1,itemsMaxHeight:!1,navigationIconId:{next:"next-button",prev:"prev-button"},pagingInset:!1,pagingOverlay:!1,shouldSnapOnScroll:!1,startIndex:0,stretchToFill:!0,wrapItems:!0,hideNavOnScrollEnd:!1};l.classNames.bind(u())},84791:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ClientMetricsLogger=void 0;var i=n(7892),a=n(18898),o=n(83703),s=function(){function e(t){this.clientLogger=t,e.pm&&e.im||this.initMetrics()}return e.prototype.initLogger=function(t){var n=t.client,r=t.lob,i=t.locale,a=t.siteId,o=t.personalize,s=t.inputId,l=t.getDevice,c=t.variants;e.metadata={client:n,lob:r,locale:i,siteId:a,personalize:o,inputId:s,getDevice:l,variants:c}},e.prototype.logTypeaheadOpen=function(t){e.im.logTypeaheadOpen(t)},e.prototype.logTypeaheadRequest=function(t){e.im.logTypeaheadRequest(t),e.pm.logTypeaheadRequest(t)},e.prototype.logResponse=function(t){e.pm.logResponse(t)},e.prototype.logTypeaheadResponse=function(t){e.pm.logTypeaheadResponse(t)},e.prototype.logSuggestionShown=function(t){e.pm.logSuggestionShown(t.q),e.im.logSuggestionShown(t)},e.prototype.logSuggestionSelected=function(t,n){e.im.logTypeaheadSelection(t),e.im.logTypeaheadEventMessage(n)},e.prototype.logError=function(t,n){e.pm.logError(t,n)},e.prototype.logTypeaheadClientMetrics=function(){if(this.clientLogger&&"function"==typeof this.clientLogger.getLoggerWithIdentifier){var t=this.clientLogger.getLoggerWithIdentifier("uitk-react-typeahead");t&&"function"==typeof t.logEvent&&t.logEvent(new o.SystemEvent(o.SystemEventLevel.INFO,"TypeaheadInteraction"),r(r({},e.im.getMetrics(e.metadata)),e.pm.getMetrics()))}this.initMetrics()},e.prototype.initMetrics=function(){e.im=new i.InteractionMetrics,e.pm=new a.PerformanceMetrics},e}();t.ClientMetricsLogger=s},26796:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EssClientLogger=void 0;var r=n(84791),i=n(5555),a=n(75791),o=n(58361),s=function(){function e(e,t,n,s){try{i.Experiments.init(s),o.Utils.init(t),this.tel=new a.TypeaheadEventLogger(e,n),this.cml=new r.ClientMetricsLogger(t)}catch(l){o.Utils.logError(l)}}return e.prototype.initLogger=function(e){this.metadata=e},e.prototype.logTypeaheadOpen=function(e){var t,n,r,i;try{null===(t=this.tel)||void 0===t||t.initLogger(this.metadata),null===(n=this.cml)||void 0===n||n.initLogger(this.metadata),null===(r=this.tel)||void 0===r||r.logTypeaheadOpen(e),null===(i=this.cml)||void 0===i||i.logTypeaheadOpen(e)}catch(a){o.Utils.logError(a)}},e.prototype.logTypeaheadRequest=function(e){var t,n;try{null===(t=this.tel)||void 0===t||t.logTypeaheadRequest(e),null===(n=this.cml)||void 0===n||n.logTypeaheadRequest(e)}catch(r){o.Utils.logError(r)}},e.prototype.logTypeaheadResponse=function(e){var t;try{this.prevResponse=this.response,this.response=e,null===(t=this.cml)||void 0===t||t.logTypeaheadResponse(e)}catch(n){o.Utils.logError(n)}},e.prototype.logSuggestionShown=function(e){var t,n,r,i;try{this.shownResponse=e===(null===(t=this.response)||void 0===t?void 0:t.q)?this.response:e===(null===(n=this.prevResponse)||void 0===n?void 0:n.q)?this.prevResponse:void 0,this.shownResponse&&(null===(r=this.tel)||void 0===r||r.logTypeaheadResponse(this.shownResponse),null===(i=this.cml)||void 0===i||i.logSuggestionShown(this.shownResponse))}catch(a){o.Utils.logError(a)}},e.prototype.logSuggestionSelected=function(e){var t,n,r;try{if(this.shownResponse&&e){"CATEGORIZED"===e.displayType&&(e.index+=1);var i=null===(t=this.tel)||void 0===t?void 0:t.logSuggestionSelected(e);null===(n=this.cml)||void 0===n||n.logSuggestionSelected(e,i),this.resetResponse()}e||null===(r=this.tel)||void 0===r||r.isResolveNoSuggestionSelected(!0)}catch(a){o.Utils.logError(a)}},e.prototype.logResponse=function(e){var t,n;try{e.ok||null===(t=this.cml)||void 0===t||t.logError(e.status,e.statusText),null===(n=this.cml)||void 0===n||n.logResponse(e)}catch(r){o.Utils.logError(r)}},e.prototype.logTypeaheadBlurEvent=function(){var e,t;try{null===(e=this.tel)||void 0===e||e.logTypeaheadBlurEvent(),null===(t=this.cml)||void 0===t||t.logTypeaheadClientMetrics(),this.resetResponse()}catch(n){o.Utils.logError(n)}},e.prototype.logWizardSubmitEvent=function(){var e;try{null===(e=this.tel)||void 0===e||e.logWizardSubmitEvent()}catch(t){o.Utils.logError(t)}},e.prototype.resetResponse=function(){this.prevResponse=this.response=this.shownResponse=void 0},e}();t.EssClientLogger=s},5555:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Experiments=t.Experiment=void 0,function(e){e[e.EGTA_BEX_ML_V0=36094]="EGTA_BEX_ML_V0",e[e.EGTA_uTA_Demo=32216]="EGTA_uTA_Demo",e[e.ESS_Two_Line_Display=33686]="ESS_Two_Line_Display",e[e.PWA_ESS_Feedback_Loop_Enable=31052]="PWA_ESS_Feedback_Loop_Enable",e[e.EGTA_Rollout_Feature_Gate_for_Hotel_Property_Name_Filter=37339]="EGTA_Rollout_Feature_Gate_for_Hotel_Property_Name_Filter",e[e.BEX_Driveable_destination_Web=41955]="BEX_Driveable_destination_Web"}(n=t.Experiment||(t.Experiment={}));var r=function(){function e(){}return e.init=function(e){var t=this;e&&Object.keys(n).forEach((function(r){var i,a=e[r];if("number"==typeof a?i=a:a&&"number"==typeof a.bucket&&(i=a.bucket),void 0!==i){var o=n[r];t.experimentMap[o]={id:o,name:r,bucket:i}}}))},e.isBucketed=function(e,t){return void 0===t&&(t=1),e in this.experimentMap&&t===this.experimentMap[e].bucket},e.getClientVariants=function(){var e=this,t=[];return Object.keys(this.experimentMap).forEach((function(n){t.push(n+"."+e.experimentMap[n].bucket)})),t.join("|")},e.experimentMap={},e}();t.Experiments=r},7892:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractionMetrics=void 0;var i=n(5555),a=function(){function e(){this.query="",this.response=void 0,this.mostRecentSelectedSuggestion=void 0}return e.getSuggestionTypes=function(e){if(e&&e.length>0)return e.map((function(e){return"GOOGLEMAPS"===e.category?"GPA":e.type})).join(",")},e.getSuggestionIds=function(e){if(e&&e.length>0)return e.map((function(e){return"GOOGLEMAPS"===e.category?e.sourceName+":"+e.sourceId:e.essId?e.essId.sourceName+":"+e.essId.sourceId:"-:-"})).join(",")},e.prototype.logTypeaheadOpen=function(e){this.interactionStart=Date.now(),this.prefill=e},e.prototype.logTypeaheadRequest=function(e){this.query=e||"",this.mostRecentSelectedSuggestion=void 0,this.response=void 0},e.prototype.logSuggestionShown=function(e){this.response=e},e.prototype.logTypeaheadSelection=function(e){this.mostRecentSelectedSuggestion=this.response.sr[e.index-1]},e.prototype.logTypeaheadEventMessage=function(e){this.selectionTypeaheadEventMessage=e},e.prototype.getMetrics=function(t){var n=this.query===this.prefill?"":this.query,a=this.response&&this.response.sr&&this.response.sr.length>0&&"GOOGLEMAPS"===this.response.sr[0].category,o=t.getDevice&&"function"==typeof t.getDevice?t.getDevice(window.navigator.useragent):void 0;return r({contentFlavor:"uitk",deviceType:o,inputLength:n?n.length:0,interactionTime:this.interactionStart?Date.now()-this.interactionStart:void 0,isAddrAutocomplete:a,lob:t.lob,locale:t.locale,pageId:t.client,pointOfSale:window.location.hostname,selectionDepth:this.getSelectionDepth(),siteId:t.siteId+"",suggestionIds:this.response&&e.getSuggestionIds(this.response.sr),suggestionSelected:!!this.mostRecentSelectedSuggestion,suggestionShown:!!(this.response&&this.response.sr&&this.response.sr.length>0),suggestionTypes:this.response&&e.getSuggestionTypes(this.response.sr),textInputElementId:t.inputId,timestamp:Date.now(),type:"TypeaheadInteraction",userAgent:window.navigator.userAgent,userTypedQuery:n,variants:[this.response&&this.response.activeABTests,i.Experiments.getClientVariants()].filter(Boolean).join("|"),zeroResults:this.response&&this.response.sr&&0===this.response.sr.length},this.selectionTypeaheadEventMessage)},e.prototype.getSelectionDepth=function(){return this.mostRecentSelectedSuggestion&&void 0!==this.mostRecentSelectedSuggestion.index?(parseInt(this.mostRecentSelectedSuggestion.index,10)+1).toString():"undefined"},e}();t.InteractionMetrics=a},18898:function(e,t){var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceMetrics=void 0;var r=function(){function e(){this.entries=[],this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING=10,this.essErrorCount=0,this.TRIGGER_TYPE_FOCUS="focus",this.TRIGGER_TYPE_INPUT="input",this.errorCodes=[],this.proxyRegion=""}return e.isStatusCodeInRange=function(e,t,n){return!isNaN(e)&&(t<=e&&e<=n)},e.prototype.logTypeaheadRequest=function(e){var t=0===e.trim().length?this.TRIGGER_TYPE_FOCUS:this.TRIGGER_TYPE_INPUT,n={query:e,timestamp:Date.now(),triggerType:t};this.entries.push({request:n,responseShown:!1})},e.prototype.logResponse=function(e){var t;this.proxyRegion=(null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t.get("x-proxy-region"))||""},e.prototype.logTypeaheadResponse=function(e){if(e){var t=e.q,n=e.sr?e.sr.length:0,r=this.getRequestMetricEntry(t);if(r){var i=Date.now();r.response={latency:i-r.request.timestamp,query:t,suggestionCount:n,timestamp:i}}}},e.prototype.logSuggestionShown=function(e){var t=this.getResponseMetricEntry(e);t&&(t.responseShown=!0)},e.prototype.logError=function(t,n){e.isStatusCodeInRange(t,200,299)||this.essErrorCount++,this.errorCodes.push(t)},e.prototype.getMetrics=function(){var e;if(this.entries.length){for(var t={},n=this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING<this.entries.length?this.MAX_TRIGGER_COUNT_FOR_AGGREGATED_LOGGING:this.entries.length,r=0;r<n;r++){var i=this.entries[r];i.response&&(t["latency"+r]=i.response.latency,0===r&&(t.query0=i.response.query))}t.latencyMedian=this.getMedianLatency();var a=this.getWorstLatencyMetric();t.queryWorst=a?a.response&&a.response.query:void 0,t.latencyWorst=a?a.response&&a.response.latency:void 0;var o=this.entries[this.entries.length-1];return t.queryLast=o.request.query,t.latencyLast=o.response?o.response.latency:void 0,t.totalTriggers=this.entries.length,t.totalSuccess=this.getSuccessMetrics().length,t.totalOnePlusCharTypeaheadShown=this.entries.filter((function(e){return e.request.query&&e.responseShown})).length,t.onFocusTypeaheadShown=(null===(e=this.getResponseMetricEntry(""))||void 0===e?void 0:e.responseShown)||!1,this.essErrorCount>0&&(t.essErrorCount=this.essErrorCount),this.errorCodes.length>0&&(t.error=this.errorCodes.join(",")),t.proxyRegion=this.proxyRegion,t}},e.prototype.getRequestMetricEntry=function(e){var t,r;try{for(var i=n(this.entries),a=i.next();!a.done;a=i.next()){var o=a.value;if(o.request.query===e&&!o.response)return o}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.getResponseMetricEntry=function(e){var t,r;try{for(var i=n(this.entries),a=i.next();!a.done;a=i.next()){var o=a.value;if(o.request.query===e&&o.response)return o}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.getWorstLatencyMetric=function(){var e,t,r;try{for(var i=n(this.entries),a=i.next();!a.done;a=i.next()){var o=a.value;o.response&&(!r||r.response&&r.response.latency<o.response.latency)&&(r=o)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},e.prototype.latencySortFunction=function(e,t){return e.response&&t.response?e.response.latency-t.response.latency:e.response?-1:t.response?1:0},e.prototype.getMedianLatency=function(){var e,t=this.getSuccessMetrics();if(t.sort(this.latencySortFunction),t.length){var n=Math.floor(t.length/2),r=t[n].response.latency;if(t.length%2)e=r;else e=(t[n-1].response.latency+r)/2}return e},e.prototype.getSuccessMetrics=function(){return this.entries.filter((function(e){return e.response}))},e}();t.PerformanceMetrics=r},3468:function(e,t){var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendationEvent=void 0,function(e){e.CLICK="recommendation_module.selected",e.SEEN="recommendation_module.presented"}(n||(n={})),function(e){e.SEEN="Impression",e.CLICK="Interaction"}(r||(r={}));var i="destination-typeahead-input",a="allRecommendations",o={ALTERNATE:"People also searched",POPULAR:"Popular destinations"},s=["POPULAR","ALTERNATE"],l=function(){function e(){}return e.getRecommendationSeenMessage=function(e,t){if(e&&e.sr&&e.sr.length>0){var o=e.sr.filter((function(e){return s.includes(e.category)}));if(o&&o.length>0){var l={eventType:r.SEEN,eventName:n.SEEN,egRecommendationResponseId:this.getEgRecommendationResponseId(e.recId),recommendationTitle:this.getRecommendationTitle(o[0].category),component:i,componentElement:t,recommendations:this.getRecommendations(o)};return{schemaName:a,messageContent:l}}}},e.getRecommendationClickedMessage=function(e,t,o){var l,c;if(e&&s.includes(e.category)){var u=e.index;if(t&&t.sr&&t.sr.length>0)for(var d=t.sr.filter((function(t){return t.category===e.category})),h=0;h<d.length;h++)if((null===(l=d[h].essId)||void 0===l?void 0:l.sourceId)===(null===(c=e.essId)||void 0===c?void 0:c.sourceId)){u=h;break}var p={eventType:r.CLICK,eventName:n.CLICK,egRecommendationResponseId:this.getEgRecommendationResponseId(),recommendationTitle:this.getRecommendationTitle(e.category),component:i,componentElement:o,recommendations:this.getSelectedRecommendations(e,u)};return{schemaName:a,messageContent:p}}},e.getEgRecommendationResponseId=function(e){return e&&(this.egRecommendationResponseId=e),this.egRecommendationResponseId},e.getRecommendationTitle=function(e){return this.recommendationTitle||(this.recommendationTitle=o[e]),this.recommendationTitle},e.getRecommendations=function(e){var t=this,n=[],r=0;return e&&e.length>0&&(e.forEach((function(e){n.push(t.getRecommendation(e,r)),r++})),n.push()),n},e.getSelectedRecommendations=function(e,t){var n=[];return e&&n.push(this.getRecommendation(e,t)),n},e.getRecommendation=function(e,t){var n;return{recommendationId:null===(n=e.essId)||void 0===n?void 0:n.sourceId,rank:t,presentationDetails:{name:e.regionNames.primaryDisplayName}}},e}();t.RecommendationEvent=l},83703:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SystemEvent=t.SystemEventLevel=void 0,function(e){e.CRITICAL="CRITICAL",e.ERROR="ERROR",e.WARN="WARN",e.INFO="INFO",e.UNKNOWN="UNKNOWN"}(t.SystemEventLevel||(t.SystemEventLevel={}));var n=function(){function e(e,t){this.level=e,this.name=t}return e.prototype.toString=function(){return"SystemEvent(level="+this.level.toString()+" name="+this.name+")"},e}();t.SystemEvent=n},28961:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TypeaheadEvent=t.EventName=void 0;var r,i,a,o,s,l=n(58361);!function(e){e.FOCUS="typeaheadFocused",e.BLUR="typeaheadBlurred",e.SELECT="typeaheadSuggestionSelected",e.CURRENT_LOCATION="currentLocation"}(r=t.EventName||(t.EventName={})),function(e){e.TYPEAHEAD_INTERACTION="typeaheadInteraction"}(i||(i={})),function(e){e.O="Origin",e.D="Destination",e.U="UNKNOWN"}(a||(a={})),function(e){e.GAIA="GAIA",e.LCM="LCM",e.GOOGLE="GOOGLE",e.UNKNOWN="UNKNOWN"}(o||(o={})),function(e){e.ALTERNATE="Alternate",e.CURRENT_LOCATION="CurrentLocation",e.POPULAR="Popular",e.GOOGLE="Google",e.NORMAL="Normal",e.RECENT_HISTORY="RecentHistory"}(s||(s={}));var c=function(){function e(e,t){var n,a,o=r.CURRENT_LOCATION===e;if(o&&(e=r.SELECT),this.typeaheadEvent={event:{name:e,type:i.TYPEAHEAD_INTERACTION},numberOfBackspaces:t.noOfBackspaces,page:{actionLocation:t.fieldName,lineOfBusiness:t.metadata.lob+this.getSublob(t.metadata.lob,t.metadata.subLob),pageName:this.getPageName(t.metadata.client||"",t.href)},searchField:this.getSearchField(t.fieldName),searchFieldContent:r.FOCUS===e?(null===(n=t.input)||void 0===n?void 0:n.value)||"":t.query===t.prefill?"":t.query||"",timestamps:{receivedAt:Date.now()}},r.FOCUS===e&&(t.isResolve=!1,t.focusTime=(new Date).toString()),[r.SELECT,r.BLUR].indexOf(e)>-1){if(t.response&&this.setSuggestionShownFields(t.response),t.selected&&(r.BLUR===e&&(this.typeaheadEvent.typeaheadSelection=!0,this.typeaheadEvent.charactersTyped=this.typeaheadEvent.searchFieldContent.length,this.calculateTimeSpendOnTypeaheadInput(t)),this.setSuggestionSelectedFields(t.selected)),void 0===t.selected&&r.BLUR===e){this.calculateTimeSpendOnTypeaheadInput(t),this.typeaheadEvent.typeaheadSelection=!1,this.typeaheadEvent.charactersTyped=this.typeaheadEvent.searchFieldContent.length;var s=null===(a=document.getElementsByName("regionId"))||void 0===a?void 0:a.item(0),l=(null==s?void 0:s.value)||"UNKNOWN";this.typeaheadEvent.searchDestination={id:t.isResolve?"UNKNOWN":l,sourceSystem:"UNKNOWN",fullName:t.isResolve?t.query:t.prefill||""}}o&&this.setCurrentLocationSelectedFields()}}return e.prototype.getTypeaheadEventMessage=function(){return{messageContent:this.typeaheadEvent,schemaName:"typeahead"}},e.prototype.getFlattenedJsonMessage=function(){var e,t,n;return{"ta.page.actionLocation":this.typeaheadEvent.page.actionLocation,"ta.page.lob":this.typeaheadEvent.page.lineOfBusiness,"ta.page.name":this.typeaheadEvent.page.pageName,"ta.searchField":this.typeaheadEvent.searchField,"ta.searchFieldContent":this.typeaheadEvent.searchFieldContent,"ta.timestamps.receivedAt":this.typeaheadEvent.timestamps.receivedAt,"ta.noOfSuggestions":this.typeaheadEvent.noOfSuggestions,"ta.requestId":this.typeaheadEvent.serviceRequestLogId,"ta.suggestionType":this.typeaheadEvent.suggestionType,"ta.searchDestination":(null===(e=this.typeaheadEvent.searchDestination)||void 0===e?void 0:e.sourceSystem)+":"+(null===(t=this.typeaheadEvent.searchDestination)||void 0===t?void 0:t.id),"ta.selectionDepth":this.typeaheadEvent.selectionDepth,"ta.suggestionList":null===(n=this.typeaheadEvent.suggestionList)||void 0===n?void 0:n.map((function(e){return e.sourceSystem+":"+e.id})).join(",")}},e.prototype.setSuggestionShownFields=function(e){this.typeaheadEvent.noOfSuggestions=e.sr.length,this.typeaheadEvent.serviceRequestLogId=e.rid,e.sr&&e.sr.length&&(this.typeaheadEvent.suggestionType=this.getSuggestionType(e.sr[0].category),this.typeaheadEvent.suggestionList=this.getSuggestionList(e.sr))},e.prototype.setSuggestionSelectedFields=function(e){this.typeaheadEvent.suggestionType=this.getSuggestionType(e.category),this.typeaheadEvent.searchDestination=this.getGeoEntity(e),this.typeaheadEvent.selectionDepth=parseInt(e.index,10),e&&"CATEGORIZED"!==e.displayType&&(this.typeaheadEvent.selectionDepth+=1)},e.prototype.setCurrentLocationSelectedFields=function(){this.typeaheadEvent.suggestionType=s.CURRENT_LOCATION,this.typeaheadEvent.typeaheadSelection=!0,this.typeaheadEvent.searchDestination={fullName:"CurrentLocation",id:"",type:s.CURRENT_LOCATION},this.typeaheadEvent.selectionDepth=1},e.prototype.getSearchField=function(e){return e?l.Utils.isOrigin(e)?a.O:l.Utils.isDestination(e)?a.D:a.U:a.U},e.prototype.getGeoEntity=function(e){return{fullName:e.regionNames.lastSearchName,id:this.getSourceId(e),shortName:e.regionNames.shortName,sourceSystem:this.getSourceSystem(e),type:e.type}},e.prototype.getSourceId=function(e){var t;return e.sourceId||(null===(t=e.essId)||void 0===t?void 0:t.sourceId)||e.hotelId||e.gaiaId||l.Utils.UNKNOWN},e.prototype.getSourceSystem=function(e){var t,n=e.sourceName||(null===(t=e.essId)||void 0===t?void 0:t.sourceName)||(e.hotelId?"LCM":e.gaiaId?"GAI":"");switch(n){case"GAI":return o.GAIA;case"LCM":return o.LCM;case"GPA":return o.GOOGLE;default:return n||o.UNKNOWN}},e.prototype.getSuggestionType=function(e){switch(e){case"GOOGLEMAPS":return s.GOOGLE;case"USERHISTORY":return s.RECENT_HISTORY;case"ALTERNATE":return s.ALTERNATE;case"POPULAR":return s.POPULAR;case"CURRENTLOCATION":return s.CURRENT_LOCATION;default:return s.NORMAL}},e.prototype.getSuggestionList=function(e){var t=this;return e.map((function(e){var n={id:t.getSourceId(e),sourceSystem:t.getSourceSystem(e),type:e.type};return e.hierarchyInfo&&e.hierarchyInfo.relation&&e.hierarchyInfo.relation.length&&(n.reason=e.hierarchyInfo.relation[0]),n}))},e.prototype.getSublob=function(e,t){return(t=l.Utils.getSubLob(e,t))?"."+t:""},e.prototype.getPageName=function(e,t){if(t=t.toLowerCase(),(e=e.toLowerCase())&&-1===e.indexOf("homepage")){var n=this.checkIfHomepage(t)?"Homepage":this.findPageName(e);return-1!==n.indexOf("UNKNOWN")?this.findPageName(t):n}return this.checkIfHomepage(t)?"Homepage":this.findPageName(t)},e.prototype.checkIfHomepage=function(e){return new RegExp("^(https:\\/\\/)[a-zA-Z]{2,}\\.[a-zA-Z0-9]{1,61}\\.[a-zA-Z.]{2,}((\\/\\?)|\\/$)").test(e)},e.prototype.findPageName=function(e){return-1!==e.indexOf("package")||-1!==e.indexOf("packagetype")?this.returnPageName("Packages",e):-1!==e.indexOf("flight")?this.returnPageName("Flights",e):-1!==e.indexOf("hotel")?this.returnPageName("Hotels",e):-1!==e.indexOf("car")?this.returnPageName("Cars",e):-1!==e.indexOf("lx")||-1!==e.indexOf("activities")||-1!==e.indexOf("things-to-do")?this.returnPageName("Activities",e):-1!==e.indexOf("rail")?this.returnPageName("Rails",e):"UNKNOWN"},e.prototype.returnPageName=function(e,t){return-1!==t.indexOf("search")?e+".Search":e+"LandingPage"},e.prototype.calculateTimeSpendOnTypeaheadInput=function(e){var t=e.focusTime;this.typeaheadEvent.timestamps.timeFromFocusToBlur=(new Date).getTime()-new Date(t).getTime()},e}();t.TypeaheadEvent=c},75791:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.TypeaheadEventLogger=t.LogType=void 0;var o,s=n(3468),l=n(28961),c=n(95170),u=n(58361);!function(e){e.TYPEAHEAD_FOCUS="typeahead-focus",e.TYPEAHEAD_SELECT="typeahead-select",e.TYPEAHEAD_BLUR="typeahead-blur",e.WIZARD_SUBMIT="wizard-submit",e.RECOMMENDATION_SEEN="recommendation-seen",e.RECOMMENDATION_SELECTED="recommendation-selected"}(o=t.LogType||(t.LogType={}));var d=function(){function e(t,n){this.analytics=t,this.isEgtaLoggingEnabled=!0,e.sessionStore||this.initSessionStore()}return e.prototype.initLogger=function(t){this.initSessionStore(),this.initializeInputField();var n=t.client,r=t.subLob,i=t.lob,a=t.locale,o=t.siteId,s=t.personalize,l=t.enableEgta;e.sessionStore.metadata={client:n,subLob:r,lob:i,locale:a,siteId:o,personalize:s,enableEgta:l}},e.prototype.logTypeaheadRequest=function(t){e.sessionStore&&(e.sessionStore.query=t)},e.prototype.logTypeaheadResponse=function(t){e.sessionStore.response=t,e.sessionStore.selected=void 0;var n=s.RecommendationEvent.getRecommendationSeenMessage(t,e.sessionStore.fieldName||"");n&&this.trackEventToUisPrime(this.getReferrerId(o.RECOMMENDATION_SEEN),o.RECOMMENDATION_SEEN,!1,[n])},e.prototype.logTypeaheadOpen=function(t){e.sessionStore.prefill=t,this.initializeInputField(),this.isEgtaLoggingEnabled&&this.trackEventToUisPrime(this.getReferrerId(o.TYPEAHEAD_FOCUS),o.TYPEAHEAD_FOCUS,!1,[new l.TypeaheadEvent(l.EventName.FOCUS,e.sessionStore).getTypeaheadEventMessage()])},e.prototype.logSuggestionSelected=function(t){var n="CURRENT_LOCATION"===(null==t?void 0:t.type);c.Optional.ofNullable(t).isPresent()&&this.essResponseIsNotEmpty()&&(e.sessionStore.selected=e.sessionStore.response.sr[t.index-1]);var r=n?l.EventName.CURRENT_LOCATION:l.EventName.SELECT,i=new l.TypeaheadEvent(r,e.sessionStore),a=s.RecommendationEvent.getRecommendationClickedMessage(e.sessionStore.selected,e.sessionStore.response,e.sessionStore.fieldName||"");if(this.isEgtaLoggingEnabled){var u=[i.getTypeaheadEventMessage()];a&&this.trackEventToUisPrime(this.getReferrerId(o.RECOMMENDATION_SELECTED),o.RECOMMENDATION_SELECTED,!1,[a]),this.trackEventToUisPrime(this.getReferrerId(),o.TYPEAHEAD_SELECT,!1,u)}return i.getFlattenedJsonMessage()},e.prototype.logTypeaheadBlurEvent=function(){var t,n=this.buildUisPrimeMessages();this.isEgtaLoggingEnabled&&n.push(new l.TypeaheadEvent(l.EventName.BLUR,e.sessionStore).getTypeaheadEventMessage()),this.trackEventToUisPrime(this.getReferrerId(),o.TYPEAHEAD_BLUR,!1,n),e.sessionStore.noOfBackspaces=0,null===(t=e.sessionStore.input)||void 0===t||t.removeEventListener("keydown",this.keyDown)},e.prototype.isResolveNoSuggestionSelected=function(t){e.sessionStore.isResolve=t},e.prototype.logWizardSubmitEvent=function(){this.resetLoggerState()},e.prototype.trackEventToUisPrime=function(e,t,n,i){var a,o;try{null===(a=this.analytics)||void 0===a||a.trackEvent(e,t,null===(o=this.analytics)||void 0===o?void 0:o.omnitureData,null,n,i)}catch(s){u.Utils.logError(r(r({},s),{message:"Failed typeahead event tracking to UIS Prime"}))}},e.prototype.buildUisPrimeMessages=function(){return u.Utils.isOrigin(e.sessionStore.fieldName||"")?e.leg.origin=r({},e.sessionStore):e.leg.dest=r({},e.sessionStore),a(this.getTrackingDataEvents(),[this.getSelectedSuggestionEvents()])},e.prototype.getTrackingDataEvents=function(){var t=this.getUserTypedQuery(e.sessionStore),n=t?t.length:0,r=[];return this.isASuggestionSelected()&&r.push(Object.freeze({messageContent:{name:"TypeaheadSelectionDepth",value:this.getSelectedSuggestionPosition()},schemaName:"events"})),e.sessionStore.response&&r.push(Object.freeze({messageContent:{name:"TypeaheadSearch",value:0},schemaName:"events"})),r.push(Object.freeze({messageContent:{name:"TypeaheadCharactersTyped",value:n},schemaName:"events"})),r},e.prototype.getSelectedSuggestionEvents=function(){var t=this.getSelectedSuggestionData("origin",e.leg.origin),n=this.getSelectedSuggestionData("dest",e.leg.dest);return Object.freeze({messageContent:{selectedSuggestions:[t,n]},schemaName:"allSelectedSuggestions"})},e.prototype.getSelectedSuggestionData=function(t,n){var r=null==n?void 0:n.selected,i="origin"!==t||n?(null==n?void 0:n.query)||(null==n?void 0:n.prefill)||"TANoneSelected":"OriginNotApplicable",a=this.getUserTypedQuery(e.sessionStore),o=r&&r.regionNames&&r.regionNames.lastSearchName||i;return{essRequestId:(e.sessionStore.response||{rid:"-"}).rid,lastSearchName:o,relation:r&&r.hierarchyInfo&&r.hierarchyInfo.relation&&r.hierarchyInfo.relation[0]||"-",searchField:t,sourceName:r?r.essId?r.essId.sourceName:r.sourceName?r.sourceName:"UNKNOWN":"UNKNOWN",stringSourceId:(r&&r.essId&&r.essId.sourceId||-1).toString(),suggestionType:r?r.type:"UNKNOWN",userHistory:!!r&&"USERHISTORY"===r.category,userTypedQuery:a}},e.prototype.getReferrerId=function(t){if(t===o.RECOMMENDATION_SEEN)return"TYPEAHEAD.EGREC.RecSeen";if(t===o.RECOMMENDATION_SELECTED)return"TYPEAHEAD.EGREC.RecSelected";var n=e.sessionStore.metadata||{},r=[];return r.push(this.getLaunchView(n.client||"")),r.push(this.getWizard(n.client||"")),r.push(n.lob||"Unknown"),r.push(this.getShortLob(n.lob||"",n.subLob)),r.push(n.locale||"-"),r.push(n.siteId||"-"),t===o.TYPEAHEAD_FOCUS?r.push("TAStart"):(r.push(this.getTypeaheadTrigger()),r.push.apply(r,a(this.getInstrumentationValue((n.lob||"").toLowerCase())))),r.join("|")},e.prototype.getLaunchView=function(e){return(e=e.toLowerCase()).indexOf("home")>-1?"Home":e.indexOf("flight")>-1?"FLT":e.indexOf("hotels.search")>-1?"":e.indexOf("hotel")>-1?"HTL":e.indexOf("vacationrental")>-1?"VR":e.indexOf("pack")>-1?"PKG":e.indexOf("car")>-1?"CAR":e.indexOf("cru")>-1?"CRU":e.indexOf("lx")>-1?"LX":e.indexOf("rail")>-1?"RAIL":e.indexOf("open")>-1?"OPEN":e},e.prototype.getWizard=function(e){switch(e.toLowerCase()){case"hotels.search":case"flights.search":case"open.search":case"cars.search":case"lx.Search":case"packages.search":return"UpdateSearch";default:return"CoreWzd"}},e.prototype.getShortLob=function(e,t){switch(e.toLowerCase()){case"flights":return"F."+u.Utils.getSubLob(e,t);case"hotels":return"H";case"packages":return u.Utils.getSubLob(e,t);case"activities":return"LX";case"cruises":return"CR";case"cars":return"C";default:return"-"}},e.prototype.getTypeaheadTrigger=function(){return this.essResponseIsNotEmpty()?""===e.sessionStore.response.q?this.isASuggestionSelected()?"TAShow.TAFocus":"TAShow.TANoSelection":this.isASuggestionSelected()?"TAShow.TASelection":"TAShow.TANoSelection":"TANoShow.TAPrevSearch"},e.prototype.getInstrumentationValue=function(t){var n=[],r="-";this.getSelectedSuggestionPosition()>=0&&(r=this.getSelectedSuggestionPosition().toString());var i=this.essResponseIsNotEmpty()?e.sessionStore.response.sr.length:0;return"flights"===t||"hotels"===t?n.push(this.getHierarchyType(e.sessionStore.selected)+"#"+r):n.push("L#"+r),n.push((this.getUserTypedQuery(e.sessionStore)&&e.sessionStore.metadata&&e.sessionStore.metadata.enableEgta?"EGTA":"ESS")+"#"+i),n.push("UH#"+this.getNumberOfUserHistorySuggestions()),n},e.prototype.getHierarchyType=function(e){if(c.Optional.ofNullable(e).isPresent()){if(this.isChild(e))return"CL";if(this.isParent(e))return"PL"}return"DL"},e.prototype.isChild=function(e){if(c.Optional.ofNullable(e).isNotPresent())return!1;var t=e&&e.hierarchyInfo&&e.hierarchyInfo.relation||[];return 0!==t.length&&t.indexOf("child")>=0},e.prototype.isParent=function(t){if(c.Optional.ofNullable(t).isNotPresent()||!this.essResponseIsNotEmpty())return!1;var n=parseInt(c.Optional.ofNullable(t.index).orElse("-1"),10);return!(n<0||e.sessionStore.response.sr.length<=n+1)&&this.isChild(e.sessionStore.response.sr[n+1])},e.prototype.getNumberOfUserHistorySuggestions=function(){return e.sessionStore.metadata&&e.sessionStore.metadata.personalize?this.essResponseIsNotEmpty()?e.sessionStore.response.sr.filter((function(e){return"USERHISTORY"===e.category})).length.toString():"0":"-"},e.prototype.essResponseIsNotEmpty=function(){return e.sessionStore.response&&e.sessionStore.response.sr&&e.sessionStore.response.sr.length>0},e.prototype.isASuggestionSelected=function(){return!!e.sessionStore.selected},e.prototype.getUserTypedQuery=function(e){return e.query===e.prefill?"":e.query},e.prototype.getSelectedSuggestionPosition=function(){if(!this.isASuggestionSelected()||c.Optional.ofNullable(e.sessionStore.selected.index).isNotPresent())return-1;try{return parseInt(e.sessionStore.selected.index,10)+1}catch(t){return-1}},e.prototype.resetLoggerState=function(){this.initSessionStore(),e.leg={}},e.prototype.keyDown=function(t){(t.key&&["Delete","Backspace"].indexOf(t.key)>-1||t.keyCode&&[8,46].indexOf(t.keyCode)>-1)&&(e.sessionStore.noOfBackspaces+=1)},e.prototype.initializeInputField=function(){var t,n;e.sessionStore.input=u.Utils.getDomElement(),e.sessionStore.fieldName=u.Utils.getInputElementId(e.sessionStore.input),null===(t=e.sessionStore.input)||void 0===t||t.removeEventListener("keydown",this.keyDown),null===(n=e.sessionStore.input)||void 0===n||n.addEventListener("keydown",this.keyDown)},e.prototype.initSessionStore=function(){e.sessionStore={metadata:{lob:u.Utils.UNKNOWN},noOfBackspaces:0,query:"",href:window.location.href}},e.leg={},e}();t.TypeaheadEventLogger=d},54531:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(26796),t),i(n(75791),t)},95170:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Optional=void 0;var n=function(){function e(e){this.value=e}return e.of=function(t){if(e.isEmpty(t))throw new Error("Optional.of doesn't accept undefined or null values. Use Optional.ofNullable instead");return new e(t)},e.ofNullable=function(t){return new e(t)},e.empty=function(){return new e(null)},e.isEmpty=function(e){return null==e||void 0===e},e.prototype.get=function(){if(this.isPresent())return this.value;throw new Error("Exception while trying to get the value of an empty Optional")},e.prototype.isPresent=function(){return!e.isEmpty(this.value)},e.prototype.isNotPresent=function(){return!this.isPresent()},e.prototype.orElse=function(e){return this.isPresent()?this.value:e},e}();t.Optional=n},58361:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var r=n(83703),i=function(){function e(){}return e.init=function(t){if(t&&"function"==typeof t.getLoggerWithIdentifier){var n=t.getLoggerWithIdentifier("uitk-react-typeahead");n&&"function"==typeof n.logEvent&&(e.logger=n)}},e.isOrigin=function(e){return(e=e.toLowerCase()).indexOf("origin")>-1||e.indexOf("from")>-1||e.indexOf("departure")>-1||e.indexOf("drop")>-1||e.indexOf("home")>-1||e.indexOf("loc2")>-1},e.isDestination=function(e){return(e=e.toLowerCase()).indexOf("dest")>-1||e.indexOf("to")>-1||e.indexOf("arrival")>-1||e.indexOf("near")>-1||e.indexOf("pick")>-1||0===e.indexOf("location")},e.getDomElement=function(){var e;return null===(e=document.querySelectorAll(".uitk-dialog-layer-responsive .uitk-typeahead-dialog, .uitk-typeahead-menu .uitk-menu-open")[0])||void 0===e?void 0:e.getElementsByTagName("input")[0]},e.logError=function(t){try{e.logger&&(t=t.stack?{message:t.message,stack:t.stack}:t,e.logger.logEvent(new r.SystemEvent(r.SystemEventLevel.ERROR,"TypeaheadLoggingError"),t))}catch(n){console.error("unable to log errors from typeahead-client-logger. Reason:"+n)}},e.getInputElementId=function(t){var n;return t&&((n=t.getAttribute("data-stid"))||e.logError({message:"Failed to retrieve input element id from 'data-stid'"})),n||e.UNKNOWN},e.getSubLob=function(e,t){t||(t=new URLSearchParams(window.location.search).get("pwaSubLOB")||"");switch(e.toLowerCase()){case"flights":switch(t&&t.toLowerCase()){case"oneway":return"OW";case"multicity":return"MD";default:return"RT"}case"packages":switch(t&&t.toLowerCase()){case"fhc":return"FHC";case"hc":return"HC";case"fc":return"FC";default:return"FH"}default:return""}},e.UNKNOWN="UNKNOWN",e}();t.Utils=i},12111:function(){},83526:function(){},40838:function(){},44982:function(){},69236:function(){},33474:function(){},49434:function(){},23538:function(){},83002:function(){},67044:function(){},58803:function(){},52966:function(){},278:function(){},19624:function(){},22664:function(){},35608:function(){},50023:function(){},3178:function(){},28618:function(){},59229:function(){},10150:function(){},65769:function(){},43294:function(){},59943:function(){},48998:function(){},79825:function(){},63268:function(){},62499:function(){},28859:function(){},81970:function(){},80895:function(){},43846:function(){},50051:function(){},18856:function(){},22953:function(){},5764:function(){},28065:function(){},80426:function(){},81014:function(){},12117:function(){},67186:function(){},36364:function(e,t,n){n.d(t,{As:function(){return v},G0:function(){return g},O7:function(){return u},Rx:function(){return h},Ry:function(){return p},Yj:function(){return c},Z_:function(){return m},jb:function(){return d},jt:function(){return f}});var r=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};Symbol("brand");function i(e,t){return{reason:null==e?void 0:e.reason,validation:t.validation,origin:(null==e?void 0:e.origin)||"value",message:t.message,input:t.input,abortEarly:null==e?void 0:e.abortEarly,abortPipeEarly:null==e?void 0:e.abortPipeEarly}}function a(e,t){return{reason:t,origin:null==e?void 0:e.origin,abortEarly:null==e?void 0:e.abortEarly,abortPipeEarly:null==e?void 0:e.abortPipeEarly}}function o(e,t,n,r){if(!t||!t.length)return{output:e};let o,s,l=e;for(const c of t){const e=c(l);if(e.issue){o=o||a(n,r);const t=i(o,e.issue);if(s?s.push(t):s=[t],o.abortEarly||o.abortPipeEarly)break}else l=e.output}return s?{issues:s}:{output:l}}function s(e,t){return e&&"string"!=typeof e?[void 0,e]:[e,t]}function l(e,t,n,r,i,a){return{issues:[{reason:t,validation:n,origin:(null==e?void 0:e.origin)||"value",message:r,input:i,issues:a,abortEarly:null==e?void 0:e.abortEarly,abortPipeEarly:null==e?void 0:e.abortPipeEarly}]}}function c(e=[]){return{schema:"any",async:!1,_parse(t,n){return o(t,e,n,"any")}}}function u(e,t){const[n,r]=s(e,t);return{schema:"boolean",async:!1,_parse(e,t){return"boolean"!=typeof e?l(t,"type","boolean",n||"Invalid type",e):o(e,r,t,"boolean")}}}function d(e,t){return{schema:"native_enum",nativeEnum:e,async:!1,_parse(n,r){return Object.values(e).includes(n)?{output:n}:l(r,"type","native_enum",t||"Invalid type",n)}}}function h(e,t){const[n,r]=s(e,t);return{schema:"number",async:!1,_parse(e,t){return"number"!=typeof e?l(t,"type","number",n||"Invalid type",e):o(e,r,t,"number")}}}function p(e,t,n){const[r,i]=s(t,n);let a;return{schema:"object",object:e,async:!1,_parse(t,n){if(!t||"object"!=typeof t)return l(n,"type","object",r||"Invalid type",t);let s;a=a||Object.entries(e);const c={};for(const[e,r]of a){const i=t[e],a=r._parse(i,n);if(a.issues){const r={schema:"object",input:t,key:e,value:i};for(const e of a.issues)e.path?e.path.unshift(r):e.path=[r],null==s||s.push(e);if(s||(s=a.issues),null==n?void 0:n.abortEarly)break}else c[e]=a.output}return s?{issues:s}:o(c,i,n,"object")}}}function f(e){return{schema:"optional",wrapped:e,async:!1,_parse(t,n){return void 0===t?{output:t}:e._parse(t,n)}}}function m(e,t){const[n,r]=s(e,t);return{schema:"string",async:!1,_parse(e,t){return"string"!=typeof e?l(t,"type","string",n||"Invalid type",e):o(e,r,t,"string")}}}function g(e,t){return{schema:"union",union:e,async:!1,_parse(n,r){let i,a;for(const t of e){const e=t._parse(n,r);if(!e.issues){a=[e.output];break}if(i)for(const t of e.issues)i.push(t);else i=e.issues}return a?{output:a[0]}:l(r,"type","union",t||"Invalid type",n,i)}}}function v(e,t,n){const i=e._parse(t,n);return i.issues?{success:!1,error:new r(i.issues),issues:i.issues}:{success:!0,data:i.output,output:i.output}}}}]);
//# sourceMappingURL=https://bernie-assets.s3.us-west-2.amazonaws.com/shopping-pwa/app-shared.73c863f07a00e1074c63.js.map